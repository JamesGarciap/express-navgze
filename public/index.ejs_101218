
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <!--  <meta name="viewport" content="width=device-width, initial-scale=1"> -->

   <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0, shrink-to-fit=yes" />
<!--    <meta name="viewport" content="initial-scale=1.0001, minimum-scale=1.0001, maximum-scale=1.0001, user-scalable=no"/> -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>NaviGaze</title>
    <link rel="icon" href="/images/favicon.png" type="image/png">

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="/../stylesheets/bootstrap-select.min.css">
    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
   <!--  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"> -->

    <!-- Theme CSS -->
    <link href="css/grayscale.css" rel="stylesheet">

    <link href="/stylesheets/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <link href="/stylesheets/style.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="/stylesheets/signin.css" rel="stylesheet">

    <link href="/stylesheets/bootstrap-datetimepicker.min.css" rel="stylesheet">

    <link href="css/select2.css" rel="stylesheet">
     <link href="css/jquery-ui.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/normalize.min.css">
    <link rel="stylesheet" href="/css/main.css">
   <!--  <link type="text/css" rel="stylesheet" href="stylesheets/lightslider.min.css11" /> -->
    <link type="text/css" rel="stylesheet" href="stylesheets/lightslider-fav.css111" />
      <link rel="stylesheet" type="text/css" href="/stylesheets/help.css">

 <link type="text/css" rel="stylesheet" href="stylesheets/prettify.css" />
 <link type="text/css" rel="stylesheet" href="stylesheets/jquery.bxslider-3.css" />
 <link type="text/css" rel="stylesheet" href="css/daterangepicker.min.css" />

 
 <script type="text/javascript">
(function(doc) {

    var addEvent = 'addEventListener',
        type = 'gesturestart',
        qsa = 'querySelectorAll',
        scales = [1, 1],
        meta = qsa in doc ? doc[qsa]('meta[name=viewport]') : [];

    function fix() {
        meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
        doc.removeEventListener(type, fix, true);
    }

    if ((meta = meta[meta.length - 1]) && addEvent in doc) {
        fix();
        scales = [.25, 1.6];
        doc[addEvent](type, fix, true);
    }

}(document));
</script>

  <!--  *********  GOOGLE ANALYTICS -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113092876-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-113092876-2');
</script>


  <!-- *********** END GOOGLE AALYTICS -->
   
   <style type="text/css">
   /** Virutal Tour Text ***   **/
.blink_me {
  animation: blinker 5s linear infinite;
}

@keyframes blinker {  
  50% { opacity: 0.6; }
}

/*.virtual_text_heading

{
  font-size: 52px;
color: #fff;

text-shadow: #ccc 0 1px 0, #c9c9c9 0 2px 0, #bbb 0 3px 0, #b9b9b9 0 4px 0, #aaa 0 5px 0,rgba(0,0,0,1) 0 6px 1px, rgba(0,0,0,1) 0 0 5px, rgba(0,0,0,1) 0 1px 3px, rgba(0,0,0,1) 0 3px 5px, rgba(0,0,0,1) 0 5px 10px, rgba(0,0,0,1) 0 10px 10px, rgba(0,0,0,1) 0 20px 20px;
}*/

.virtual_text_heading {
    font-size: 25px;
    color: #fff;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
    margin: 0 auto;
    left: 25%;
    position: absolute;
    right: 25%;
}
#virtual_tour_text_div
{
  position: absolute;
  margin: 0 auto;
  top: 3%;
  display: block;
  z-index: 9999999;
  width: 100%;
}

@media screen and (max-width: 480px)
{
  .virtual_text_heading {
    font-size: 23px;
    color: #fff;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
    width: 100%;
    left: 15%;
    right: 25%;
}
}

/**  ! Virtual Tour **/
.asof_text{
    display: none;
    text-transform: lowercase;
}
  span#apptunit {
    font-size: 10px !important;
    vertical-align: text-top !important;
}

#slider-range123 {
      width: 80%;
    margin: 0 auto;
    color: #00FFFF !important;
    height: 7px !important;
    margin-top: 13px;
}
/*#amountprice , #amountprice2
{
    color:#000 !important;
        width: 20%;
    text-align: center;
    font-size: 12px;
    margin: 0 10px;
}*/
.crdimgh6titles3{font-size: 1.2em !important;}
.single_pricing{ color: #414141;}
.single_pricing i{ color: #414141;}
#modelPropertyname{
    font-size: 1.3em;
    margin: 15px 0;
}

.ui-slider-horizontal .ui-slider-handle {
    top: -0.3em !important;
    margin-left: -.6em;
}
.ui-slider .ui-slider-handle {
    position: absolute;
    z-index: 2;
    width: 0.7em !important;
    height: 0.7em !important;
    cursor: default;
    -ms-touch-action: none;
    touch-action: none;
    border-radius: 75% !important;
}
   /**** ####### NEW SLIDER ###########   **/

   #zeher{
    width:200px;
    height:500px;
   
    
    overflow:auto;
}


li.loki {
    margin-bottom: 5px;
}

.vslider > li > a > img {
       width: 10.2em;
    height: 7em;
    margin-top: 0.4em !important;
    margin-bottom: 0.4em;
}

.arrowws
{
    cursor: pointer;
}

#zeher::-webkit-scrollbar 
{
    display: none;
}



#zeher::-ms-scrollbar 
{
    display: none;
}
  *::-moz-scrollbar {
        width: 100px;
        height: 6px;
    }
     

     #amountprice, #amountprice2 {
    width: 61%;
    text-align: left;
    margin: 0 0px;
    background: transparent;
    color: #fff !important;
    box-shadow: none;
    border: none;
    font-size: 13px;
    display: inline-block;
}
span.low-price {
    font-size: 15px;
    position: relative;
}
span.high-price {
    font-size: 15px;
}
.tglbasic {
    color: #00FFFF !important;
    margin-bottom: 15px;
}
.low:after {
    position: absolute;
    top: 12px;
    right: 2px;
    content: "";
    width: 14px;
    height: 1px;
    background: transparent;
    font-family: FontAwesome;
    color: transparent;
}

.low {
    width: 48%;
    float: left;
    position: relative;
}
.high{
    width: 40%;
    float: right;
}


   /**  #### ! new slider #### ***/
html, body {
   
    width: -webkit-calc(100% - 0px) !important;
   
}
.lightSlider
{
    overflow: visible !important;
}
/** =============== CALENDER CSS on FILTER ========== **/
.date-picker-wrapper .date-range-length-tip
{
    display: none !important;
}
 a.ui-datepicker-next.ui-corner-all {
    border: 1px solid #d4d4d4;
}

.ui-datepicker .ui-datepicker-prev {
    left: 2px;
    border: 1px solid;
}

.ui-icon {
    display: inline-block;
    vertical-align: middle;
    margin-top: -.25em;
    position: relative;
    text-indent: 0px !important;
    overflow: hidden;
    background-repeat: no-repeat;
}


.ui-datepicker .ui-datepicker-prev, .ui-datepicker .ui-datepicker-next {
   position: absolute;
    top: 2px;
    width: 2.8em !important;
    height: 1.8em;
    background: #666;
    /* text-align: left; */
}

.ui-datepicker .ui-datepicker-prev span, .ui-datepicker .ui-datepicker-next span {
    display: block;
    position: absolute;
    left: 50%;
    margin-left: -13px;
    top: 50%;
    margin-top: -8px;
    color: #00FFFF !important;
    width: 4em !important;
}



/** =============== ! bCALENDER CSS on FILTER ========== **/



   div#simplebutton-one {
    margin-left: -32px !important;
}
   .landscapemoding
   {
    display: none;
   }

   .destinationheight
    {
        margin-top: -5px !important;
    }
 @media only screen and (max-width: 480px)
 {

    .destinationheight
    {
        margin-top: -5px !important;
    }
    div#simplebutton-one {
    margin-left: 0px !important;
}
 }
 
   .landscaperestrict
    {
        display: block  ;
        position: fixed !important;
        top: 0% !important;
        left: 0% !important;
        width: 100% !important;
        height: 100vh !important;
        background: #000 !important;
        z-index: 999999999999999999999999999999999 !important;
        padding: 26px 34px !important;
    }
    .none33
 {
    display: none;
 }
@media only screen and (min-device-width: 481px) and (max-device-width: 767px) and (orientation:landscape)
{

    .landscaperestrict
    {
        display: block  ;
        position: fixed !important;
        top: 0% !important;
        left: 0% !important;
        width: 100% !important;
        height: 100vh !important;
        background: rgba(0,0,0) !important;
        z-index: 999999999999999999999999999999999 !important;
        padding: 26px 34px !important;
    }
    .none33
 {
    display: none;
 }
      .modecontent
            { 
                float: left;
                display: inline-block;
                width: 62%;
               
                margin-top: 60px;
                margin-left: 10px;
                font-size: 18px;
                line-height: 1.6em;
            }
            /*#return-to-top
            {
                display: none !important;
            }*/
            section
            {
                display: none;
            }
            .intro
            {
                display: none !important;
            }
            .sidebar.right.background.sdbrwdth
            {
                display: none !important;
                right: 0px !important;
            }
            .sidebar.right.background.sdbrwdth
            {
                display: none !important;
                position: fixed !important;
            }
            .sidebars > .sidebar
            {
                display: none !important;
            }
            .navbar-fixed-top
            {
                display: none;
            }

}


   @media only screen and (min-device-width : 992px) and (max-device-width : 1024px) and (orientation : landscape)

{

    
    #mydivheader
        {
          display:none;
        }

        #mydiv 
        {
            display: none !important;
        }

    .navbar-fixed-top, .navbar-fixed-bottom {
    position: absolute !important;
    right: 0;
    left: 0;
    z-index: 1030;
    }

        div#simplebutton-one {
             margin-top: -150px !important;
             bottom: 233px !important;
             height: 700px !important;
            }

            #mobileminimap
            {
                display: block;
            }

            
}

@media screen and (max-width: 480px)
{
    .searchsubmit {
    
    width: 52% !important;
    
}

}


@media screen and (max-width: 991px)


{
    .vslider > li > a > img
    {
        height: 66% !important;
    }
.hotspotclicked
{
    right: 0px !important;
}


.sidebar.right.background.sdbrwdth {
    height: 78%;
}
.sidebar.left.background.navbgs {
    height: 78%;
}
}

@media screen and (max-width: 767px)
{
     .dnlseciunit {
    font-size: 0.63333em !important;
        }
}
    @media screen and (max-width: 1024px)
    {
       

        #mobileminimap
        {
            display: block;
        }
        #mydiv
        {
            display: none !important;
        }
    }
#mobileminimap
        {
            display: none;
            top: auto;
            left: auto;
            width: 41px;
            margin-left: 7px;
            display: block;
            bottom: 6px;
            right: 7px;
        }
/** minimappp **/
.sidenav {
    height: 0;
    width: 100vw;
    position: absolute;
    z-index: 999999;
    bottom: 0;
    left: 0;
    background-color: #111;
    overflow-x: hidden;
    transition: 0.5s;
    padding-top: 0px;
    text-align:center;
}

.sidenav a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 25px;
    color: #818181;
    display: block;
    transition: 0.3s;

}

.sidenav a:hover{
    color: #f1f1f1;
}

.sidenav .closebtn {
       position: absolute;
    top: 0;
    right: 25px;
    font-size: 36px;
    margin-left: 50px;
    z-index: 9999999999999999999999999;
    background-color: #fff;
    border-radius: 50px;
    text-align: center;
    margin-right: 3%;
    padding-right: 28px;
    font-weight: bold;
}

.newsidewindow
{
    height: calc(100vh - 50px) !important;
    padding-top: 40px !important;
}
@media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
}


/**  ! end MiniMap **/



 @media screen and (max-width: 991px)
 {


                .bounceX {
    -moz-animation: bounceX 3s infinite;
    -webkit-animation: bounceX 3s infinite;
    animation: bounceX 3s infinite;
}
@-moz-keyframes bounceX {
  0%, 20%, 50%, 80%, 100% {
    -moz-transform: translateX(0);
    transform: translateX(0);
  }
  40% {
    -moz-transform: translateX(-30px);
    transform: translateX(-30px);
  }
  60% {
    -moz-transform: translateX(-15px);
    transform: translateX(-15px);
  }
}
@-webkit-keyframes bounceX {
  0%, 20%, 50%, 80%, 100% {
    -webkit-transform: translateX(0);
    transform: translateX(0);
  }
  40% {
    -webkit-transform: translateX(-30px);
    transform: translateX(-30px);
  }
  60% {
    -webkit-transform: translateX(-15px);
    transform: translateX(-15px);
  }
}
@keyframes bounceX {
  0%, 20%, 50%, 80%, 100% {
    -moz-transform: translateX(0);
    -ms-transform: translateX(0);
    -webkit-transform: translateX(0);
    transform: translateX(0);
  }
  40% {
    -moz-transform: translateX(-30px);
    -ms-transform: translateX(-30px);
    -webkit-transform: translateX(-30px);
    transform: translateX(-30px);
  }
  60% {
    -moz-transform: translateX(-15px);
    -ms-transform: translateX(-15px);
    -webkit-transform: translateX(-15px);
    transform: translateX(-15px);
  }
}

/** bouceX1 **/

.bounceX1 {
    -moz-animation: bounceX1 3s infinite;
    -webkit-animation: bounceX1 3s infinite;
    animation: bounceX1 3s infinite;
}
@-moz-keyframes bounceX1 {
  0%, 20%, 50%, 80%, 100% {
    -moz-transform: translateX(0);
    transform: translateX(0);
  }
  40% {
    -moz-transform: translateX(30px);
    transform: translateX(30px);
  }
  60% {
    -moz-transform: translateX(15px);
    transform: translateX(15px);
  }
}
@-webkit-keyframes bounceX1 {
  0%, 20%, 50%, 80%, 100% {
    -webkit-transform: translateX(0);
    transform: translateX(0);
  }
  40% {
    -webkit-transform: translateX(30px);
    transform: translateX(30px);
  }
  60% {
    -webkit-transform: translateX(15px);
    transform: translateX(15px);
  }
}
@keyframes bounceX1 {
  0%, 20%, 50%, 80%, 100% {
    -moz-transform: translateX(0);
    -ms-transform: translateX(0);
    -webkit-transform: translateX(0);
    transform: translateX(0);
  }
  40% {
    -moz-transform: translateX(30px);
    -ms-transform: translateX(30px);
    -webkit-transform: translateX(30px);
    transform: translateX(30px);
  }
  60% {
    -moz-transform: translateX(15px);
    -ms-transform: translateX(15px);
    -webkit-transform: translateX(15px);
    transform: translateX(15px);
  }
}

/**  ! BounceX1 **/
.bounce {
    -moz-animation: bounce 3s infinite;
    -webkit-animation: bounce 3s infinite;
    animation: bounce 3s infinite;
}
@-moz-keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    -moz-transform: translateY(0);
    transform: translateY(0);
  }
  40% {
    -moz-transform: translateY(-30px);
    transform: translateY(-30px);
  }
  60% {
    -moz-transform: translateY(-15px);
    transform: translateY(-15px);
  }
}
@-webkit-keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    -webkit-transform: translateY(0);
    transform: translateY(0);
  }
  40% {
    -webkit-transform: translateY(-30px);
    transform: translateY(-30px);
  }
  60% {
    -webkit-transform: translateY(-15px);
    transform: translateY(-15px);
  }
}
@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    -moz-transform: translateY(0);
    -ms-transform: translateY(0);
    -webkit-transform: translateY(0);
    transform: translateY(0);
  }
  40% {
    -moz-transform: translateY(-30px);
    -ms-transform: translateY(-30px);
    -webkit-transform: translateY(-30px);
    transform: translateY(-30px);
  }
  60% {
    -moz-transform: translateY(-15px);
    -ms-transform: translateY(-15px);
    -webkit-transform: translateY(-15px);
    transform: translateY(-15px);
  }
}

.arrow_box123 {
    position: absolute;
  /*  background: rgba(255, 252, 253,0.6);*/
    border: 1px solid #d4d4d4;
    top: -3px;
    left: 102%;
    font-size: 14px;
    width: 100px;
    color: #fff;
    border-radius: 30px;
    padding: 10px;
    font-weight: bold;
    letter-spacing: 3px;
}
.arrow_box123:after, .arrow_box123:before {
    top: 100%;
    left: 21%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.arrow_box123:after {
    /*border-color: rgba(212, 212, 212, 0);
    border-top-color: rgba(255, 252, 253,0.6);*/
    border-width: 10px;
    margin-left: -10px;
}
.arrow_box123:before {
    border-color: rgba(212, 212, 212, 0);
    border-top-color: #d4d4d4;
    border-width: 11px;
    margin-left: -11px;
}



.arrow_box1234 {
    position: absolute;
   /* background: rgba(255, 252, 253,0.6);*/
    border: 1px solid #d4d4d4;
    top: -3px;
    right: 102%;
    font-size: 14px;
    width: 100px;
    color: #fff;
    border-radius: 30px;
    padding: 10px;
    font-weight: bold;
    letter-spacing: 3px;
}
.arrow_box1234:after, .arrow_box1234:before {
    top: 100%;
    left: 78%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.arrow_box1234:after {
    /*border-color: rgba(212, 212, 212, 0);
    border-top-color: rgba(255, 252, 253,0.6);*/
    border-width: 10px;
    margin-left: -10px;
}
.arrow_box1234:before {
    border-color: rgba(212, 212, 212, 0);
    border-top-color: #d4d4d4;
    border-width: 11px;
    margin-left: -11px;
}



 }
   


@media screen and  (min-width: 991px)
{
    /*.bounceX
    {
        display: none;
    }

.bounceX1
{
        display: none;
    }*/


.bounce
{
        display: none;
    }

.arrow_box123
{
        display: none;
    }


    .arrow_box1234

    {
            display: none;
        }

}










    @media screen and (max-width: 991px){
                html {
                    overflow-x: hidden;
                    overflow-y: scroll !important;
                }
}

   .priceapi
   {
        background-image: url(/images/lg1.gif);
    height: 11px;
    width: 40px;
    
    display: inline-block;
    background-repeat: no-repeat;
    position: relative;
    margin-left: 10px;
   }
    .seletthor
    {
        color:#fff !important;
        line-height: 3.3em !important;
    }
    
    canvas {
    height: 0px;
}
    .container.background1 {
    width: 100% !important;
}
     @media screen and (max-width: 991px)
    {
         .navbar-fixed-top, .navbar-fixed-bottom {
                position: absolute !important;
            }   
    }
#mappano{
    
position: absolute !Important;
    z-index: 9;
    bottom: 0px;
    display: block;
    overflow: hidden;
}

#mydivheader {
    padding: 10px;
    cursor: move;
    z-index: 9;
   background-color:rgba(0,0,0,.4);
    color: #fff;
    position: relative;
            top: 6px;
    left: -29px;
    height: 14px;
        user-select: none;
}

#mydiv {
    position: absolute;
    z-index: 999999999999999999;
  
    text-align: center;
    
    width: 153px;
    right: 200px;
    
}


   div#simplebutton-one > div {
    width: 200px !important;
    padding: 12px 10px !important;
    text-align: center;
    color: #fff;
    border: solid 2px #fff !important;
    z-index: 999999999999999999999999999999999;
    text-decoration: none;
    background-color: transparent !important;
    font-weight: bold;
    border-radius: 30px !important;
    left: 45% !important;
    top: 85% !important;
}

@media screen and (min-width: 992px) and (max-width: 1024px) 
{

    div#simplebutton-one {
   
   /* margin-top: -120px !important;
    height: 700px !important;*/
}
 div#simplebutton-one > div {
    width: 200px !important;
    padding: 12px 10px !important;
    text-align: center;
    color: #fff;
    border: solid 2px #fff !important;
    z-index: 999999999999999999999999999999999;
    text-decoration: none;
    background-color: transparent !important;
    font-weight: bold;
    border-radius: 30px !important;
    left: 45% !important;
    top: 70% !important;
}
}
@media only screen and (min-device-width: 992px) and (max-device-width: 1024px) and (orientation:landscape)
{

    div#simplebutton-one {
   
  /*  margin-top: -120px !important;*/
   /* height: 700px !important;*/
}
 div#simplebutton-one > div {
    width: 200px !important;
    padding: 12px 10px !important;
    text-align: center;
    color: #fff;
    border: solid 2px #fff !important;
    z-index: 999999999999999999999999999999999;
    text-decoration: none;
    background-color: transparent !important;
    font-weight: bold;
    border-radius: 30px !important;
    left: 45% !important;
    top: 85% !important;
}
}
div#simplebutton-one > div > div {
    width: 200px !important;
}
    /* html
    {
        overflow-y: scroll !important;
    }*/
    div#idPropertyDetails {
    z-index: 99999999999999999999999999999;
}
  #mydiv {
    position: absolute;
    z-index: 9999;
    background-color: none;
    /* text-align: center; */
    border: 0px solid #d3d3d3;
    right: 20%;
    width: 150px;
    height: 150px;
    bottom: 10%;
    padding: 0px;
} 
/*.dragicon {
    z-index: 99;
    cursor: pointer;
    overflow: visible;
    position: relative;
    right: -75px;
    top: -9px;
    font-size: 24px;
    color: #00FFFF;
}
#mydivheader {
    padding: 10px;
    cursor: move;
    z-index: 999;
   
    color: #fff;
    width: 100px;
    height: 150px;
 
}
   */ 
   #dragfontcol {
    position: relative;
    margin-bottom: 59px;
    font-weight: bold;
    text-align: center;
    vertical-align: text-top;
    color: #00FFFF;
}
 .dragicon {
    z-index: 99;
    cursor: pointer;
    overflow: visible;
    position: relative;
    right: -31px;
    top: 1px;
    font-size: 24px;
     color: #00FFFF;
     opacity: 0;
    
}
/*#mydivheader {
    padding: 0px 10px 5px 10px;
    cursor: move;
    z-index: 1;
    background-color:rgba(0,0,0,.4);
    color: #fff;
    vertical-align: middle;
    left: -30px;
    position: absolute;
    color:#999;
}*/
    .badge {
    display: inline-block;
    min-width: 4px !important;
    padding: 3px 4px !important;
    font-size: 9px !important;
    font-weight: bold;
    line-height: 1;
    color: #fff;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    background-color: #777;
    border-radius: 10px;
}

    .topimgarrw
    {
        cursor: pointer;
    }
    .qap-text {
    font-family: "Exo", "Times New Roman", Georgia;
    font-weight: normal;
    position: relative;
    z-index: 100;
    top: 0;
    color: #fff;
    left: 0.3em;
    font-size: 15px;
    display: block;
    /*height: 28%;*/
        text-transform: capitalize;
        font-size: 12px;
    padding-top: 3px;
}

.qap-text1 {
    font-family: "Exo", "Times New Roman", Georgia;
    font-weight: normal;
    position: relative;
    z-index: 100;
    top: 0;
    color: #fff;
    left: 0.3em;
    font-size: 15px;
    display: block;
    height: 19%;
        text-transform: capitalize;
        font-size: 12px;
    padding-top: 3px;
}
    #loadernav {
                    transition: all .3s ease-in-out;
                    opacity: 1;
                    visibility: visible;
                    position: fixed;
                    height: 100vh;
                    width: 100%;
                    background: #fff;
                    z-index: 1099999;
                    top: 0;
                }

                #loadernav.fadeOut {
                    opacity: 0;
                    visibility: hidden
                }

                .spinnernav {
                    width: 40px;
                    height: 40px;
                    position: absolute;
                    top: calc(45% - 50px);
                    left: calc(43% - 20px);
                    background-color: #fff;
                    border-radius: 100%;
                }
  .date-picker-wrapper.no-shortcuts {
    margin-top: 20px;
    z-index: 999;
}
 .date-picker-wrapper.date-range-picker19 .day.first-date-selected { background-color: green !important; }
.date-picker-wrapper.date-range-picker19 .day.last-date-selected { background-color: red !important; }
.date-picker-wrapper.date-range-picker199 .day.first-date-selected { background-color: green !important; }
.date-picker-wrapper.date-range-picker1999 .day.first-date-selected { background-color: red !important; }
    p.card-text {
    margin-bottom: 35px !important;
    overflow-y: scroll;
    height: 150px;
}
    
p.card-text::-webkit-scrollbar-track
{
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.1) !important;
    background-color: #F5F5F5 !important;
    border-radius: 10px !important;
}

p.card-text::-webkit-scrollbar
{
    width: 5px !important;
    background-color: #F5F5F5 !important;
}

p.card-text::-webkit-scrollbar-thumb
{
    border-radius: 10px !important;
    background-color: #FFF !important;
    background-image: -webkit-gradient(linear,
                                       40% 0%,
                                       75% 84%,
                                       from(#999999),
                                       to(#666666),
                                       color-stop(.6,#d4d4d4))
} 
    .rcdimgrowdv2 {
    width: 20% !important;
}
    .accountdrpdn, .dropdneffect1 {
    color: white !important;
    text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black !important;
}
    .col-lg-10.col-xs-6.col-sm-8.xcz span {
    color: #fff !important;
    font-size: 14px !important;
}
    .lables
{
margin-top: 50px !important;
}

   div.xcz span#select2-pcq2-container , div.xcz span.select2-selection__rendered{
    margin-top: -12px !important;
}
    #mappano
    {
        right: 20%;
        z-index: 9;
        transition: 1s ease;
            border: 1px solid #00FFFF;
    }
    #mappano:hover
    {
        width: 500px !important;
        height: 500px !important;
        transition: 1s ease;
            border: 1px solid #00FFFF;
    }
    .close {
    font-size: 21px !important;
    font-weight: 700 !important;
    position: absolute !important;
    right: -15px !important;
    background: #fbf9f9 !important;
    padding: 0 !important;
    opacity: 1 !important;
    border-radius: 50px !important;
    height: 40px !important;
    width: 40px !important;
    line-height: 20px !important;
    top: -14px !important;
    border: 4px solid #000 !important ;
    color: #000 !important;
    z-index: 9999 !important;
}
 .close:hover
 {
    background: #fbf9f9 !important;
    opacity: 1 !important;
 }
 .modal {
  text-align: center !important;
  padding: 0!important;
}

.modal:before {
  content: '';
  display: inline-block !important;
  height: 100% !important;
  vertical-align: middle !important;
  margin-right: -4px !important;
}

.modal-dialog {
  display: inline-block !important;
  text-align: left !important;
  vertical-align: middle !important;
}
/**** RETURN TOP BUTTON ***/

#return-to-top {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgb(0, 0, 0);
    background: rgba(0, 0, 0, 0.7);
    width: 50px;
    height: 50px;
    display: block;
    text-decoration: none;
    -webkit-border-radius: 35px;
    -moz-border-radius: 35px;
    border-radius: 35px;
    display: none;
    -webkit-transition: all 0.3s linear;
    -moz-transition: all 0.3s ease;
    -ms-transition: all 0.3s ease;
    -o-transition: all 0.3s ease;
    transition: all 0.3s ease;
    z-index: 999999999999999999999999999999999999;
}
#return-to-top i {
    color: #fff;
    margin: 0;
    position: relative;
    left: 16px;
    top: 13px;
    font-size: 19px;
    -webkit-transition: all 0.3s ease;
    -moz-transition: all 0.3s ease;
    -ms-transition: all 0.3s ease;
    -o-transition: all 0.3s ease;
    transition: all 0.3s ease;
}
#return-to-top:hover {
    background: rgba(0, 0, 0, 0.9);
}
#return-to-top:hover i {
    color: #fff;
    top: 5px;
}


/* Extra Things */

/********   ! RETURN TOP BUTTON ****/
    .slidefav1
    {
        position: relative;
        left: 0;
    }
i#wishlistid2
{
    position: absolute;
    right: 0;
    top: 5px;
}

 li.list-group-item.background.lslide {
    height: 151px !important;
}
.lSSlideWrapper.usingCss
{
    height: 495px !important;
    
}
.select2-container--default.select2-container--disabled .select2-selection--single
{
background-color: transparent !important;
}
/*p.media {
    width: 4em;
    height: 4em;
    border-radius: 100%;
    position: relative;
    z-index: 0;
    overflow: hidden;
    transition: all 800ms;
    border: 4px solid #00FFFF;
}*/
/*.navbar-toggle
{
    float: none !important;
    right: -159px;
}*/
.select2-results__options
{
   /* height: 100px !important;*/
    overflow-y: scroll;
}

.select2-results__options::-webkit-scrollbar-track
{
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.1) !important;
    background-color: #F5F5F5 !important;
    border-radius: 10px !important;
}

.select2-results__options::-webkit-scrollbar
{
    width: 5px !important;
    background-color: #F5F5F5 !important;
}

.select2-results__options::-webkit-scrollbar-thumb
{
    border-radius: 10px !important;
    background-color: #FFF !important;
    background-image: -webkit-gradient(linear,
                                       40% 0%,
                                       75% 84%,
                                       from(#999999),
                                       to(#666666),
                                       color-stop(.6,#d4d4d4))
}

.select2-results__option{
font-size:12px !important;
color: #000 !important;
}

.btn-info:active:hover, .btn-info.active:hover, .open > .dropdown-toggle.btn-info:hover, .btn-info:active:focus, .btn-info.active:focus, .open > .dropdown-toggle.btn-info:focus, .btn-info:active.focus, .btn-info.active.focus, .open > .dropdown-toggle.btn-info.focus,.btn-info:hover,.btn-info:focus, .btn-info.focus {
    color: #fff;
    background-color: #31b0d5 !important;
    border-color: #269abc !important;
}

/*************
        =======  START SCREEN CSS ====
                                *****************  */
.select2-container .select2-selection--single .select2-selection__rendered {
    font-weight: normal !important;
    font-size: 16px;
    color: #999;
   
}
  
  .select2-container--default .select2-selection--single .select2-selection__rendered
  {
    line-height: 3.3em;
  }

  .strtinput{
    width: 46% !important;
    border:0px solid #000 !important;
    
  } 
  .searchinput.srchplace
  {
    width: 35% !important;
  }
  .calendarinputs
  {
    width:36%;
    display: inline;
    float: left;
   /* margin-left: 10px;*/
  } 
  .searchinput.searchguest
  {
    width: 15% !important;
  }
  .date-picker-wrapper.no-shortcuts
  {
    margin-top: 20px;
  }
.date-picker-wrapper.no-shortcuts.no-gap.two-months {
    padding-bottom: 12px;
    margin-top: 26px !important;
    z-index: 99999 !important;
    margin-left: 27px;
}
.triangle-up {
    width: 10px;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid #00FFFF;
    left: 23%;
    position: absolute;
    z-index: 9999999999999999;
    bottom: -6%;
    transition: 1s ease;
    display: none;
}

.triangle-up1
{
    left: 73%;
}
.select2-container--default .select2-selection--single
{
 width: 100% !important;
}

.select2-container
{
    width: 100% !important;
}
.panolens-container {
    position: absolute !important;
    top: 0 !important;
    z-index: 0 !important;
}
.fornewscreen
    {
     display: none !important;
    }
 .no-margin
        {
            margin-left: 0px !important;margin-right: 0px !important;

        }
        .no-padding{
            padding-left: 0px !important;
            padding-right: 0px !important;
        }
        .bgimage img
        {
            width: 100%;
            height: auto;
        }
        .searchdiv
        {
            display: flex !important;
            position: absolute;
            top: 40%;
            width: 100%;
            z-index: 999;
        }
        .searchinput
        {
            width: 18% !important;
            position: relative;
        }
        .searchinput_2{
            float: none;
            width: 18% !important;
        }
        .searchinput,.searchbtm
        {
            display: inline-block;
            float:left;
        }
        .searchcontainer
        {
            margin:0 auto;
            /*width: 100%;*/
        }
        .searchcontainer input
        {
            border: none;
            border-radius: 5px !important;
            padding-left: 36px;
            margin: 5px;
            height: 56px;
            width: 100%;
            cursor: pointer;    
        }
        .searchcontainer input:hover{
            cursor: pointer;
        }
        .searchcontainer > .startscreenform
        {
    position: relative;
    border-radius: 4px;
    margin: 0 auto;
    max-width: 1000px;
    padding: 10px 10px 0;
    background: rgba(0,0,0,.2);
    height: 86px;
    color: #999 !important;
        }
        
        .searchcontainer i
        {
            position: absolute;
            top: 25px;
            left: 16px;
        }
        .searchbtm
        {
            position: relative;
            float: left;
           /* right: -31px;*/
        }

        .searchsubmit {
        border-radius: 24px;
    min-height: 49px;
    padding-left: 14px;
    padding-right: 14px;
    background-color: #ffc115;
    border-color: #ffc115;
    color: #000;
    font-weight: 500;
    margin-left: 16px;
    width:80%;
    height: 56px;
    margin-top: 5px;
}
.guestsinput,.strtinput
{
height:56px;
}

.facal2
{
    left: 55% !important;
}
/** focus classes **/
input.guestsinput:focus , span.select2-selection.select2-selection--single:focus , select.form-control.parentPlace.rty1.select2-hidden-accessible:focus , .select2-container:focus, .searchinput.srchplace:focus,.searchcontainer input:focus,
.searchcontainer i:focus
{
    outline: #00FFFF solid 3px;
    cursor: pointer;
    border-radius: 5px;
}
/** !focus Classes **/


/** Guest Pop **/
        .arrow_box {
    position: relative;
    background: #fff;
    border: 1px solid #000;
}
.arrow_box:after, .arrow_box:before {
    bottom: 100%;
    left: 50%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.arrow_box:after {
    border-color: rgba(255, 255, 255, 0);
    border-bottom-color: #fff;
    border-width: 10px;
    margin-left: -10px;
}
.arrow_box:before {
    border-color: rgba(0, 0, 0, 0);
    border-bottom-color: #000;
    border-width: 11px;
    margin-left: -11px;
}

.guestpopup {
    width: 200px;
    padding: 20px;
    margin-top: 5px;
    right: 33%;
}
.guestfade
{
    display: none;
}

.guestkey
{
   width: 40px !important;
    height: 40px !important;
    padding: 0px !important;
    text-align: center !important;
}
.guestkey:focus
{
    outline: none !important;
}
/** !Guest Pop **/






    /*********************
      ************** MEDIA QUERIS ************
      ********************** **/
        @media screen and (max-width: 991px)

{

.searchinput.srchplace {
    width: 28% !important;
}

    .calendarinputs {
    width: 38%;
    display: inline;
    float: left;
    /* margin-left: 10px; */
}

.searchinput.searchguest {
    width: 18%!important;
}
.searchinput {
    width: 29% !important;
    position: relative;
}

.strtinput {
    width: 45% !important;
    border: 0px solid #000 !important;
}

}


        @media screen and (max-width: 991px)
        {
           
           .searchinput.srchplace {
    width: 100% !important;
}

            .searchinput
        {
            width: 100% !important;
            position: relative;
        }
        
        .calendarinputs {
    width: 64% !important;
    display: inline;
    float: left;
    /* margin-left: 10px; */
    margin-top: 1%;
}
.searchinput.searchguest {
    width: 16%!important;
   margin-top: 1%;
}
.searchcontainer > .startscreenform {
    position: relative;
    border-radius: 4px;
    margin: 0 auto;
    max-width: 1000px;
    padding: 10px 10px 0;
    background: rgba(0,0,0,.2);
    height: 105%;
}
.searchbtm {
    position: relative;
    width: 18%;
    margin-top: 1%;
}

        .bgimage img
        {
            width: 100%;
            height: 700px;
        }
        .searchcontainer>form 
        {
    position: relative;
    border-radius: 4px;
    margin: 0 auto;
    max-width: 1000px;
    padding: 10px 10px 0;
    background: rgba(0,0,0,.2);
    height: 140px;
        }
       /* .onpopguest {
    back
    }*/

    @media screen and (max-width: 480px)
    {
.calendarinputs {
    width: 72% !important;
    display: inline;
    float: left;
    /* margin-left: 10px; */
    margin-top: 1%;
}

.searchbtm {
    position: relative;
    width: 100%;
    margin-top: 1%;
}
.searchcontainer i
    {
        position: absolute;
        top: 19px;
        left: 16px;
    }
.select2-container--default .select2-selection--single:first-child{
    height: 33px !important;
    padding: 4px !important;
    margin-top:-9px;
}

}
        @media screen and (max-width: 420px)
        {
            .searchinput
        {
            width: 90%;
            position: relative;
        }
        .searchbtm {
    position: relative;
    width: 100%;
}

.calendarinputs {
    width: 100% !important;
    display: inline;
    float: left;
    /* margin-left: 10px; */
    margin-top: 1%;
}
.searchinput.searchguest {
    width: 95% !important;
    margin-top: 1%;
}

.searchcontainer > .startscreenform {
    position: relative;
    border-radius: 4px;
    margin: 0 auto;
    max-width: 1000px;
    padding: 10px 10px 0;
    background: rgba(0,0,0,.2);
    height: 105%;
}
        
        .bgimage img
        {
            width: 100%;
            height: 700px;
        }
        .searchcontainer>form 
        {
    position: relative;
    border-radius: 4px;
    margin: 0 auto;
    max-width: 1000px;
    padding: 10px 10px 0;
    background: rgba(0,0,0,.2);
    height: 70px;
        }
        .searchbutton
        {
            width: 40px !important;
        }
        
        }

@media screen and (max-width: 480px)
{   


        .select2-container
            {
                width: 100% !important;
            }
    p.hotspotD ~h5 {
    font-size: 20px !important;
    margin-top: 0.2em !important;
}
    span#two-inputs
    {
            display: inline-flex;
    width: 100%!important;
    position: relative;
    }

       .searchsubmit {
    border-radius: 24px;
    min-height: 40px;
    padding-left: 14px;
    padding-right: 14px;
    background-color: #ffc115;
    border-color: #ffc115;
    color: #000;
    font-weight: 500;
    margin-left: 16px;
    width: 80%;
    height: 40px;
    margin-top: 5px;
    }
    .searchcontainer input {
    border: none;
    border-radius: 5px;
    padding-left: 36px;
    margin: 5px 0px;
    height: 40px;
    width: 100%;
    cursor: pointer;
    font-size: 16px;
    padding: 3px 0 0 36px;
    }


    input#date-range200
    {
    margin-right: 5px !important;
        }

        input#date-range201
        {
    margin-left: 5px !important;
    }
    .searchinput.searchguest {
    width: 100% !important;
    margin-top: 1%;
    }
    .searchsubmit {
    
    font-size: 16px !important;
    }
    .searchdiv {
    display: flex !important;
    position: absolute;
    /*top: calc(50% - 140px);*/
    top: calc(13%);
    width: 74%;
    z-index: 999;
    align-content: center;
    align-self: center;
    margin-left: calc(12% - -5px);
    }

    .strtinput {
    width: 50% !important;
     border: 0px solid #000 !important;
        }

        .guestpopup {
    width: 200px;
    padding: 20px;
    margin-top: 5px;
    right: 33%;
    position: absolute;
    z-index: 999;
        }

        .date-picker-wrapper.no-shortcuts {
    margin-top: 3px;
    }

        .date-picker-wrapper .drp_top-bar {
    line-height: 1.4;
    position: relative;
    padding: 10px 10px 10px 0;
        }
 .lSSlideWrapper.usingCss {
   height: 364px !important;
    }
    .crdimgifrm1 {
    
    height: auto !important;
    
    }
   #apptunit {
     font-size: 9px !important; 
     font-size: 9px;
    vertical-align: text-top;

    }
  .mobilewisllistid {
    
    right: -2px !important;
        }

        /*div#simplebutton-one {
    top: -9% !important;
    left: -28% !important;
        }*/
        div#simplebutton-one {
   
    left: -20% !important;
    height: 100vh !important;
    overflow: visible !important;
    }
    div#simplebutton-one > div {
    width: 200px !important;
    padding: 12px 10px !important;
    text-align: center;
    color: #fff;
    border: solid 2px #fff !important;
    z-index: 1;
    text-decoration: none;
    background-color: transparent !important;
    font-weight: bold;
    border-radius: 30px !important;
    left: 45% !important;
    margin-top: 1% !important;
}


        .panofixmedia {
            height: 100vh !important;
           
            z-index: 0 !important;
        }
    .newsidewindow
    {
        height: calc(99vh - 50px) !important;
        padding-top: 40px !important;
    }
}

@media screen and (max-width: 390px)
{   
       .newsidewindow
    {
        height: calc(96vh - 50px) !important;
        padding-top: 40px !important;
    }
}

/** ================== END START SCREEN CSS ************ == **/
@media screen  and (min-device-width: 992px) and (max-device-width: 1024px)
{
div#simplebutton-one {
   
    margin-top: -120px !important;
    height: 700px !important;
}
 div#simplebutton-one > div
    {
        top:75% !important;
       margin-top: -50px !important;
    }
}


@media screen  and (min-device-width: 768px) and (max-device-width: 991px)
{

/** IPAD STARTS CREEN **/
.searchdiv {
    display: flex !important;
    position: absolute;
    top: 40%;
    width: 66%;
    z-index: 999;
    margin-left: 17%;
}

.searchinput.srchplace {
    width: 96% !important;
    display: inline;
    margin-left: 10px;
}

.searchcontainer input {
    border: none;
    border-radius: 5px !important;
    padding-left: 36px;
    margin: 5px;
    height: 56px;
    width: 100%;
    cursor: pointer;
    font-size: 15px;
}


.searchsubmit {
    
    padding-left: 5px;
    padding-right: 14px;
    font-size: 14px !important;
}

.guestpopup {
       
    position: absolute;
    right: -70%;
}
p.hotspotD ~h5 {
    font-size: 20px !important;
    margin-top: 0.2em !important;
}

span.select2-dropdown.select2-dropdown--below {
    width: 61% !important;
}
span#apptunit {
    font-size: 9px;
}

/** END START SCREEN **/


div#simplebutton-one {
    margin-left: -66.5px !important;
}

    i.fa.fa-calendar.searchicon {
    left: 29px;
    }
    .vslider > li > a > img {
    width: 81% !important;
    height: 66% !important;
    
    }

    .panofixmedia {
    height: 100vh !important;
    }
}

@media screen and (min-width: 992px)
{
    html
    {
        overflow: hidden !important;
        position: fixed;
    }
}




</style>
<script src="vendor/jquery/jquery.min.js"></script>
<!-- <script type="text/javascript" src="/javascripts/Tthree.js"></script>
    <script type="text/javascript" src="/javascripts/panolens.min.js"></script> -->
    <script src="/javascripts/markerclusterer.js"></script>

</head>

<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" >
    <div id="" class="none33 landscaperestrict">
        <div align="center"><img style="width: 162px; height: auto;" src="/images/Landscape_restrict1.png"></div> 
        <div style="text-align: center; color: #00FFFF !important"> 
            <h4 style="font-size: 18px !important;    margin: 7px !important;">Please rotate your device</h4>
            <p style="font-size: 14px !important;">Please go back to portrait mode for the best experience</p>
        </div>
    </div>

<!-- original position of slide in map -p- changed under section tag - sachin-->
 <!--   <div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>

 <div  id="mappano2" style="width:100% !important; height: 100vh !important;"> </div>

</div>-->


    <div id="loadernav">
    <div class="spinnernav" style="background-color: #fff;"><!-- <img style="width: 200px;" src="images/navigazeoading.gif" /><br> --></div>
</div>
<script type="text/javascript">
        window.addEventListener('load', () => {
             const loader = document.getElementById('loadernav');
             setTimeout(() => {
               loader.classList.add('fadeOut');
             }, 300);
         });
 </script>
       <a href="javascript:" id="return-to-top"><i style="color: #fff;z-index: 99999999999999999" class="fa fa-chevron-up"></i></a>
  <style type="text/css">
      
      /*** LOADER ***/
.loader {
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  border-top: 16px solid #3498db;
  width: 40px;
  height: 40px;
  -webkit-animation: spin 2s linear infinite; /* Safari */
  animation: spin 2s linear infinite;
}

/* Safari */
@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/** LOADER **/
  </style> 
<div id="lightbox" style="
    display: none;
    position: fixed;
    top: 0%;
    left: 0%;
    width: 100%;
    height: 100%;
    background-color: #000;
    z-index: 9999;
    -moz-opacity: 0.70;
    opacity: .70;
    filter: alpha(opacity=70);
">
    <div class="loader" style="z-index:;position: absolute;top: 40%;left: 50%;z-index: 99;"></div>
</div>
<!-- <div id="loader1" class="loadershow">
</div> -->
<!-- <div id="loader" class="loaderhide">
</div> -->
    <!--div id="dom-5989967029bc7713698fd906" class="hotspot">
        <div class="hotspot-zone" style="color:#00FFFF">
            <input type="checkbox">
            <p class="media">
                <span class="centered">
                    <span class="content">
                        <h5 style="margin-top: -2.0em;margin-left: -0.6em;">2</h5>
                    </span>
                </span>
            </p>
            <div class="content">
            </div>
        </div>
    </div-->

    <!-- Navigation -->
    <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
        <div class="container background1">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                    Menu <i class="fa fa-bars"></i>
                </button>
                <!--div id="btnBackButton" style="font-size: 24px;    cursor:pointer; " class="navbar-brand fa fa-chevron-left"></div>
                <div id="btnSearchOpen" style="font-size: 24px;    cursor:pointer; " class="navbar-brand fa fa-search">-</div>
                <div id="btnBrowseOpen" style="font-size: 24px;    cursor:pointer; " class="navbar-brand fa fa-table">+</div-->
                <div class="navbar-brand fontsz"><a href="/">NaviGaze</a></div>
                <!--a class="navbar-brand page-scroll" href="#page-top">
                    <i class="fa fa-play-circle"></i> Home
                </a-->
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from browse link when scrolled up past browse section -->
                    <!--li class="hidden">
                        <a href="#page-top"></a>
                    </li-->
                    <% if(user == '' && user !=='undefined'){ %>
                   <!--  <li>
                        <a class="page-scroll pscolor" href="#header">Home</a>
                    </li> -->
                    <li>
                       <a class="page-scroll pscolor loginname" href="#account">Login</a>
                        <!--%= user._id %-->
                    </li>
                    <li>
                        <a class="page-scroll pscolor" href="#contact">Help</a>
                    </li>
                     <li>
                        <a class="page-scroll pscolor" href="/listyourproperty" target="_blank">List Your Property</a>
                    </li>
                    <div class="dropdown dropdownmenu1 welcomename hidden">             
                     
                    
        <li class="btn dropdown-toggle accountdrpdn profile_down" type="button" data-toggle="dropdown" aria-expanded="false" ><a id="aloo" class="font_family font_family sessionName" > </a><span class="caret"></span></li>
                  <ul class="dropdown-menu">
                    <li class="dropdneffect1 pscolor"><a  href="#welcome01" style="text-shadow: none!important;font-weight: normal !important;">My Account</a></li>
                    <li class="dropdneffect1 pscolor"><a id="logout" href="javascript:void()" style="text-shadow: none!important;font-weight: normal !important;">Log Out</a></li>
                  </ul>
                </div>

                    <% } else{  %>

                       <!--  <li>
                            <a class="page-scroll pscolor" href="#header">Home</a>
                        </li> -->
                       
                        <li>
                            <a class="page-scroll pscolor" href="#contact">Help</a>
                        </li>
                        <li>
                            <a class="page-scroll pscolor" href="/listyourproperty" target="_blank">List Your Property</a>
                        </li>
                         
                            
                       <div class="dropdown dropdownmenu1">             
                     
                    
        <li class="btn dropdown-toggle accountdrpdn" type="button" data-toggle="dropdown" aria-expanded="false"><a class="font_family"><%=user.fName%></a><span class="caret"></span></li>
                  <ul class="dropdown-menu">
                    <li class="dropdneffect1 pscolor"><a  href="#account" style="text-shadow: none!important;font-weight: normal !important;">My Account</a></li>
                    <li class="dropdneffect1 pscolor"><a id="logout" href="javascript:void()" style="text-shadow: none!important;font-weight: normal !important;">Log Out</a></li>
                  </ul>
                </div>
                        
                    <% } %>
                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Intro Header -->
    <section id="header" class="intro panofixmediatoppadding">
         
<!-- ***************** ======== START SCREEN HTML =============  *******  -->

 <div class="newstartscreen" id="strtscreendiv">
    <div class="startscreen">
         <!-- <div id="bgimagestartscreen" class="bgimage" style="width: 1800px; height: 800px;">
            <img style="width: 1800px; height: 800px;" src="img/1400m-scan-casa.jpg">
         </div> -->


         <div class="stsrtpano" id="stsrtpano1" style="
    height:  100vh;
    width:  100vw;">
          
    
          </div>
                <div class="searchdiv">
                       <div class="searchcontainer ">
                          <div class="startscreenform row ">
                                <div class="searchinput srchplace" style="">
                                <i class="fa fa-map-marker searchicon" aria-hidden="true" style="z-index: 9999"></i>
                                    <select style="height: 56px;margin-top:5px;" class="form-control parentPlace rty1">
                                        <option>Select Place</option>
                                    </select>
                                </div>


                                 <div id="wrapper" class="calendarinputs">
                                    <div class="demo" style="position: relative;">
                                            <span id="two-inputs">
                                          <i class="fa fa-calendar searchicon" aria-hidden="true"></i> 
                                          <input type="text" id="date-range200" class="strtinput strtfrominput" size="20" value="" readonly placeholder="Arrival">
                                          
                                    <i class="fa fa-calendar searchicon facal2" aria-hidden="true"></i>    
                                           <input type="text" id="date-range201" class="strtinput strttoinput" size="20" value="" readonly placeholder="Departure" style="margin-left: -1px;">
                                          
                                            </span>
                                             <div class="triangle-up"></div>
                                    </div>
                                </div>

                                <div class="searchinput searchguest">
                                        <i class="fa fa-users searchicon" aria-hidden="true" style="z-index: 9999"></i>
                                        <input type="text" id="guestinputcount" class="guestsinput guestsum" placeholder="Guests" readonly style="margin-left: -1px;"></input>
                                   

                                            <!-- GUEST POP UP -->

                                     <div class="arrow_box guestpopup guestfade">




                                                  <div class="center">
                                                    
                                                    <h6>Guests</h6>

                                                      <div class="input-group">
                                                          <span class="input-group-btn">
                                                              <button type="button" class="btn btn-default btn-number_guestscreen" disabled="disabled" data-type="minus" data-field="quant[1]">
                                                                  <span class="glyphicon glyphicon-minus"></span>
                                                              </button>
                                                          </span>
                                                          <input type="text" id="adultsSearch" name="quant[1]" class=" input-number_guests_screen guestnum1 guestkey" value="1" min="1" max="20" readonly>
                                                          <span class="input-group-btn">
                                                              <button type="button" class="btn btn-default btn-number_guestscreen" data-type="plus" data-field="quant[1]">
                                                                  <span class="glyphicon glyphicon-plus"></span>
                                                              </button>
                                                          </span>
                                                      </div>

                                                   
                                                   <!-- <h6>Childs</h6>
                                                      
                                                      <div class="input-group">
                                                          <span class="input-group-btn">
                                                              <button type="button" class="btn btn-default  btn-number_guestscreen"  data-type="minus" data-field="quant[2]">
                                                                <span class="glyphicon glyphicon-minus"></span>
                                                              </button>
                                                          </span>
                                                          <input type="text" id="childsSearch" name="quant[2]" class=" input-number_guests_screen guestnum2 guestkey1" value="0" min="0" max="20" readonly>
                                                          <span class="input-group-btn">
                                                              <button type="button" class="btn btn-default  btn-number_guestscreen" data-type="plus" data-field="quant[2]">
                                                                  <span class="glyphicon glyphicon-plus"></span>
                                                              </button>
                                                          </span>
                                                      </div> -->

                                                    <p></p>

                                                </div>



                                     </div>
                                <!-- !Guest Pop Up -->
                                    



                                </div>
                               <div class="searchbtm">
                                    <button id="" class="btn searchsubmit">Search</button>
                                </div>
                                </div>
                                    </div>  
                                </div>
                            <div>
</div>
</div>
</div>

                <!--  ************* == ! Start screen ******** -->


        <div id="divPano" class="intro-body panofixmedia fornewscreen" onunload="deleteAllCookies()" >
        
            <div id="divLoading" class=""></div>

        </div>
        <div id="divPanoEditor" class="intro-body"> </div>
        <div id="divPropertyTour" class="intro-body">
      <!--  <div id="mydiv">
  <div id="mydivheader"><span id="dragfontcol">DRAG IT AROUND</span><i class="fa fa-arrows-alt dragicon"></i></div>
  <div  id="mappano" class="mapdrag"> </div>
</div> -->
<div id="mydiv">
  <div id="mydivheader"><span id="dragfontcol"></span><i class="fa fa-arrows-alt dragicon"></i></div>
 <div  id="mappano" class="mapdrag"> </div>
</div>
        </div>

        
        <div id="boxWelcome" class="container-heading background row dn">
            <div>
                <h1 class="brand-heading brand-margins">NaviGaze</h1>
                <h4 class="intro-text intro-margins">A new kind of booking experience</h4>
               
            </div>
        </div>
        </div>
        <div class="sidebars fornewscreen">
            <div class="sidebar left background navbgs">
                <div id="navdiv">
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs nav-justified navmargin">
                        <li class="nav-item active">
                            <a class="nav-link btn tglbasic" data-toggle="tab" href="#panel1" role="tab">Search</a>
                        </li>
                        <li class="nav-item tab-line">
                            <!--a class="nav-link btn" data-toggle="tab" href="#panel2" role="tab" style="color:#00FFFF">Properties</a-->
                        </li>
                    </ul>
                    <!-- Tab panels -->
                    <div class="tab-content card">
                        <!--Panel 1-->
                        <div class="tab-pane fade in show active" id="panel1" role="tabpanel">
                            <br>
                            <form class="form-signin" action="/search" method="post">
                                <div class="panel-group panelwidth" id="accordion">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#collapse1" class="tglbasic">Basic</a>
                                            </h4>
                                        </div>
                                        <div id="collapse1" class="panel-collapse collapse in">
                                            <div class="panel-body">
                                                <div id="divSearch">

                                                    <div id="divSearchRow" class="row">
                                                        <div class="col-lg-12">
                                                            <div id="a" class="row">
                                                                <div class="col-lg-2 col-xs-3 col-sm-3 clg2">
                                                                    <i class="fa fa-globe globecolor" aria-hidden="true"></i>
                                                                    <div class="glyphicon-class icndest destinationheight" style="padding-top:0.9em; margin-top: 5px;">Destination</div>
                                                                </div>

                                                                <div class="col-lg-10 col-xs-8 col-sm-8 xcz">
   <!--  <select  class="form-control parentPlace" id="selDestination">
     
    </select> -->

    <!--  <select class="selectpicker parentPlace" data-show-subtext="true" data-live-search="true">
        <option >Select Place</option>
      </select> -->
      <select id="myPlace2" class="form-control parentPlace2 rty">
        
        <option >Select Place</option>
      </select>
                                                                </div>

                                                            </div>
                                                            <!--input id="txtSearch" type="text" class="form-control" placeholder="Destination" aria-describedby="sizing-addon1"-->
                                                        </div>
                                                        <div class="col-lg-12">
                                                            <div id="a" class="row">
                                                                <div class="col-lg-2 col-xs-3 col-sm-3 clg2">
                                                                    <i class="fa fa-calendar globecolor" aria-hidden="true"></i>
                                                                    <div class="glyphicon-class icnarrive">Arrival Date</div>
                                                                </div>

                                                                <div class="col-lg-10 col-xs-8 col-sm-8">
                                                                    <input id="datetimeA" class="form-control inputaaddon datetimeAA" placeholder="" type="text"
                                                                        data-provide="datepicker" aria-describedby="sizing-addon1" readonly>
                                                                </div>

                                                            </div>

                                                        </div>
                                                        <div class="col-lg-12">

                                                            <div id="a" class="row">
                                                                <div class="col-lg-2 col-xs-3 col-sm-3 clg2">
                                                                    <i class="fa fa-calendar globecolor" aria-hidden="true"></i>
                                                                    <div class="glyphicon-class icnarrive">Departure Date</div>
                                                                </div>

                                                                <div class="col-lg-10 col-xs-8 col-sm-8">
                                                                    <input id="datetimeD" class="form-control inputaaddon datetimeDD" placeholder="" type="text"
                                                                        data-provide="datepicker" aria-describedby="sizing-addon1" readonly>
                                                                </div>

                                                            </div>

                                                        </div>
                                                        <div class="col-lg-12">
                                                            <div id="a" class="row">
                                                                <div class="col-lg-2 col-xs-3 col-sm-3 clg2">
                                                                    <i class="fa fa-male globecolor" aria-hidden="true"></i>
                                                                    <div class="glyphicon-class icndest">Guests</div>
                                                                </div>
                                                                <div class="col-lg-3 clg3 clg3mediadisplaynone">

                                                                </div>
                                                                <div class="col-lg-2 col-xs-2 col-sm-2">
                                                                    <a href="javascript:void(0)" id="bAdultsN">
                                                        <i class="img-minus fa fa-minus-circle icnadult" data-action="adults" aria-hidden="true"></i>
                                                    </a>                                                                    </div>
                                                                <div class="col-lg-2 col-xs-2 col-sm-2 clg22" style=""><b id="bAdults">0</b></div>
                                                                <div class="col-lg-2 col-xs-2 col-sm-2">
                                                                    <a href="javascript:void(0)" id="bAdultsP">
                                                        <i class="img-plus fa fa-plus-circle icnadult" data-action="adults" aria-hidden="true"></i>
                                                    </a>
                                                                </div>
                                                                <div class="col-lg-1">
                                                                </div>
                                                            </div>

                                                            <div id="a" class="row advancemaringleftfor2">
                                                    <div class="col-lg-2 col-xs-2 col-sm-2 clg2">
                                                        <i class="fa fa-bed globecolor" aria-hidden="true"></i>
                                                        <div class="glyphicon-class icndest">Bedrooms</div>
                                                    </div>
                                                    <div class="col-lg-3 clg3 clg3mediadisplaynone">

                                                    </div>
                                                    <div class="col-lg-2 col-xs-2 col-sm-2">
                                                        <a href="javascript:void(0)" id="bBedroomsN">
                                                        <i class="img-minus fa fa-minus-circle icnadult" data-action="bedrooms" aria-hidden="true"></i>
                                                    </a> </div>
                                                    <div class="col-lg-2 col-xs-2 col-sm-2 clg22"><b id="bBedrooms">0</b></div>
                                                    <div class="col-lg-2 col-xs-2 col-sm-2">
                                                        <a href="javascript:void(0)" id="bBedroomsP">
                                                        <i class="img-plus fa fa-plus-circle icnadult" data-action="bedrooms" aria-hidden="true"></i>
                                                    </a>
                                                    </div>
                                                    <div class="col-lg-1">
                                                    </div>
                                                </div>
                                                            <!--div class="row">
                                                            <div class="col-xs-3 col-sm-3">
                                                                <div class="input-group number-spinner">
                                                                    <span class="input-group-btn">
                    <button  type="button" class="btn btn-default" data-dir="dwn"><span class="glyphicon glyphicon-minus"></span></button>
                                                                    </span>
                                                                    <input type="text" placeholder="Adults (18+)" style="width:7em;background: transparent;color:white;" class="form-control text-center">
                                                                    <span class="input-group-btn">
                    <button  type="button" class="btn btn-default" data-dir="up"><span class="glyphicon glyphicon-plus"></span></button>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div-->
                                                        </div>

                                                             <!-- ######## price slider #######  -->
                    <div style="">
                     <br>
                      <h4 class="panel-title tglbasic">Price Range</h4>
                             <div class="low"><span class="low-price"><i class="fa fa-usd" aria-hidden="true"></i></span>
                             <span id="amountprice">0</span>
                                <!--<input type="text" id="amountprice" value="0" readonly>-->
                                </div>


                             <div class="high">
                              <span class="high-price"><i class="fa fa-usd"  aria-hidden="true"></i></span>
                             <!--<input type="text" id="amountprice2" value="40,000" readonly>-->
                              <span id="amountprice2">4000+</span>
                             </div>
                             <br><br>
                             <div id="slider-range123"></div>
                             
                            
                           
                     </div>

                     <!-- ########## END PRICE SLUDER -->
                                                        <div class="col-lg-12" style="display: none;">
                                                            <div id="a" class="row">
                                                                <div class="col-lg-2 col-xs-3 col-sm-3 clg2">
                                                                    <i class="fa fa-child cin8em" aria-hidden="true"></i>
                                                                    <div class="glyphicon-class icndest">Children</div>
                                                                </div>
                                                                <div class="col-lg-3 clg3 clg3mediadisplaynone">

                                                                </div>
                                                                <div class="col-lg-2 col-xs-2 col-sm-2">
                                                                    <a href="javascript:void(0)" id="bChildrenN">
                                                        <i class="img-minus fa fa-minus-circle icnadult" data-action="children" aria-hidden="true"></i>
                                                    </a>                                                                    </div>
                                                                <div class="col-lg-2 col-xs-2 col-sm-2  clg22"><b id="bChildren">0</b></div>
                                                                <div class="col-lg-2 col-xs-2 col-sm-2">
                                                                    <a href="javascript:void(0)" id="bChildrenP">
                                                        <i class="img-plus fa fa-plus-circle  icnadult" data-action="children" aria-hidden="true"></i>
                                                    </a>
                                                                </div>
                                                                <div class="col-lg-1">
                                                                </div>
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                 

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#collapse2" id="advanceSearch" class="tglbasic">Advanced</a>
                                            </h4>
                                        </div>
                                        <div id="collapse2" class="panel-collapse collapse">
                                            <div class="panel-body">
                                                
                                                <div id="a" class="row advancemaringleftfor2 ">
                                                    <div class="col-lg-2 col-xs-2 col-sm-2 clg2">
                                                        <i class="fa fa-bath globecolor" aria-hidden="true"></i>
                                                        <div class="glyphicon-class icndest">Bathrooms</div>
                                                    </div>
                                                    <div class="col-lg-3 clg3 clg3mediadisplaynone">

                                                    </div>
                                                    <div class="col-lg-2 col-xs-2 col-sm-2">
                                                        <a href="javascript:void(0)" id="bBathroomsN">
                                                        <i class="img-minus fa fa-minus-circle icnadult" data-action="bathrooms" aria-hidden="true"></i>
                                                    </a> </div>
                                                    <div class="col-lg-2 col-xs-2 col-sm-2 clg22"><b id="bBathrooms">0</b></div>
                                                    <div class="col-lg-2 col-xs-2 col-sm-2">
                                                        <a href="javascript:void(0)" id="bBathroomsP">
                                                        <i class="img-plus fa fa-plus-circle icnadult" data-action="bathrooms" aria-hidden="true"></i>
                                                    </a>
                                                    </div>
                                                    <div class="col-lg-1">
                                                    </div>
                                                </div>
                                               <div id="a" class="row ari1 loadershowam1" style="height: 175px;">
                                                 <div id="amenityLoader" class="loadershowam12">
                                                </div>
                                                    <div class="searchaminitiesdiv" id="brdright" style="overflow-y: scroll;height: 100%; padding-top: 5px; ">
                                                    </div>
                                                   
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#collapse3" id="btnSort" class="tglbasic">Sort</a>
                                            </h4>
                                        </div>
                                        <div id="collapse3" class="panel-collapse collapse out">
                                            <div class="panel-body" style="position: relative;">

                                                <div id="a" class="row" style="visibility: hidden;">
                                                    <div class="col-lg-2 col-xs-2 col-sm-2">
                                                        <div class="form-group radio-green">
                                                            <input data-action="review" name="group100" type="radio" id="radio100" checked hidden>
                                                            <label for="radio100"></label>
                                                        </div>
                                                    </div>

                                                   <!--  <div class="col-lg-4 col-xs-4 col-sm-4">
                                                        <i class="fa fa-star globecolor" aria-hidden="true"></i>
                                                        <div class="glyphicon-class icndest">Review Score</div>
                                                        </a>
                                                    </div>
                                                    <div class="col-lg-4 col-xs-4 col-sm-4 cl4paddingtop">
                                                        <a href="#" class="for-change">
                                                        <i id="btnReview" class="for-change fa fa-sort-amount-desc icnadult" aria-hidden="true"></i>
                                                        </a>
                                                    </div>
                                                    <div class="col-lg-2">
                                                    </div> -->
                                                </div>

                                                <div id="a" class="row" style="position: absolute;top:20px;">
                                                    <div class="col-lg-2 col-xs-2 col-sm-2">
                                                        <div class="form-group radio-green">
                                                          <!--   <input data-action="price" name="group100" type="radio" id="radio101">
                                                            <label for="radio101"></label> -->

 <label class="" style="color: #fff !important;cursor: pointer; ">
            <input  type="checkbox" id="radio101" data-action="price" name="group101">
            <i class="fa fa-square-o" style="vertical-align: sub;margin-right: 5px;"></i>
            <i class="fa fa-check-square-o" style="vertical-align: sub; margin-right: 5px;"></i>
             &nbsp;&nbsp;&nbsp;&nbsp;
            </label>


                                                        </div>
                                                    </div>

                                                    <div class="col-lg-4 col-xs-4 col-sm-4">
                                                        <i class="fa fa-money globecolor" aria-hidden="true"></i>
                                                        <div class="glyphicon-class icndest">Price</div>
                                                        </a>
                                                    </div>
                                                    <div class="col-lg-4 col-xs-4 col-sm-4 cl42paddingtop">
                                                        <a href="#" class="for-change icon-disable">
                                                        <i id="btnPrice" class="for-change fa fa-sort-amount-asc icon-disable icnadult" aria-hidden="true"></i>
                                                        </a>
                                                    </div>
                                                    <div class="col-lg-2">
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                    </div>
                    
                               



   <div class="panel panel-default activoam" style="display: none;">
      <div class="panel-heading">
           <h4 class="panel-title">
         <label class="btn activoam" style="color: #fff !important; display: none;">
            <input  type="checkbox" name="N/A" id="nacheckbox" value='Sort Not Available Prop'>
            <i class="fa fa-square-o" style="vertical-align: sub;margin-right: 5px;"></i>
            <i class="fa fa-check-square-o" style="vertical-align: sub; margin-right: 5px;"></i>
             Hide not available
            </label>
            </h4>
       </div>
   </div>



                                </div>
                                <div id="divSearchRow" class="row divsrchpdleft">
                                    <div class="col-lg-12">
                                        <input style="display: none;" id="btnSearch" class="btn btn-lg btn-primary btn-block background tglbasic" type="button" value="Search"></input>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>


                    <div id="aSideBar" data-action="toggle" data-side="left" class="sidebar-button background asidebarcusrson ">
                            <i class="fa bounceX aSideBar11 "> </i>
                    </div>

                    <!--original place of location div -p- changed (under section ends -- Sachin)-->

                   <!-- <div onclick="openNav()" id="mobileminimap"  class="sidebar-button background asidebarcusrson " style="top: 4em; left: 9.68em; width: 41px; margin-left:  7px;">
                            <i class="fa fa-map-marker"> </i>
                    </div>-->
<div class="arrow_box123 bounce">Filters</div>

                </div>

            </div>

            <div class="sidebar right background sdbrwdth">
                <div class="sdbrmrglft">
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs nav-justified navmargin">
                        <li class="nav-item active">
                            <a class="nav-link btn tglbasic" data-toggle="tab" href="#panel3" role="tab">Results <span id="resultCount" class="badge"></span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link btn tglbasic" data-toggle="tab" href="#panel4" id="favourites" role="tab">Wishlist <span id="favslideCount" class="badge"></span></a>
                            <span id="usemeasclick"></span>
                        </li>
                    </ul>
                    <br/>
                    <!-- Tab panels -->
                    <div class="tab-content card sdbrmrglft1">
                        <!--Panel 1-->

                        <!--/.Panel 1-->
                        <!--Panel 2-->
                        <div class="tab-pane fade in  active" id="panel3" role="tabpanel">
                            <img id='upClick' class="arrowws" src="/img/prop_up.png">
                           <div id="zeher">
                            <ul id="lightSlider" class="list-group vslider">
                             

                           
                            </ul>

                        </div>
                        <img id='downClick' class="arrowws" src="/img/prop_down.png">
                        </div>
                        <!--/.Panel 2-->
                        <div class="tab-pane fade wishfav" id="panel4" role="tabpanel">
                                            <!-- <div class="my-carousel">
    <div class="lSAction">
        <a class="lSPrev">AA</a>
        <a class="lSNext">BB</a>
    </div>                          



 -->
                                        <!-- ## NEW FAV SLIDER ## -->


                                         <img id='upClickfav' class="arrowws" src="/img/prop_up.png">
                           <div id="zeherfav">
                            <ul id="favimg1" class="list-group vslider"></ul>

                        </div>
                        <img id='downClickfav' class="arrowws" src="/img/prop_down.png">
                        
                       
                                      <!--  <div id="bxslider-vertical" >
                                     
                                                <div id="favimg1" class="bxslider list-group background111">

                                                 </div>
                                        </div> -->
                                    </div>                
                 </div>



                </div>
                <div id="bSideBar" data-action="toggle" data-side="right"  class="sidebar-right-button background asidebarcusrson">

 <i class="fa bounceX1 bSideBar11  "> </i>
                    </div>
<div class="arrow_box1234 bounce">Results</div>
            </div>

        </div>

    </section>
    
    <!-- Slide in map div by Sachin -->
    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <div  id="mappano2" style="width:100% !important; height: 100vh !important;"> </div>
    </div>
    <!-- location div by Sachin -->
    <div onclick="openNav()" id="mobileminimap"  class="sidebar-button background asidebarcusrson " style="display: none">
                            <i class="fa fa-map-marker"> </i>
                </div>

   
     <!-- Download Section -->
    <section id="account" class="intro">
        <img class="topimgarrw" src="/images/arrow_with_line.png" style="margin-top: 50px;">
       <!--  <section id="welcome01"></section> -->
          <% if (user =='') {%>
        <div class="container-fluid ctnfldtop">
            <div class="row">
                <div class="col-md-4 clmd442">

                    <div class="row">
                        <div class="col-md-12 col-xs-12">
                        </div>
                        <div class="col-md-12 col-xs-12">
                            <h5 class="colmh5">Why Sign up?</h5>
                            <p class="loremip">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur</p>
                        </div>
                        <div class="col-md-4">
                            
                        </div>
                    </div>
                </div>
         
                <div class="col-md-4 clmn4div1">
                    <div class="row">
                        
                             
                       
                    </div>
                    <div class="row">
                          
                        <div class="col-md-12">
                            <h5 class="colmh5">LOGIN</h5>
            <div id="error-message"></div>
                        </div>
                    </div>
                   
                    <div id="a" class="row dnlsecdvrow">
                      
                        <div class="col-lg-2">
                        </div>
                        <div class="col-lg-2 col-xs-2 col-sm-2 col-md-2">
                            <i class="fa fa-envelope dnlseci" aria-hidden="true"></i>
                            <div class="glyphicon-class dnlsecicndiv">Email<span class="startred">*</span></div>
                        </div>
                        <div class="col-lg-6 col-xs-10 col-sm-10 col-md-8">
                            <input type="email"  id="userName" name="username" class="form-control dnlsecdivinpt1 emailvalidate iphonecli" placeholder="" required>
                            <div id="error-message_user" class="error-messages"></div>
                        </div>
                        <div class="col-lg-2">

                        </div>
                        </div>
                    <div id="a" class="row">
                        <div class="col-lg-2">
                        </div>
                        <div class="col-lg-2 col-xs-2 col-sm-2 col-md-2">
                            <i class="fa fa-key dnlseci" aria-hidden="true"></i>
                            <div class="glyphicon-class dnlsecicndiv">Password<span class="startred">*</span></div>
                        </div>
                        <div class="col-lg-6 col-xs-10 col-sm-10 col-md-8">
                            <input id="passwordV" name = "password" class="form-control dnlsecdivinpt1 iphonecli" placeholder="" type="password" required>
                            <div id="error-message_pass" class="error-messages"></div>
                                             </div>
                        <div class="col-lg-2">
                        </div>
                    </div>

                    <div id="a" class="row">
                        <div class="col-lg-4 col-md-4">
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <button type="button" id="login" class="btn btn-info navbar-btn">LOGIN</button>

                        </div>
                  
                        <div class="col-lg-4">
                        </div>
                    </div>
               
                    <div id="a" class="row">
                        <div class="col-lg-4 col-md-4">
                        </div>
                        <div class="col-lg-4 col-md-4">
                           <ul class="nav  text-center">
                                <li role="presentation" class="dnlseclireprsnt"><a href="" target="_blank" data-toggle="modal" data-target="#forgotpassword_modal">Forgot Password?</a></li>
                                <!--li role="presentation" class="crdimglirole1"><a href="#">Check Availability</a></li>
                        <li role="presentation" class="crdimglirole1"><a href="#">Make Reservation</a></li-->


                            <!-- ************* FORGOT PASSWORD MODAL ***************  -->

                                 <!-- Modal -->
                                      <div class="modal fade" id="forgotpassword_modal" role="dialog">
                                        <div class="modal-dialog">
                                        
                                          <!-- Modal content-->
                                          <div class="modal-content">
                                            <div class="modal-header">
                                              <button type="button" class="close" data-dismiss="modal">&times;</button>
                                              <h4 class="modal-title text-center">Password assistance</h4>
                                            </div>
                                            <div class="modal-body">
                                              <h6 class="text-center">Enter the email address associated with your Navigaze account.</h6>

                                      <div class="fg_form">
                                        <form>
                                            <div class="row">
                                                                <div class="col-md-3">
                                                                </div>
                                                
                                       
                                       <div class="col-md-6">
                                                                    <div class="fg-label">
                                                           <!--  <label for="ap_email" class="a-form-label">
                                                              Email
                                                            </label> -->
                                                                    </div>
                                            <div class="fg-input">
                                                <input type="email" maxlength="128" id="fg_email" name="fg_email" tabindex="1" class="form-control dnlsecdivinpt1 emailvalidate" placeholder="enter your email">
                                            </div>

                                            <div class="fg-button" align="center">
                                                  <button type="button" id="fg_email_submit" class="btn btn-info navbar-btn">SUBMIT</button>


                        <div class="alert alert-danger fg_blank_error" style="display:none; margin-top: 30px;">
                         <strong>Incorrect!</strong> Please enter your correct Email.
                        </div> 
                        <div class="alert alert-danger fg_wrong_email_error" style="display:none; margin-top: 30px;">
                         <strong>Sorry!</strong> This email id is not registered with us.
                        </div>
                        <div class="alert alert-success fg_sent_email" style="display:none;margin-top: 30px;">
                            <strong>We have sent you a reset link your registered email id. Please go through this link to reset password !</strong> 
                        </div>



                                             </div>

                                        </div>
                                                    <div class="col-md-3">
                                                    </div>
                                        </form>
                                        </div>

                                      </div>



                                            </div>
                                           
                                          </div>
                                          
                                        </div>
                                      </div>


                            <!-- ***************  !FORGOT PASSWORD MODAL ************* -->




                            </ul>
                        </div>
                        <div class="col-lg-4">
                        </div>
                    </div>

                      <a href="/auth/facebook" class="btn btn-primary"><span class="fa fa-facebook"></span> Facebook</a>
                    <a href="/auth/google" class="btn btn-danger"><span class="fa fa-google-plus"></span> Google</a>
                    
                    <div class="row">
                        <div class="col-md-12">
                            <div class="alert alert-success alertlogintrue" style="display:none;margin-top: 30px;">
                                 <strong>Login Successful !</strong> 
                            </div>

                             <div class="alert alert-danger alertloginfalse" style="display:none; margin-top: 30px;">
                                <strong>Incorrect!</strong> Please enter your correct Email and password.
                            </div> 

                             <div class="alert alert-danger alertsignupdanger emailvalidationsfg" style="display:none;margin-top: 30px;">
                                 <strong>Please Enter the correct Email ID</strong> <br>
                                 
                                </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="alert alert-danger alertsignupdanger emailexistdanger" style="display:none;margin-top: 30px; position: absolute;top: -130px;">
                                 <strong>Email Id is already exist</strong> <br>
                                 <p>Above used email id is already registered with us. Please use another email id to register !</p>
                                </div>
                                <div class="alert alert-danger alertsignupdanger emailvalidations" style="display:none;margin-top: 30px;position: absolute;top: -130px;">
                                 <strong>Please Enter the correct Email ID</strong> <br>
                                 
                                </div>

                            <div class="alert alert-danger alertsignupdanger passwordnotmatched" style="display:none;margin-top: 30px;position: absolute;top: -130px;">
                                 <strong>Please check your password</strong> <br>
                                 <p>Confirm password is not same as password</p>
                                </div>


                                 
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <h5 class="colmh5">SIGNUP</h5>
                        </div>
                    </div>
                   
                    <div id="a" class="row dnlsecdvrow">
                        <div class="col-lg-2">
                        </div>
                        <div class="col-lg-2 col-xs-2 col-sm-2 col-md-2">
                            <i class="fa fa-envelope dnlseci" aria-hidden="true"></i>
                            <div class="glyphicon-class dnlsecicndiv">Email<span class="startred">*</span></div>

                        </div>
                        <div class="col-lg-6 col-xs-10 col-sm-10 col-md-8">
                            <input id="username" class="form-control dnlsecdivinpt1 emailvalidate iphonecli" placeholder="" type="email" autocomplete='off'>
                            <div id="error-message_semail" class="error-messages"></div>
                        </div>
                        <div class="col-lg-2">
                        </div>
                    </div>
                    <div id="a" class="row dnlsecdvrow">
                        <div class="col-lg-2">
                        </div>
                        <div class="col-lg-2 col-xs-2 col-sm-2 col-md-2">
                            <i class="fa fa-user dnlseci" aria-hidden="true"></i>
                            <div class="glyphicon-class dnlsecicndiv">First Name<span class="startred">*</span></div>
                        </div>
                        <div class="col-lg-6 col-xs-10 col-sm-10 col-md-8">
                            <input id="firstName" class="form-control dnlsecdivinpt1 iphonecli" placeholder="" type="text" autocomplete='off'>
                             <div id="error-message_sfname" class="error-messages"></div>
                        </div>
                        <div class="col-lg-2">
                        </div>
                    </div>
                    <div id="a" class="row dnlsecdvrow">
                        <div class="col-lg-2">
                        </div>
                        <div class="col-lg-2 col-xs-2 col-sm-2 col-md-2">
                            <i class="fa fa-user dnlseci" aria-hidden="true"></i>
                            <div class="glyphicon-class dnlsecicndiv">Last Name<span class="startred">*</span></div>
                        </div>
                        <div class="col-lg-6 col-xs-10 col-sm-10 col-md-8">
                            <input id="lastName" class="form-control dnlsecdivinpt1 iphonecli" placeholder="" type="text" autocomplete='off'>
                            <div id="error-message_slname" class="error-messages"></div>
                        </div>
                        <div class="col-lg-2">
                        </div>
                    </div>
                    <div id="a" class="row dnlsecdvrow">
                        <div class="col-lg-2">
                        </div>
                        <div class="col-lg-2 col-xs-2 col-sm-2 col-md-2">
                            <i class="fa fa-key dnlseci" aria-hidden="true"></i>
                            <div class="glyphicon-class dnlsecicndiv">Password<span class="startred">*</span></div>
                        </div>
                        <div class="col-lg-6 col-xs-10 col-sm-10 col-md-8">
                            <input id="password" class="form-control dnlsecdivinpt1 iphonecli" placeholder="" type="password" autocomplete='off'>
                            <div id="error-message_spass" class="error-messages"></div>
                        </div>
                        <div class="col-lg-2">
                        </div>
                    </div>
                    <div id="a" class="row dnlsecdvrow">
                        <div class="col-lg-2">
                        </div>
                        <div class="col-lg-2 col-xs-2 col-sm-2 col-md-2">
                            <i class="fa fa-key dnlseci" aria-hidden="true"></i>
                            <div class="glyphicon-class dnlsecicndiv">Retype Password<span class="startred">*</span></div>

                        </div>
                        <div class="col-lg-6 col-xs-10 col-sm-10 col-md-8">
                            <input id="repassword" class="form-control dnlsecdivinpt1 iphonecli" placeholder="" type="password" autocomplete='off'>
                              <div id="error-message_srpass" class="error-messages"></div>
                        </div>
                        <div class="col-lg-2">
                        </div>
                    </div>
                    <div id="a" class="row">
                        <div class="col-lg-4 col-md-4">
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <button type="button" id="signup" class="btn btn-info navbar-btn">SIGNUP</button>
                        </div>
                        <div class="col-lg-4">
                        </div>
                    </div>
                
                    <div class="row">
                        <div class="col-md-12">




                                 <div class="alert alert-success alertsignup" style="display:none;margin-top: 30px;">
                                 <strong>SignUp Successful !</strong> <br>
                                 <p>You will be Redirect to Your Account Page. Please wait... !</p>
                                </div>
                        </div>
                    </div>
                     


                </div>
            </div>

        </div>
    </section>
<% } else {%>
    
   <section id="welcome" class="container content-section text-center welcomeloginmesg">
    
        <div class="row">
            <div class="col-lg-12  col-md-12 col-sm-12 col-xs-12">
                <!-- <h2 style="color: #000;">login successfull</h2>
              <p style="color: #000;"> Welcome <%= user.fName %>        <a href="/logout" >Logout</a></p>  -->
               <% include newaccount.ejs %>
                            
            </div>
        </div>
    </section>
<%}%>
<section id="welcome01" class="container content-section text-center"></section>
    <!-- Contact Section -->
    <% include helpme.html %>

    <!-- Map Section -->
    <div id="map"></div>

    <!-- Footer -->
    <footer>
        <div class="container text-center">
            <p>Copyright &copy; Your Website 2018</p>
        </div>
    </footer>
    <!--  -->


 <div id="idPropertyDetails" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <!-- h4 class="modal-title">CASA DEL OSO</h4> -->
                </div>
                <div class="modal-body">
                    <!--Card Regular-->
                    <div class="card card-cascade">

                        <!--Card image-->

                        <div class="view overlay hm-white-slight">
                            <div id="virtual_tour_text_div"><h2 class="virtual_text_heading blink_me">Click to Navigaze</h2></div>
                            <iframe class="crdimgifrm1"  id="iframePropertyImg" scrolling="no" frameborder="0" allowfullscreen></iframe>
                            <a class="button-property"  href="" target="_blank" id="selectedProperty" class="btn btn-primary"
                                data-property="" data-action="toggle" data-side="left"><span></span></a>

                        </div>
                        <div class="row rcdimgro rcdimgrowdv1">
                            <div class="col-md-4 col-sm-4 col-xs-4 rcdimgrowdv2">
                                <i class="fa fa-home dnlseci" aria-hidden="true"></i>
                                <div class="glyphicon-class crdimgicn11">Area</div>
                                <span  id="apartment" class="glyphicon-class crdimgclsicn92"> </span><span id="apptunit" style="font-weight: bold; margin-left: 2px;"></span>
                                <!-- <div id="apptunit" style="font-weight: bold; margin-left: 2px;"></div> -->
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-2 rcdimgrowdv2">
                                <i class="fa fa-user dnlseci" aria-hidden="true"></i>
                                <div class="glyphicon-class crdimgicn11">Sleeps</div>
                                <div id ="sleep" class="glyphicon-class crdimgclrblk"></div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-2 rcdimgrowdv2">
                                <i class="fa fa-bed dnlseci" aria-hidden="true"></i>
                                <div  class="glyphicon-class crdimgicn11">Bedrooms</div>
                                <div id ="bedroom" class="glyphicon-class crdimgclrblk"></div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-2 rcdimgrowdv2">
                                <i class="fa fa-bath dnlseci" aria-hidden="true"></i>
                                <div class="glyphicon-class crdimgicn11">Bathrooms</div>
                                <div id ="bathroom" class="glyphicon-class crdimgclrblk"></div>
                            </div>
                           <!--  <div class="col-md-2 col-sm-2 col-xs-2 rcdimgrowdv2">
                                <img src="img/prop-half-bath.svg" class="crdimgsvgmrgntop">
                                <div class="glyphicon-class crdimghalfbaths1">Half-Baths</div>
                                <div id="halfbath" class="glyphicon-class crdimgclrblk"></div>
                            </div> -->
                            <div class="col-md-2 col-sm-2 col-xs-2 rcdimgrowdv2">
                                <i class="fa fa-adjust dnlseci" aria-hidden="true"></i>
                                <div class="glyphicon-class dnlsecicndiv">Min Stay</div>
                                <div id ="minstay" class="glyphicon-class crdimgclrblk"></div>
                            </div>
                        </div>
                        <!--img src="/img/prop-detail-temp.png" style="position: relative;  width: 100%;"></iframe-->
                        <!--/.Card image-->

                        <!--Card content-->
                        <div class="card-body text-center rcdimgrowdv1">
                            <!--Title-->

                            <!--h4 class="card-title"><strong>Billy Cullen</strong></h4-->
                            <h6 id="modelPropertyname"><!-- porperty name  --></h6>

                        <div class="htl_pricing single_pricing" >
                            <h6 class="crdimgh6titles from-content"> </h6>
                            <i id="currencyUnit_dummy" class="fa  dnlseci dnlseciunit" aria-hidden="true"></i>
                            <h5 class="crdimgh6titles crdimgh6titles3" id="minPricePerNight_dummy"></h5>
                            <h6 class="crdimgh6titles"> per night</h6> &nbsp; &nbsp; <p id="bestPrice" style="display: block !important">Best Price <b id=sourcesiteval></b> </p>
                            <h6> </h6>
                        </div>
                        <div class="htl_pricing total_pricing">
                            <h6 class="crdimgh6titles"> </h6>
                            <i id="currencyUnit" class="fa  dnlseci dnlseciunit" aria-hidden="true"></i>
                            <h5 class="crdimgh6titles crdimgh6titles3" id="minPricePerNight"></h5>
                            <h6 class="crdimgh6titles"> in total for <span id="days_count"></span> nights</h6>
                            <h6> </h6>
                        </div>
                        
                            <p class="card-text"  id="descriptionModal"></p>

                            <!--Facebook-->
                            <!--a type="button" class="btn-floating btn-small btn-fb">Details/Availability/Reserve</a-->


                        </div>
                        <!--/.Card content-->
                        <ul class="nav  text-center crdimgnavmrgntp1">

                             <li role="presentation" class="crdimglirole1">
                                <i id='wishModelId' data-id='' class='tooltip fa fa-heart-o dnlseciwish wishlistmodel mobilewisllistid' aria-hidden='true' style="cursor: -webkit-grab; position: absolute;font-size: 31px !important; top:-20px;right: 20px;"><span class='tooltiptext'>Add to Wishlist</span></i>
                            </li>

                            <li role="presentation" class="crdimglirole1">
                                <a type="button" href="" id="moreDetails" target="_blank" class="btn btn-info navbar-btn">View Property</a></li>

                             <li role="presentation" class="crdimglirole1">
                               <a  href="javascript:void(0)" class="btn btn-info navbar-btn" id="moreDetailsbooknow1" data-toggle="modal" data-target="#myModalgetquote1" data-dismiss="modal" style="display: none;">Book Now</a>
                                <a  href="" target="_blank" class="btn btn-info navbar-btn" id="moreDetailsbooknow2" style="display: none;">View Deal</a>                               
                                
                            </li>
                            <!--li role="presentation" class="crdimglirole1"><a href="#">Check Availability</a></li>
                        <li role="presentation" class="crdimglirole1"><a href="#">Make Reservation</a></li-->
                        </ul>
                    </div>
                    <!--/.Card Regular-->
                </div>
               <!-- <div class="modal-footer">
                     <ul class="nav  text-center">
                        <li role="presentation" class="crdimglirole1"><a href="" id="bookNow" target="_blank">Book Now</a></li>
                        <li role="presentation" class="crdimglirole1"><a href="" id="amenities" target="_blank">Amenities</a></li>
                        <li role="presentation" class="crdimglirole1"><a href="" id ="nearBy" target="_blank">Nearby</a></li>
                        <li role="presentation" class="crdimglirole1"><a href="" id ="reviews" target="_blank">Reviews</a></li>
                        <li role="presentation" class="crdimglirole1"><a href="" id="contactUs" target="_blank">Contact Owner</a></li>

                     <li role="presentation" class="crdimglirole1"><a href="#">Check Availability</a></li>
                        <li role="presentation" class="crdimglirole1"><a href="#">Make Reservation</a></li>
                    </ul> -->
                    <!--button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-default">Book</button>
                </div> -->
            </div>

        </div>
    </div>





<!-- <div id="cookieConsent">
    <div id="closeCookieConsent">x</div>
    This website uses cookies to ensure you get the best experience on our website.<a href="#" target="_blank">More info</a>. <a class="cookieConsentOK">That's Fine</a>
</div> -->
<div id="cookiesWarning">
</div>
<!--  ===========================================
         SCRIPTS
         ========================================  -->


   
 <script src="js/navigazecookies.js"></script>
  <script src="vendor/jquery/jquery.cookie.js"></script>
    <script src="vendor/jquery/jquery-ui.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="/../js/bootstrap-select.min.js"></script>
   <!--  <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.3/js/bootstrap-select.min.js"></script> -->

    <script src="js/jquery.easing.min.js"></script>
    <script src="/javascripts/sidebar/jquery.sidebar.min.js"></script>
    <script src="/javascripts/moment-with-locales.min.js"></script>
    <script src="/javascripts/bootstrap-datetimepicker.min.js"></script>
    <script src="/javascripts/forge-lib-0.9.5/three.js/three.r86.custom.min.js"></script>
    <script src="/javascripts/forge-lib-0.9.5/hammer.js/hammer.min.js"></script>
   <!--  <script type="text/javascript" src="/javascripts/forge-lib-0.9.5/forge/forge.min.js"></script> -->
    <script type="text/javascript" src="/javascripts/forge-lib-0.9.5/forge/forge.js"></script>
    <script type="text/javascript" src="/javascripts/select2/select2.js"></script>
  <!--   <script type="text/javascript" src="/javascripts/lightslider/lightslider.min.js11"></script> -->
   <script type="text/javascript" src="/javascripts/lightslider/lightslider-fav.js111"></script>
    <script type="text/javascript" src="js/jquery.slimscroll.min.js"></script>
   <script type="text/javascript" src="js/prettify.js"></script>
   <script type="text/javascript" src="js/slimcrollunify.js"></script>
  <script type="text/javascript" src="js/jquery.bxslider-2.js"></script>
   <script src="js/grayscale.min.js"></script> 
   <script type="text/javascript" src="/javascripts/jquery.daterangepicker.js"></script>
   <script type="text/javascript" src="/javascripts/moment.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAoxL0lKzBSuFS2uZU2K1JDnVZWcvLl2XY"></script>

 <div class="modal fade" id="myModalgetquote1" role="dialog">
   
        <% include getquote.html %>
        
  </div> 
<!-- ============================================
            END SCRIPTS 
    ===========================================   -->
<script type="text/javascript">
/*
     window.onbeforeunload = function(event) {
       var keycode = event.which || event.keyCode;
       if(keycode != undefined) {
        console.log("close tab")
       }else{
        console.log("refresh button")
       }
      
  
    
  }*/
  
    $(document).ready(function(){
        $(".date-picker-wrapper.date-range-picker19.no-shortcuts.no-gap.two-months").addClass("arvindme");
    })
</script>

<!-- ==============   RETURN TOP SCRIPT ============  -->
<script type="text/javascript">
    // ===== Scroll to Top ==== 
$(window).scroll(function() {
    if ($(this).scrollTop() >= 50) {        // If page is scrolled more than 50px
        $('#return-to-top').fadeIn(200);    // Fade in the arrow
    } else {
        $('#return-to-top').fadeOut(200);   // Else fade out the arrow
    }
});
$('#return-to-top').click(function() {  
$('#return-to-top-ac').fadeOut(200);     // When arrow is clicked
    $('body,html').animate({
        scrollTop : 0                       // Scroll to top of body
    }, 500);
});
$('.topimgarrw').click(function() {  
//$('#return-to-top-ac').fadeOut(200);     // When arrow is clicked
    $('body,html').animate({
        scrollTop : 0                       // Scroll to top of body
    }, 500);
});
</script>
<!--  ****   !return top script *** -->
 
<!--script src="/dist/js/dropdown.js"></script-->


<script type="text/javascript">
   $(window).load(function() {
 
//$('#loader1').addClass("loaderhide");
$('#loader1').removeClass("loadershow");
//$('#divLoading').removeClass("loadershow");

});
</script>

    <script type="text/javascript">
    $(function(){
        $('.searchaminitiesdiv').slimScroll({
          allowPageScroll: true
   });

        
});
if (window.matchMedia("(max-width: 480px)").matches) {

   $(function(){


        $('#zeher').slimScroll({
          allowPageScroll: true,
          height: '412px',
            color: 'transparent',
   });

        
}); 


    $(function(){


        $('#zeherfav').slimScroll({
          allowPageScroll: true,
          height: '412px',
            color: 'transparent',
   });

        
});
}
else
{
$(function(){


        $('#zeher').slimScroll({
          allowPageScroll: true,
          height: '500px',
            color: 'transparent',
   });

        
});

$(function(){


        $('#zeherfav').slimScroll({
          allowPageScroll: true,
          height: '500px',
            color: 'transparent',
   });

        
});


}

 

    $(function(){
        $('.select2-results__options').slimScroll({
          allowPageScroll: true
   });

        
});

   /* $(function(){
        $('.cd-faq-items').slimScroll({
          allowPageScroll: true
   });

        
});*/
</script>
 <script type="text/javascript">
    $(function(){
 $('.items1fv1').slimScroll1({
          allowPageScroll: true
      });
});
</script>
    <script>
        var sessionValue 
       
        var fName  = "<%=user.fName%>";
      
        if(fName != ''){
            console.log("Session exist :"+fName)
            sessionValue = true;
          
        }else{
            sessionValue = false; 
           
        }
        var panoFilter = null;
         var favArry = [];
          var naArry = [];
         var naHotspotArry = [];
        
          var sortedPrice = [];
         var hotspotArry = [];
         var wishListArr = [];
        var placeId = null;
        var globalViewObj = null;
        var executed = false;
        var val = null;
        var searchBrowse = 10;
        var startScreenViewer;
        let priceSort = 0;
        let reviewSort = 0;
        var placeSelected,otherPlacePano,placeSelected2;
        let toogelSort ,reviewToogelSort;
        var viewerGloal, configGlobal,viewerData,viewer,secondPanoData;
        var hotspotDOM = '<div class="hotspot-zone" style="color:#00FFFF">' +
            '<input type="checkbox"/>' +
            '<p class="media">' +
            '<span class="centered">' +
            '<span class="content">' +
            '</span>' +
            '</span>' +
            '</p>' +
            '<div class="content">' +
            '</div>' +
            '</div>';


          /*  $(".hotspotD").click(function(){
            alert('click on hotspot');
            });*/

        jQuery.fn.extend({
            disable: function (state) {
                return this.each(function () {
                    this.disabled = state;
                });
            }
        });
            
        $(document).ready(function () {
          var users  = '<%-JSON.stringify(user)%>'
          console.log("Users property")
          console.log(JSON.stringify(users));

              $("#bAdultsP").click(function () {
            getCount()
            })

             $("#bAdultsN").click(function () {
                getCount()
            })
    

            $("#bBathroomsN").click(function () {
                 getCount()
            })

             $("#bBathroomsP").click(function () {
                 getCount()
            })

            $("#bBedroomsP").click(function () {
                 getCount()
            })

             $("#bBedroomsN").click(function () {
                 getCount()
            })
            

            $("#bChildrenP").click(function () {
                 getCount()
            })

             $("#bChildrenN").click(function () {
                 getCount()
            })


             function  getSortPrice(){
            var lightSlider = $('#lightSlider');
             console.log("price sorting ")
             console.log(sortedPrice)
             if(toogelSort == -1){
            console.log("Descending :")
             sortedPrice.sort(function(a, b) {
               a = a.substring(a.lastIndexOf("_") + 1, a.length);
              b= b.substring(b.lastIndexOf("_") + 1, b.length);
             return b - a;
           });
           for(var i = 0 ; i < sortedPrice.length ; i++ ){
            console.log("Sorteed Price ID ::"+sortedPrice[i])
            var priceremove =  $('.'+sortedPrice[i]).clone(true);
            console.log(priceremove)
             $('.'+sortedPrice[i]).remove();
            lightSlider.append(priceremove)
           }
             }else{
             console.log("ascending :")
             sortedPrice.sort(function(a, b) {
               a = a.substring(a.lastIndexOf("_") + 1, a.length);
              b= b.substring(b.lastIndexOf("_") + 1, b.length);
             return a - b;
           });
           for(var i = 0 ; i < sortedPrice.length ; i++ ){
            var priceremove =  $('.'+sortedPrice[i]).clone(true);
             $('.'+sortedPrice[i]).remove();
            lightSlider.append(priceremove)
           }
             }
             }
               


              function  getCount(){
              if (!executed) {
                  executed = true;
              setTimeout(function(){
                console.log("Value after 2 sec"+$('#bAdults').html())
                 var amenties =   $('input[name="as"]:checked').map(function () {
                     return this.value;
                 }).get();
                 var searchObj = {
                   'Sleeps' : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                   'Bedrooms' : parseInt($('#bBedrooms').html()),
                   'Bathrooms' : parseInt($('#bBathrooms').html()),
                   'amenities' : (amenties.length ==0) ? null : amenties,
                   'PanoId': panoFilter,
                    'PlaceId' : placeId
                    }
               executed = false;
               console.log("Search obj::"+JSON.stringify(searchObj))
               console.log("Value of selected Place ::"+ $('#myPlace').find('option:selected').attr('data-field'))
               if($('#myPlace').find(':selected').attr('data-field') == 'true'){
             //  searchFilter(searchObj)
              advanceFilter(searchObj)
              }else{
                //searchObj.PanoId = otherPlacePano;
                 searchObj.PanoId = panoFilter;
                searchObj.PlaceId = null;
                // searchFilter(searchObj)
                 advanceFilter(searchObj);
              }

           }, 2000);
            }
           }
            



            /**   @@@@@@@@@@@@@@  START SCREEN SCRIPT STARTS HERE  @@@@@@@@@@@@@@  **/


             $("#email").click(function(){
                console.log('email ::--'+$('#userName').val());
            $.ajax({url: "/emailus",type: "POST", data: JSON.stringify({
                   name: $('#userName').val(),
                    email: $('#useremail').val(),
                   message: $('#message').val(),
                   arrival : $('#datetimeA1').val(),
                   departure : $('#datetimeD1').val()
                }),dataType: "json",contentType: "application/json", success: function(result){
            console.log("AJAX return ::"+result);
    }});
     });
               $('#advanceSearch').click(function(){
                $('.ari1').addClass("loadershowam1");
                 //$('#amenityLoader').toggleClass("loadershowam");
                 $("#brdright").empty();
                $.ajax({url: "/GetAllAmenities",type: "GET", contentType: "application/json", success: function(data){
                   // $('.ari1').removeClass("loadershowam1");
                    //$('#amenityLoader').removeClass("loadershowam");


                    for(i=0;i< data.amenties.length; i++){
                   var amentiesStrore  ;
                    if($.cookie("amentiesStore")) {
                  amentiesStrore =   JSON.parse($.cookie("amentiesStore")) }else{ amentiesStrore =  [] }
                   var result = data.amenties.map(a => a._id);
                   console.log("amenties Store ::"+amentiesStrore[i])
                    console.log("Result ::"+result)
                     var checked = '';
                     if(result.indexOf(amentiesStrore[i]) != -1) {
                     console.log("Checked amenties------------------")
                     checked = "checked";
                    }else{
                         console.log("UN Checked amenties------------------")
                     checked = "";
                     }
                            $("#brdright").append('<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 bordright"><div class="col-lg-12"><div id="a" class="row advancesearchgridview"><div class="col-lg-6 col-md-6 col-xs-6 col-sm-6 clg2"><i class="fa '+data.amenties[i].IconURL+' globecolor" aria-hidden="true"></i><div class="glyphicon icndest" style="width:max-content;word-spacing:-8px;">'+ data.amenties[i].Name+'</div></div> <div class="col-lg-6 col-md-4 col-xs-4 col-sm-4"><div data-toggle="buttons"> <label class="btn activoam"><input '+checked+' type="checkbox" name="as" value='+ data.amenties[i]._id +'><i class="fa fa-square-o"></i><i class="fa fa-check-square-o"></i></label> </div></div> </div></div></div>');}
                    $('.ari1').removeClass("loadershowam1");
                       //$('#amenityLoader').removeClass("loadershowam");   
                        }});


           $("#btnSearch").click(function () {
         

              var amenties =   $('input[name="as"]:checked').map(function () {
                     return this.value;
                 }).get();
                   
                    var searchObj = {
                        'Sleeps' : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                        'Bedrooms' : parseInt($('#bBedrooms').html()),
                        'Bathrooms' : parseInt($('#bBathrooms').html()),
                        'amenities' : (amenties.length ==0) ? null : amenties,
                        'PanoId': panoFilter,
                        'PlaceId' : placeId
                    }
                console.log("Serch object on amenity chnage")
                console.log(searchObj)
               searchFilter(searchObj)
 
             }); 

           $(document).on('change', '[name="as"]', function() {
                   /* var amenties =   $('input[name="as"]:checked').map(function () {
                     return this.value;
                 }).get();
                   
                    var searchObj = {
                        'Sleeps' : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                        'Bedrooms' : parseInt($('#bBedrooms').html()),
                        'Bathrooms' : parseInt($('#bBathrooms').html()),
                        'amenities' : (amenties.length ==0) ? null : amenties,
                        'PanoId': panoFilter,
                        'PlaceId' : placeId
                    }
                console.log("Serch object on amenity chnage")
                console.log(searchObj)
                advanceFilter(searchObj)*/

               
                 var amenties =   $('input[name="as"]:checked').map(function () {
                     return this.value;
                 }).get();
                 var searchObj = {
                   'Sleeps' : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                   'Bedrooms' : parseInt($('#bBedrooms').html()),
                   'Bathrooms' : parseInt($('#bBathrooms').html()),
                   'amenities' : (amenties.length ==0) ? null : amenties,
                   'PanoId': panoFilter,
                    'PlaceId' : placeId
                    }
               executed = false;
               console.log("Search obj::"+JSON.stringify(searchObj))
               console.log("Value of selected Place ::"+ $('#myPlace').find('option:selected').attr('data-field'))
               if($('#myPlace').find(':selected').attr('data-field') == 'true'){
                advanceFilter(searchObj)
              }else{
                //searchObj.PanoId = otherPlacePano;
                 searchObj.PanoId = panoFilter;
                searchObj.PlaceId = null;
                  advanceFilter(searchObj)
              }
                 });  
            });

 function advanceFilter(searchObj){
              
                  var amenties =   $('input[name="as"]:checked').map(function () {
                     return this.value;
                 }).get();

                  $.cookie("amentiesStore",JSON.stringify(amenties)) 
                  $.cookie("searchObjectStore",JSON.stringify(searchObj))
                  $.cookie("bAdults",$('#bAdults').html());
                  $.cookie("bChildren",$('#bChildren').html());
                  console.log("Val value on searching :"+val)
                if(val !== null){
            //    alert(panoFilter)
                  console.log("Second scene")
                                         $.ajax({url: "/panoProp",type: "POST", data: JSON.stringify({
                        id: panoFilter ,
                        amenities : amenties,
                        Sleeps : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                        Bedrooms : parseInt($('#bBedrooms').html()),
                        Bathrooms : parseInt($('#bBathrooms').html())
                    }),dataType: "json",contentType: "application/json", success: function(data){
                        console.log("----------------Advance Filter value--------------");
                       console.log(data.panoProp);
                        var hotspots = []
                        let locations = [] 
                        let panolatlang = []
                        naHotspotArry = [];
                        hotspotArry = [];
                        var levelPano2 = [];
                        naArry = [];
                        lightSlider = $('#lightSlider');
                         viewer.hotspots.clear()
                       for(var i=0;i<data.panoProp.length;i++){
                        if(data.panoProp[i].PropertyId !== null){
                        var hotspot = {
                           "uid" : "",
                           "unit_url" : "",
                          "transform" : "",
                           "geometry" : "",
                           "material" : "",
                           "events" : ""
                        };
                   hotspot.uid = "secondHTP-"+i;
                   hotspot.unit_url = data.panoProp[i].PropertyId.UnitUrl;
                   hotspot.transform = data.panoProp[i].PanoMarkerPosition;
                   hotspot.geometry = {
                        "type": "plane",
                        "options": {
                            "width": 50,
                            "height": 50
                        }
                    };
                   hotspot.material = {};
                   hotspot.material.image = data.panoProp[i].PanoMarkerId.URL;
                   hotspot.material.opacity = 1;
                   hotspot.facingCenter = true;
                   hotspot.autoScale =  true;
                   hotspot.events = {};
                   hotspot.events.onClick = ["action-" + data.panoProp[i]._id];
                   
                   hotspotArry.push(hotspot)
                  var level2Li = 'remove_'+data.panoProp[i].PropertyId._id;
                   
                   var price  =  $('.remove_'+data.panoProp[i].PropertyId._id).find('input[name="minPricePerNight"]').val();
                   if($('#nacheckbox').prop("checked") == true){
                     if(price != 'N/A'){
                        levelPano2.push(level2Li)
                     viewer.hotspots.create(hotspot);
                     naHotspotArry.push(hotspot);
                 }else{
                    var unitHref = data.panoProp[i].PropertyId.UnitUrl;
                    var unitUrl = unitHref.split('/');
                   naArry.push(unitUrl[3]) 
                 }

                   }else{
                  if(price != 'N/A'){
                    levelPano2.push(level2Li)
                     viewer.hotspots.create(hotspot);
                     naHotspotArry.push(hotspot);
                 }else{
                    levelPano2.push(level2Li)
                     viewer.hotspots.create(hotspot);
                    var unitHref = data.panoProp[i].PropertyId.UnitUrl;
                    var unitUrl = unitHref.split('/');
                   naArry.push(unitUrl[3]) 
                 }
                   }
                  
                  } 
                  if(i==data.panoProp.length -1){
                  setTimeout(function () {
                  $('#lightSlider li').each(function (index, value) { 
                  var className  = $(this).attr('class').split(' ')[4];
                  console.log("Property from filter")
                  console.log(levelPano2)
                  if(levelPano2.includes(className)){
                 $('.'+className).show();
                 $('.'+className).css("display","block");
                  }else{
                    $('.'+className).hide();
                  }
                  });
                $('#resultCount').html(levelPano2.length);
                $(".hotspot").toggleClass("show-hide");
                $(".hotspot-zone").css("display","none");
                
                          }, 1000);
                viewer.renderer.objects.clear();
                viewer.renderer.objects.createRenderScenes();
                viewer.renderer.renderPipeline.addRenderScenes(viewer.renderer.objects.renderScenes);
                  }}}
                });
                }else{
                  console.log("first scene")
                   $.getJSON("/services/GetDefaultLocationChange", searchObj, function (data) {
                console.log("On lOcation change")
                  var config   =  data.panoConfig;
                  filterJson   =  data.panoConfig;
                  configGlobal =  data.panoConfig;
                  viewerData   =  data.panoConfig;
                  
                 var vi;
                 localStorage.setItem('myviewerObj',JSON.stringify(data.panoConfig)
                    );
               $(".hotspot-zone").empty();
               createHotSpotDOM(configGlobal);
                        naHotspotArry = [];
                        hotspotArry = [];
                        var levelPano2 = [];
                        naArry = [];
                        lightSlider = $('#lightSlider');
               var configuration = data.panoConfig;
               for(var i=0;i < configuration.actions.length;i++){
                if(configuration.actions[i].type ==3){
                  var actionVal = configuration.actions[i].method.args[0];
                  var level2Li = 'remove_'+actionVal._id;
                   levelPano2.push(level2Li)
                   var price  =  $('.remove_'+actionVal._id).find('input[name="minPricePerNight"]').val();
                }
               }
               setTimeout(function () {
                 $('#lightSlider li').each(function (index, value) { 
                var className  = $(this).attr('class').split(' ')[4];
                  if(levelPano2.includes(className)){
                 $('.'+className).show();
                  }else{
                    $('.'+className).hide();
                  }
                  });
                  $('#resultCount').html(levelPano2.length);
                   },1000);
                  }, "json");
                }

 }


 function searchFilter(searchObj){
    console.log("call search filter")
    console.log("Search Filter on location chage ::"+searchObj)

             $.getJSON("/services/GetDefaultLocationChange", searchObj, function (data) {
                console.log("On lOcation change")
                  var config   =  data.panoConfig;
                  filterJson   =  data.panoConfig;
                  configGlobal =  data.panoConfig;
                  viewerData   =  data.panoConfig;
                  console.log("Val value on searching :"+val)
                    var amenties =   $('input[name="as"]:checked').map(function () {
                     return this.value;
                 }).get();
                  $.cookie("amentiesStore",JSON.stringify(amenties)) 
                  $.cookie("searchObjectStore",JSON.stringify(searchObj))
                  $.cookie("bAdults",$('#bAdults').html());
                  $.cookie("bChildren",$('#bChildren').html());

               console.log(data.panoConfig)
                 var vi;
               if(val !== null){
               // alert("Val is not null")
               
               var filteredObj =viewerData.story.scenes.find(function(item, i){
                    if(item.uid === val){
                    index = i;
                    return i;
                    }
                    });
             console.log("Filter Object :")
             console.log(JSON.stringify(filteredObj))
             resfreshPropertyList(data.panoConfig,"home");
            /* let config = data.panoConfig;
              var levelPano2 = [];
               lightSlider = $('#lightSlider');
              for(var i=0;i < config.actions.length;i++){
                if(config.actions[i].type ==3){
                  var actionVal = config.actions[i].method.args[0];
                  var level2Li  =   $('.remove_'+actionVal._id).clone(true);
                  levelPano2.push(level2Li)
                }
               }
                setTimeout(function () {
                   lightSlider.empty();
                   lightSlider.append(levelPano2);
                   $('#resultCount').html(levelPano2.length);
                   },1000);*/
             console.log("Hotspot arr ")
             console.log(filteredObj.hotspots.length)
         
            viewer.hotspots.clear()
              for(var i=0 ; i<filteredObj.hotspots.length;i++ ){
                viewer.hotspots.create(filteredObj.hotspots[i]);
                console.log("Hotspots create ::"+JSON.stringify(filteredObj.hotspots[i]))
                 }
                viewer.renderer.objects.clear();
                viewer.renderer.objects.createRenderScenes();
                viewer.renderer.renderPipeline.addRenderScenes(viewer.renderer.objects.renderScenes);
              console.log("Viewer Object after fileter")
              console.log(viewer)
            }else{
               // alert("Inside else when val in null")
                 localStorage.setItem('myviewerObj',JSON.stringify(data.panoConfig));
               $(".hotspot-zone").empty();
               createHotSpotDOM(configGlobal);
               resfreshPropertyList(data.panoConfig,"home");
               console.log(data.panoConfig)
/*               var levelPano2 = [];
               lightSlider = $('#lightSlider');
               var configuration = data.panoConfig;
               for(var i=0;i < configuration.actions.length;i++){
                if(configuration.actions[i].type ==3){
                  var actionVal = configuration.actions[i].method.args[0];
                  var level2Li  =   $('.remove_'+actionVal._id).clone(true);
                  levelPano2.push(level2Li)
                }
               }

               setTimeout(function () {
                   lightSlider.empty();
                   lightSlider.append(levelPano2);
                   $('#resultCount').html(levelPano2.length);
                   },1000);*/
           }
           globalViewObj.customerAction.openPropDetails = function (property){
            // alert("3")
   // $('#currencyUnit').addClass(decodeURI(property.CurrencyId.unit));
 
if (window.matchMedia("(max-width: 991px)").matches) {
        //$(".sidebar.right.background.sdbrwdth").addClass("hotspotclicked");
        $(".sidebar.right").trigger("sidebar:open");

        $(".close").click(function(){
            $(".sidebar.right").trigger("sidebar:close");
        })
       
}
 var propUnitURL = [];
var arrivalDate;
var departureDate;
var id = property._id
var SourceSite;
var oneDay = 24*60*60*1000;
var diffDays ;


$(".htl_pricing.total_pricing").css("display","none");
$(".htl_pricing.single_pricing").css("display","none");
 $('#minPricePerNight_dummy').text('');
$("#currencyUnit_dummy").css("display","inline");
 $(".crdimgh6titles").css("display","inline");
 $("#bestPrice").css("display","inline");

if(property.SourceSite == 'HOMEAWAY_US' || property.SourceSite == 'HOMEAWAY_UK'){
                        SourceSite = "HomeAway";
                      //  $('#sourcesiteval').html('HomeAway'); 
                        }else if (property.SourceSite == 'VRBO'){
                             SourceSite = "VRBO";
                           //  $('#sourcesiteval').html('VRBO');
                        }else{
                             SourceSite = property.SourceSite;
                     // $('#sourcesiteval').html(property.SourceSite);
                   }

if ( ($('#date-range200').val() !== "" && $('#date-range201').val() !=="") || ($('#datetimeA').val() !== "" && $('#datetimeD').val() !==""))
 {
   // alert("Date selected")
            if(property.UnitUrl === undefined ||  property.UnitUrl == ''  ){
                // alert("Date selected but dont have unit urls")
                   $('#currencyUnit_dummy').addClass(property.priceId.unit);
                    $(".htl_pricing.single_pricing").css("display","block");
                    console.log("From $ 800 per night");
                    $('.price_'+id).text(property.Price);
                    $('#priceLocal_'+id).val(1);
                    $('#minPricePerNight').html(property.Price);
                    $('#minPricePerNight_dummy').html(property.Price);
                    $('.priceInput_'+id).val(property.Price);
                    $('.methor_'+id).removeClass('priceapi');
                    $('.total_pricing').css("display", "none");
                    $('.from-content').text('From');
                    $(".crdimgh6titles").css("display","inline");
                     $("#currencyUnit_dummy").css("display","inline");
                    $('.single_pricing').attr("data-original-title", "");
                    $('.single_pricing').tooltip(); 
                    $('#bestPrice').hide();
                    $("#moreDetailsbooknow2").hide();
                    $("#moreDetailsbooknow1").show();
                    $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(property.Price)+'&propDes='+btoa(property.Price)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));



                    }else{
                     $('#currencyUnit_dummy').addClass(property.priceId.unit);
                   // alert("Date selected and have unit urls")
                    var res = property.UnitUrl.split("/");

                let area = $(".remove_"+id).find("input[name=area]").val();

                    if( $(".remove_"+id).find("input[name=minPricePerNight2]").val() != 'N/A' ){

                         $(".htl_pricing.total_pricing").css("display","block");
                         $(".htl_pricing.single_pricing").css("display","block");
                        $('#currencyUnit_dummy').addClass(property.priceId.unit);
                        $('#currencyUnit').addClass(property.priceId.unit);
                        $('#minPricePerNight_dummy').html($(".remove_"+id).find("input[name=minPricePerNight2]").val());
                        $('#minPricePerNight').html($(".remove_"+id).find("input[name=minPricePerNight]").val());
                         $('#days_count').html($(".remove_"+id).find("input[name=diffDays]").val());

                        $('#sourcesiteval').html(SourceSite); 
                        $("#currencyUnit_dummy").css("display","inline");
                        $("#currencyUnit").css("display","inline");
                        $(".crdimgh6titles").css("display","inline");
                        $("#bestPrice").css("display","block");

                        diffDays  =$(".remove_"+id).find("input[name=diffDays]").val();

                var newPrice  = "propertyprice_"+$(".remove_"+id).find("input[name=minPricePerNight]").val();
                var avgPrice = $(".remove_"+id).find("input[name=minPricePerNight2]").val();
                $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(newPrice)+'&propDes='+btoa(avgPrice)+'&sourcesite='+btoa(SourceSite)+'&days='+btoa(diffDays));
                  console.log("Price with UNIT URL api  ::-- priceInput_"+id +"--Price--"+avgPrice)
                              $("#moreDetailsbooknow2").show();
                             $("#moreDetailsbooknow1").hide();

                              var sourceSite =   btoa(SourceSite);
                             var newUrl = '/vacationRental?source='+sourceSite+'&unitUrl='+btoa(property.UnitUrl)
                              $("#moreDetailsbooknow2").attr('href',newUrl)

                 }else{

                                 $(".htl_pricing.total_pricing").css("display","none");
                                 $(".htl_pricing.single_pricing").css("display","none");

                                 console.log("MOre detail for ID  N/A:"+id)

                                 var newPrice  = "propertyprice_N/A";
                                $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(newPrice)+'&propDes='+btoa(newPrice)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));
                                $('#currencyUnit_dummy').hide();
                                $('#currencyUnit').hide();
                                $('.crdimgh6titles').hide();
                                $('#bestPrice').hide();
                                $('.htl_pricing.total_pricing').hide();
                                $('#minPricePerNight_dummy').show();
                                $('#minPricePerNight_dummy').text('Not available for selected dates');
                                 $("#moreDetailsbooknow2").show();
                                 $("#moreDetailsbooknow1").hide();
                                 var sourceSite =   btoa(SourceSite);
                               var newUrl = '/vacationRental?source='+sourceSite+'&unitUrl='+btoa(property.UnitUrl)
                              $("#moreDetailsbooknow2").attr('href',newUrl)
                             $(".htl_pricing.single_pricing").css("display","block");


                 }



                   
              }

            }else{
                  //alert("Date not selected")
                if(property.UnitUrl === undefined ||  property.UnitUrl == ''  ){
                  
            $(".htl_pricing.total_pricing").css("display","none");
            $(".htl_pricing.single_pricing").css("display","block");
             //alert("Date not selected and dont have unit urls ")
            console.log("From $ 800 per night");
            $('.price_'+id).text(property.Price);
            $('#priceLocal_'+id).val(1);
            $('#minPricePerNight').html(property.Price);
            $('#currencyUnit_dummy').addClass(property.priceId.unit);
            $('#minPricePerNight_dummy').html(property.Price);
            $('.priceInput_'+id).val(property.Price);
            $('.methor_'+id).removeClass('priceapi');
            $('.total_pricing').css("display", "none");
            $('.from-content').text('From');
            $('.single_pricing').attr("data-original-title", "");
            $('.single_pricing').tooltip(); 
            $('#bestPrice').hide();
            $("#moreDetailsbooknow2").hide();
            $("#moreDetailsbooknow1").show();
            $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(property.Price)+'&propDes='+btoa(property.Price)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));
                 }else{
                // alert("Date not selected and have unit urls ")

                 
                $(".htl_pricing.total_pricing").css("display","none");
                $(".htl_pricing.single_pricing").css("display","block");

                $('.price_'+id).text(property.Price);
                $('#priceLocal_'+id).val(1);
                $('#minPricePerNight').html(property.Price);
                $('#currencyUnit_dummy').addClass(property.priceId.unit);
                $('#minPricePerNight_dummy').html(property.Price);
                $('#sourcesiteval').html(SourceSite); 
                $('.priceInput_'+id).val(property.Price);
                $('.methor_'+id).removeClass('priceapi');
                $('.total_pricing').css("display", "none");
                $('.from-content').text('From');
                $('.single_pricing').attr("data-original-title", "");
                $('.single_pricing').tooltip(); 
                $('#bestPrice').hide();
                $("#moreDetailsbooknow2").show();
                $("#moreDetailsbooknow1").hide();
                $('#bestPrice').css("display", "none");
                $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(property.Price)+'&propDes='+btoa(property.Price)+'&sourcesite='+btoa(SourceSite)+'&days='+btoa(diffDays));

                var sourceSite =   btoa(SourceSite);
               var newUrl = '/vacationRental?source='+sourceSite+'&unitUrl='+btoa(property.UnitUrl)
              $("#moreDetailsbooknow2").attr('href',newUrl)
             
                 }
}

                    $('#sleep').html(property.Sleeps);
                    $('#bedroom').html(property.Bedrooms);
                    $('#bathroom').html(property.Bathrooms);
                    if(property.MinimumStay == null || property.MinimumStay == undefined){
                        $('#minstay').html('-');
                    }else{
                        $('#minstay').html(property.MinimumStay);
                    }

                    if(property.Area == null || property.Area == undefined){
                         $('#apartment').html('-');
                         $('#apptunit').html('');
                     }else{
                      $('#apartment').html(decodeURI(property.Area));
                      $('#apptunit').html(decodeURI(property.AreaUnit));
                      }
                      $('#modelPropertyname').html(property.PropertyName);
                      $('#descriptionModal').html(property.Description);
                      $('#iframePropertyImg').attr('src',property.VRUrl);
                     
                     $('#nearBy').attr('href','/property?id='+property._id+'&option=details#details');
                      $('#reviews').attr('href','/property?id='+property._id+'&option=details#details');
                      $('#contactUs').attr('href','/property?id='+property._id+'&option=details#details');
                      $('#idPropertyDetails').modal('show')
}
                  }, "json");
           }
   

                   $("#login").click(function(){
                   //    alert($('#userName').val());

                /* commented by sachin - for side bar close after login */
 
            //$(".sidebar.left").trigger("sidebar:close");
            //$(".sidebar.right").trigger("sidebar:close");
                
                /* commented by sachin - for side bar close after login */

                                  $('#error-message').text("");
                      $('#error-message_user').text("");
                            $('#error-message_pass').text("");



                                if($('#userName').val()=="" && $('#passwordV').val()=="" ){

                                   // alert();
                        
                     
                        /*$('#error-message').html("hello mee");*/
                         $('#error-message_user').text("");
                            $('#error-message_pass').text("");
                        $('#error-message_user').text("Username Rquired !");
                        $('#error-message_pass').text("Password Rquired !");
                      }
                      else if($('#userName').val()=="" ){
                          $('#error-message_pass').text("");
                           $('#error-message_user').append("Username Rquired !");


                      }else if($('#passwordV').val()=="" ){
                           $('#error-message_user').text("");
                               $('#error-message_pass').append("Password Rquired !");


                      }else{
                   var wishArr =   localStorage.getItem("wishListArr");
                   var wishArrList = JSON.parse(wishArr);
                             $("div#lightbox").fadeIn(); 
                        $.ajax({url: "/login",type: "POST",
                   data: JSON.stringify({
                   username: $('#userName').val(),
                    password: $('#passwordV').val(),
                    wishlist : wishArrList
                  }),dataType: "html",contentType: "application/json",
                  statusCode: {
                   302: function() {
                   console.log("User not exist ")
                   $('#error-message').append("");
                 $(".alertloginfalse").css("display","block"); 
                  $("div#lightbox").fadeOut(); 
                  sessionValue = false;
                    }
                    }, success: function(data){
                           // console.log("Valye of data")
                           // console.log(data)
                      sessionValue = true;
                     
                         console.log("User exist ")
                        //alert( sessionStorage.getItem("propId"));

                        // 

                   var requestFrmProp = sessionStorage.getItem("propId");
                   if(requestFrmProp){
                        console.log("First scene")
                        console.log(requestFrmProp)
                         window.location.href =requestFrmProp 
                      
                       return false; 
                    }

                      $('#account').hide();
                    console.log("Ajax data ")
                    
                     document.getElementById("welcome01").innerHTML = data;
                    $(".welcomename").removeClass("hidden");
                    $(".loginname").addClass("hidden");
                   // favouriteSlider();
                    $('body,html').animate({
                       scrollTop : 0                    
                       }, 1);
                      $("div#lightbox").fadeOut(); 
                       favouriteSlider();

                      /** wishlisdt slider after login here **/
                      $(".wishlist-bak").on("click",function(){
                        alert("wishlist bak")
                
                   $(this).toggleClass("fa-heart");
                  $(this).toggleClass("fa-heart-o");
               /* $('#wishModelId').toggleClass("fa-heart");
                   $('#wishModelId').toggleClass("fa-heart-o");*/
                 if($(this).hasClass( "fa-heart" )){
                    alert('add elements from first');

                var $this = $(this); 
                $.ajax({url: "/userWishList",type: "POST", data: JSON.stringify({
                id: $this.attr("data-id")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                    console.log("------------------------------");
                    console.log(data);
                    if(data.code==200){
                      console.log('add on wish list');
                     $('#favslideCount').text(data.count);
                     favArry = data.favArry;
                    console.log("Fav Arry ::"+favArry)
                }else{
                    console.log('not added');
                    //$(#account).trigger();
                }}
             }); 
                }else{
                    console.log("Remove form wish list")
                    alert('remove form first 2')
                   var RemoveId = $(this).attr("data-id");
                 $.ajax({url: "/removeWishList",type: "POST", data: JSON.stringify({
                id: $(this).attr("data-id")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                    console.log("------------------------------");
                    console.log(data);
                    if(data.code==200){
                        console.log("Remove from wish list")
                     $('#wishlistid-'+RemoveId).addClass('fa-heart-o').removeClass('fa-heart');
                     $('#favslideCount').text(data.count);
                     favArry = [];
                     favouriteSlider();
                     /*console.log("Fav Slider remove ::"+data)
                      favArry = data.favArry;
                    console.log("Fav Arry ::"+favArry)*/
                }else{
                    console.log('not removed');
                }}
             });
                }
            });
                      /** wish lisdt slider end here after login **/
                  
                        /** wishlist popup **/

                            $(".wishlistmodel-bak").on("click",function(){
                     console.log("humalu")
                   event.stopPropagation();
                    console.log("else condition in login");
                   $(this).toggleClass("fa-heart");
                   $(this).toggleClass("fa-heart-o");
                     var id = $(this).attr('data-id')
                   $('#wishlistid-'+id).toggleClass('fa-heart');
                   $('#wishlistid-'+id).toggleClass('fa-heart-o');
                
                 if($(this).hasClass( "fa-heart" )){
                    //alert('add elements from first:::'+$(this).hasClass( "fa-heart" ));
                        console.log("if class has fa-heart")
                var $this = $(this); 
                $.ajax({url: "/userWishList",type: "POST", data: JSON.stringify({
                id: $this.attr("data-id")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                    /*console.log("--------------add wish list----------------");
                    console.log(data);*/
                    if(data.code==200){
                     console.log(data.count);   
                     $('#favslideCount').text(data.count);
                      console.log('add wish list');
                      console.log(data.count);  
                     //  favouriteSlider();
                }else{
                    console.log('not added');
                    //$(#account).trigger();
                }}
             }); 

                }else{
                   //alert('remove form first :::'+$(this).hasClass( "fa-heart" ))
                   console.log("most extreme else")
                 $.ajax({url: "/removeWishList",type: "POST", data: JSON.stringify({
                id: $(this).attr("data-id")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                    console.log("---------------Remove wish list---------------");
                    console.log(data);
                    if(data.code==200){
                      $('#favslideCount').text(data.count);
                      favArry = [];
                       $("#usemeasclick").trigger("click")
                }else{
                    console.log('not removed');
                }}
             });
                }
                 %>});   
                        
               
                    }
                });

                      }

            });

                    $("#logout").click(function(){

                      $.ajax({url: "/logout",type: "GET", data: JSON.stringify({
                       }),dataType: "json",contentType: "application/json", success: function(data){
                     
                      if(data.data ==200){
                        console.log("logout -------------")
                         $.removeCookie("openPropTour");
                         var wishListArr = [];
                         localStorage.setItem("wishListArr",JSON.stringify(wishListArr));  
                         favouriteSlider();
                         window.location.href = '/';
                         sessionStorage.clear();
                        
                      }
                      }

                   })
                  });

                   //***** FORGOT PASSWORD SCRIPT ***//

                    $("#fg_email_submit").click(function(){
                        if($('#fg_email').val()==""){
                           $(".fg_blank_error").css("display","block");    
                        }else{
                            console.log("call ajaz")
                          $.ajax({url: "/forgetPassword",type: "POST", data: JSON.stringify({
                        username: $('#fg_email').val(),
                       }),dataType: "json",contentType: "application/json", success: function(data){
                      console.log("Data value ::"+JSON.stringify(data))
                      if(data.data ==500){
                         $(".fg_wrong_email_error").css("display","block"); 
                         $(".fg_sent_email").css("display","none"); 
                           $(".fg_blank_error").css("display","none");    
                      }
                      else{
                        console.log("Email Sent ")
                         $(".fg_sent_email").css("display","block"); 
                           $(".fg_blank_error").css("display","none"); 
                            $(".fg_wrong_email_error").css("display","none");     
                      }
                    }
                        })
                      }
                    })
              

                    $(".close").click(function(){
                         $(".fg_blank_error").css("display","none"); 
                         $(".fg_wrong_email_error").css("display","none"); 
                         $(".fg_sent_email").css("display","none"); 
                         $(".emailvalidationsfg").css("display","none"); 
                         //$(".fg_blank_error").css("display","none"); 
                    });
                   // **** ! FORGOT PASSWORD SCRIPT **//
                   $("#selectedProperty").click(function(){
                   var $this = $(this); 
                $.ajax({url: "/property",type: "POST", data: JSON.stringify({
                id: $this.attr("data-property")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                   if(data.user==""){
                     //alert(data.message);
                     }
                
                }
             });            
         });
 
         $("#favourites").click(function(){
                 
           favouriteSlider();
 
         });
         $("#usemeasclick").click(function(){
             favouriteSlider();
         })

         $("#onlymeclick").click(function(){
             favouriteSlider();
         })
        
             

          function favouriteSlider(){
          console.log("Favourite slider calls")
           $.ajax({url: "/favourites",type: "GET",  success: function(data){
        console.log("return from favourites-------------------");
        console.log("Prior favArry value :--"+favArry);
        var uniqueArry = [];
      //  console.log(data.favouritesD.favourites[0].VRThumbnail);
     console.log("Session value :"+sessionValue)
    /* function onlyUnique(value, index, self) { 
       return self.indexOf(value) === index;
      }*/
        if(!sessionValue){ 
       var wishList = localStorage.getItem("wishListArr");
       var wishListData = JSON.parse(wishList);
        console.log("Inside favourite list on guest login :")
        console.log(wishListData)
         var favslider = $('#favimg1');
          //$('.sessionName').text(data.favouritesD.fName);
            favslider.empty();
            if(wishListData){
             //  $('#favslideCount').text(wishListData.length);
      //  var wishListData = wishListData.filter( onlyUnique );
        for(var i=0;i<wishListData.length;i++ ){
           if(!uniqueArry.includes(wishListData[i])){
           favArry[i] = wishListData[i];
           uniqueArry.push(wishListData[i])
           console.log("favArry in loop ::"+favArry)
           var level2Li  =   $('.remove_'+wishListData[i]).clone(true);
           $('#wishlistid-'+wishListData[i]).addClass('fa-heart').removeClass('fa-heart-o')
           favslider.append(level2Li);
          } 
           if(i == wishListData.length - 1){
             $('#favslideCount').text(uniqueArry.length);
         } 
         }

     }
       }else{
          var favslider = $('#favimg1');

          $('.sessionName').text(data.favouritesD.fName);
            favslider.empty();
            if(data.favouritesD.favourites){
             //  $('#favslideCount').text(data.favouritesD.favourites.length);
        for(var i=0;i<data.favouritesD.favourites.length;i++ ){
           if(!uniqueArry.includes(data.favouritesD.favourites[i]._id)){
          favArry[i] = data.favouritesD.favourites[i]._id;
          uniqueArry.push(data.favouritesD.favourites[i]._id)
          console.log("favArry in loop ::"+favArry)
           var level2Li  =   $('.remove_'+data.favouritesD.favourites[i]._id).clone(true);
           $('#wishlistid-'+data.favouritesD.favourites[i]._id).addClass('fa-heart').removeClass('fa-heart-o')
           favslider.append(level2Li);
         }
         if(i == data.favouritesD.favourites.length - 1){
             $('#favslideCount').text(uniqueArry.length);
         }
       }
     }
     }  




                 $(".wishlistf").on("click",function(){
              //  alert('remove wish list')
                  $(this).toggleClass("fa-heart");
                  $(this).toggleClass("fa-heart-o");
                  console.log("Data id of remove wishlist::"+ $(this).attr('data-id'))
                  var id = $(this).attr('data-id')
                  $('#wishModelId').toggleClass("fa-heart");
                   $('#wishModelId').toggleClass("fa-heart-o");
                   $('#wishlistid-'+id).toggleClass('fa-heart');
                   $('#wishlistid-'+id).toggleClass('fa-heart-o');
                 // var $this = $(this); 
                $.ajax({url: "/removeWishList",type: "POST", data: JSON.stringify({
                id: $(this).attr("data-id")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                    console.log("------------------------------");
                    console.log(data);
                    if(data.code==200){
                       $('#favslideCount').text(data.count);
                       favArry = [];
                       favouriteSlider();
                }else{
                    console.log('not removed');
                }}
             });
                 
               });
        }
 });  
          }

            var validateEmail = function(elementValue) {
    var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    return emailPattern.test(elementValue);
}
             $("#signup").click(function(){
                $("div#lightbox").fadeIn();
                 var value = $('#username').val();
    var valid = validateEmail(value);
                                             $('#error-message_semail').text("");
                                                $('#error-message_sfname').text("");
                                                  $('#error-message_slname').text("");
                                                    $('#error-message_spass').text("");
                                                      $('#error-message_srpass').text("");
                                                     if($('#username').val()=="" && $('#firstName').val()=="" && $('#lastName').val()=="" && $('#password').val()=="" && $('#repassword').val()=="" ){
                                                  $('#error-message_semail').text("");
                                                $('#error-message_sfname').text("");
                                                  $('#error-message_slname').text("");
                                                    $('#error-message_spass').text("");
                                                      $('#error-message_srpass').text("");
                                                    
                                                     $('#error-message_semail').text("Please enter your Email Id ! ");
                                                $('#error-message_sfname').text(" Please enter your First Name ! ");
                                                  $('#error-message_slname').text(" Please enter your Last Name ! ");
                                                    $('#error-message_spass').text(" Please enter your Password ! ");
                                                      $('#error-message_srpass').text(" Please re-type you password !");
                                                       $("div#lightbox").fadeOut();
                                          
                                      }
                                          else if($('#username').val()=="" ){
                                                 $('#error-message_sfname').text("");
                                                  $('#error-message_slname').text("");
                                                    $('#error-message_spass').text("");
                                                      $('#error-message_srpass').text("");
                                               $('#error-message_semail').append("Please enter your Email Id !");

                                                 $("div#lightbox").fadeOut();
                                          }else if($('#firstName').val()=="" ){
                                              $('#error-message_semail').text("");
                                               $('#error-message_slname').text("");
                                                    $('#error-message_spass').text("");
                                                      $('#error-message_srpass').text("");
                                                   $('#error-message_sfname').append("Please enter your First Name !");

                                                    $("div#lightbox").fadeOut();
                                          }else if($('#lastName').val()=="" ){
                                             $('#error-message_semail').text("");
                                                $('#error-message_sfname').text("");
                                                    $('#error-message_spass').text("");
                                                      $('#error-message_srpass').text("");
                                                   $('#error-message_slname').append("Please enter your Last Name !");

                                                    $("div#lightbox").fadeOut();
                                          }else if($('#password').val()=="" ){
                                              $('#error-message_semail').text("");
                                                $('#error-message_sfname').text("");
                                                  $('#error-message_slname').text("");
                                                      $('#error-message_srpass').text("");
                                                   $('#error-message_spass').append("Please enter your Password !");
                                                    $("div#lightbox").fadeOut();

                                          }else if($('#repassword').val()=="" ){
                                              $('#error-message_semail').text("");
                                                $('#error-message_sfname').text("");
                                                  $('#error-message_slname').text("");
                                                    $('#error-message_spass').text("");
                                                    $('#error-message_srpass').append("Please re-type you password !");

                                                     $("div#lightbox").fadeOut();
                                          }else if($('#password').val() !== $('#repassword').val() ){
                                            $(".passwordnotmatched").css("display","block");
                                             $(".emailexistdanger").css("display","none");
              }
              else if (!valid){
                 $(".emailvalidations").css("display","block"); 
                  //$(".emailvalidationsfg").css("display","none"); 
                  //$(".alertsignupdanger").css("display","none"); 
                  $(".passwordnotmatched").css("display","none");
                   $(".emailexistdanger").css("display","none"); 
                    $("div#lightbox").fadeOut();    
        return false;
              }
              else{
                 var requestFrmProp = sessionStorage.getItem("propId");
                   if(requestFrmProp){
                        console.log("First scene")
                        console.log(requestFrmProp)
                         window.location.href =requestFrmProp 
                       $("div#lightbox").fadeOut();
                       return false; 
                        $("div#lightbox").fadeOut();
                    }

                    var wishArr =   localStorage.getItem("wishListArr");
                   var wishArrList = JSON.parse(wishArr);
                   console.log("wishlist array oin register :"+wishArrList)
                
                  $("div#lightbox").fadeOut();
                 $(".emailvalidations").css("display","none"); 
                    $(".passwordnotmatched").css("display","none");
                 $.ajax({url: "/register",type: "POST", data: JSON.stringify({
                username: $('#username').val(),
                firstName: $('#firstName').val(),
                lastName: $('#lastName').val(),
                password: $('#password').val(),
                repassword: $('#repassword').val(),
                wishlist : wishArrList
               }),dataType: "json",contentType: "application/json", success: function(data){
                   if(data.user==""){
                  //   alert(data.message);
                   $("div#lightbox").fadeIn(); 
                   $(".emailexistdanger").css("display","block");
                    $(".emailvalidationsfg").css("display","none");
                    $("div#lightbox").fadeOut(); 
                     } else{
                        $("div#lightbox").fadeIn(); 
                            $(".alertsignup").css("display","block");
                            
                    
                         location.reload();
                          $('body,html').animate({
                       scrollTop : 0                    
                       }, 1);

                     }
                
                }
             });
             } 


         });

$('.emailvalidate').keyup(function() {

    var value = $(this).val();
    var valid = validateEmail(value);

    if (!valid) {
        $(this).css('color', 'red');
    } else {
        $(this).css('color', '#000');
    }

});

            $(".img-minus").on("click", function () {
                var $this = $(this);
                var action = $this.attr("data-action");
                if (action == "bedrooms") {
                    var val = parseInt($("#bBedrooms").text());
                    if (val > 0) {
                        $("#bBedrooms").text(val - 1);
                    }
                } else if (action == "bathrooms") {
                    var val = parseInt($("#bBathrooms").text());
                    if (val > 0) {
                        $("#bBathrooms").text(val - 1);
                    }
                } else if (action == "adults") {
                    var val = parseInt($("#bAdults").text());
                    if (val > 0) {
                        $("#bAdults").text(val - 1);
                    }
                } else if (action == "children") {
                    var val = parseInt($("#bChildren").text());
                    if (val > 0) {
                        $("#bChildren").text(val - 1);
                    }
                }
            });

            $(".img-plus").on("click", function () {
                var $this = $(this);
                var action = $this.attr("data-action");
                if (action == "bedrooms") {
                    var val = parseInt($("#bBedrooms").text());
                    $("#bBedrooms").text(val + 1);
                } else if (action == "bathrooms") {
                    var val = parseInt($("#bBathrooms").text());
                    $("#bBathrooms").text(val + 1);
                } else if (action == "adults") {
                    var val = parseInt($("#bAdults").text());
                    $("#bAdults").text(val + 1);
                } else if (action == "children") {
                    var val = parseInt($("#bChildren").text());
                    $("#bChildren").text(val + 1);
                }
            });

            $(".img-checkbox").on("click", function () {
                var $this = $(this);
                $this.toggleClass("fa-check-square-o");
                $this.toggleClass("fa-square-o");
            });
       
          $('#radio101').change(function() {
              if($(this). prop("checked") == true){
                    //alert("Checkbox is checked." );
                    $(".for-change").removeClass("icon-disable");
                    }
                    else if($(this). prop("checked") == false){
                    //alert("Checkbox is unchecked." );
                    $(".for-change").addClass("icon-disable");
                    }
            
                 var $this = $(this);
               
                     if($("#btnPrice").hasClass('fa-sort-amount-desc')){
                        console.log("desc select price")
                         priceSort = 1
                         toogelSort = -1;
                       //   getCount();
                       getSortPrice();

                       }else if($("#btnPrice").hasClass('fa-sort-amount-asc')){
                         console.log(" asc select price")
                         console.log("change price value");
                         priceSort = 1
                         toogelSort = 1;
                       //   getCount();
                       getSortPrice();
                       }
                   $("#btnReview").off("click");
                    $("#btnPrice").on("click", function () {
                        $("#btnPrice").toggleClass("fa-sort-amount-desc");
                        $("#btnPrice").toggleClass("fa-sort-amount-asc");


                       if($("#btnPrice").hasClass('fa-sort-amount-desc')){
                        console.log("amount desc in price")
                        priceSort = 1
                         toogelSort = -1;
                      //    getCount();
                      getSortPrice();

                       }else if($("#btnPrice").hasClass('fa-sort-amount-asc')){
                         console.log("amount asc in price")
                          priceSort = 1
                         toogelSort = 1;
                         // getCount();
                         getSortPrice();
                       }

                    });
                //}
                
            });







           // All sides
            var sides = ["left", "right"];

            // Initialize sidebars
            for (var i = 0; i < sides.length; ++i) {
                var cSide = sides[i];
                $(".sidebar." + cSide).sidebar({ side: cSide });
            }
            if (window.matchMedia("(max-width: 991px)").matches) {

                            setTimeout(function(){
                                    $(".arrow_box123").fadeOut();
                                 $(".arrow_box1234").fadeOut();
                                }, 7000);

               $( ".iphonecli" ).focus(function() {
                           // alert("virus");
                     $(".sidebar.right").trigger("sidebar:open");
                   $(".sidebar.left").trigger("sidebar:close");
                    });


            $(".sidebar.left").trigger("sidebar:close");
            $(".sidebar.right").trigger("sidebar:close");
            $(".bSideBar11").addClass("fa-chevron-left");
            //$("#bSideBar > i").addClass("fa-chevron-left");
            $(".aSideBar11").addClass("fa-chevron-right");
            //$("#aSideBar > i").addClass("fa-chevron-right");
                $("#aSideBar").on("click", function () {
                        $(".arrow_box123").fadeOut();
                                 $(".arrow_box1234").fadeOut();
                    var $this = $(this);
                var action = $this.attr("data-action");
                var side = $this.attr("data-side");
                $(".sidebar." + side).trigger("sidebar:" + action);


                     $(".sidebar.right").trigger("sidebar:close");
                     
                     console.log("++fa-chevron-right");
                     $(".aSideBar11").toggleClass("fa-chevron-right");
                     $(".aSideBar11").toggleClass("fa-chevron-left");
                     
                     console.log("++fa-chevron-left")

                     if ($(".sidebar.right").trigger("sidebar:close")) {

                        $(".bSideBar11").addClass("fa-chevron-left");
                        $(".bSideBar11").removeClass("fa-chevron-right");
                     }
                     else
                     {
                            
                        $(".bSideBar11").addClass("fa-chevron-right");
                        $(".bSideBar11").removeClass("fa-chevron-left");
                     }
                 return false;
            });

            $("#bSideBar").on("click", function () {
                            $(".arrow_box123").fadeOut();
                                 $(".arrow_box1234").fadeOut();

                 var $this = $(this);
                var action = $this.attr("data-action");
                var side = $this.attr("data-side");

                $(".sidebar." + side).trigger("sidebar:" + action);

                 $(".sidebar.left").trigger("sidebar:close");
                 //$(".sidebar.right").trigger("sidebar:open");
                 $(".bSideBar11").toggleClass("fa-chevron-left");
                     $(".bSideBar11").toggleClass("fa-chevron-right");

                     if ($(".sidebar.left").trigger("sidebar:close")) {

                        $(".aSideBar11").addClass("fa-chevron-right");
                        $(".aSideBar11").removeClass("fa-chevron-left");
                     }
                     else
                     {
                            $(".aSideBar11").addClass("fa-chevron-left");
                        $(".aSideBar11").removeClass("fa-chevron-right");
                     }
                 return false;
            });
            
            }else
            {
            $(".sidebar.left").trigger("sidebar:open");
            $(".sidebar.right").trigger("sidebar:open");

            $(".bSideBar11").addClass("fa-chevron-right");
            $(".aSideBar11").addClass("fa-chevron-left");

            $("#aSideBar").on("click", function () {
                     $(".arrow_box123").fadeOut();
                                 $(".arrow_box1234").fadeOut();
                                 $(".fa").removeClass("bounce");
                                 $(".fa").removeClass("bounceX");
                                 $(".fa").removeClass("bounceX1");
                var $this = $(this);
                var action = $this.attr("data-action");
                var side = $this.attr("data-side");
                $(".sidebar." + side).trigger("sidebar:" + action);
                
                $(".aSideBar11").toggleClass("fa-chevron-left");
$(".aSideBar11").toggleClass("fa-chevron-right");
                return false;
            });

            $("#bSideBar").on("click", function () {
                // $(".sidebar.left").trigger("sidebar:close");
                 $(".arrow_box123").fadeOut();
                                 $(".arrow_box1234").fadeOut();
                                 $(".fa").removeClass("bounce");
                                 $(".fa").removeClass("bounceX");
                                 $(".fa").removeClass("bounceX1");
                var $this = $(this);
                var action = $this.attr("data-action");
                var side = $this.attr("data-side");

                $(".sidebar." + side).trigger("sidebar:" + action);
               
                $(".bSideBar11").toggleClass("fa-chevron-right");
 $(".bSideBar11").toggleClass("fa-chevron-left");
                return false;
            });

        }

        
            $("#divBrowseRow").hide();

            $("#selDestination").select2({


                minimumInputLength: 2,
                minimumResultsForSearch: 10,
                ajax: {
                    url: "/services/GetPlacesByName",
                    dataType: "json",
                    type: "GET",
                    data: function (params) {

                        var queryParameters = {
                            term: params.term
                        }
                        return queryParameters;
                    },
                    processResults: function (data) {
                        return {
                            results: $.map(data, function (item) {
                                return {
                                    text: item.Name,
                                    id: item._id,
                                    MapCenter: item.MapCenter,
                                    MapZoomLevel: item.MapZoomLevel,
                                    Type: item.Type

                                }
                            })
                        };
                    }
                }
            });

        
            $("#btnSearchOpen").click(function () {
                if (searchBrowse == 10) {
                    $("#divBrowseRow").hide();
                    $("#divSearchRow").hide();
                    $("#divSearch").slideToggle();
                    searchBrowse = 00;
                } else if (searchBrowse == 01) {
                    $("#divBrowseRow").hide();
                    $("#divSearchRow").show();
                    searchBrowse = 10;
                    if ($("#btnBrowseOpen").html() == "-") {
                        $("#btnBrowseOpen").html("+");
                    }
                    else {
                        $("#btnBrowseOpen").html("-");
                    }
                } else if (searchBrowse == 00) {
                    $("#divBrowseRow").hide();
                    $("#divSearchRow").show();
                    $("#divSearch").slideToggle();
                    searchBrowse = 10;
                }

                if ($(this).html() == "-") {
                    $(this).html("+");
                }
                else {
                    $(this).html("-");
                }
            });

            $("#btnBrowseOpen").click(function () {
                if (searchBrowse == 10) {
                    $("#divBrowseRow").show();
                    $("#divSearchRow").hide();
                    searchBrowse = 01;
                    if ($("#btnSearchOpen").html() == "-") {
                        $("#btnSearchOpen").html("+");
                    }
                    else {
                        $("#btnSearchOpen").html("-");
                    }
                } else if (searchBrowse == 01) {
                    $("#divBrowseRow").hide();
                    $("#divSearchRow").hide();
                    $("#divSearch").slideToggle();
                    searchBrowse = 00;
                } else if (searchBrowse == 00) {
                    $("#divBrowseRow").show();
                    $("#divSearchRow").hide();
                    $("#divSearch").slideToggle();
                    searchBrowse = 01;
                }

                if ($(this).html() == "-") {
                    $(this).html("+");
                }
                else {
                    $(this).html("-");
                }

            });

          

            $("#datetimeA").on("click",function(){
    //alert("chekedd");
    $("#datetimeA").datepicker("option","maxDate", "+1080D");
     $('#datetimeA').datepicker("show");
          preventDefault(selected);

})
          
$('#datetimeA').datepicker({
                
                    firstDay: 1,
                    dateFormat: 'yy-mm-dd',
                    minDate: 1,
                    showTimezone: true,
        timeFormat: 'hh:mm z',
                    maxDate: "+360D",
                     onSelect: function(selected) {
                        // $('#datetimeA').val('');
                        var nextDay = new Date(selected);
                         //alert(nextDay);
                    var new_DAY =  nextDay.toString()
                        var pos = new_DAY.indexOf("-");
                        var add_DATE = 1;
                            //alert("[pst++ " + pos)
                            if (pos >= 1)
                            {
                                add_DATE =2;
                            }
                   // alert(new_DAY)
                nextDay.setDate(nextDay.getDate() + add_DATE);
          $("#datetimeD").datepicker("option","minDate", nextDay)
          // alert(nextDay);
           //alert(selected);
          $('#datetimeD').val('');
           $('#date-range200').val('');
                    $('#date-range201').val('');
                  resfreshPropertyList(viewerData,"home");
          $('#datetimeD').datepicker("show");
          preventDefault();

        }        
            })/*.on("change", function() {

                 $('#datetimeD').val('');
                  resfreshPropertyList(viewerData,"home");
    $('#datetimeD').datepicker("show");
    preventDefault(e);

  });*/

   $('#datetimeD').datepicker({
             
                firstDay: 1,
                dateFormat: 'yy-mm-dd',/*'dd/mm/yy'*/
                minDate: 1,
                showTimezone: true,
        timeFormat: 'hh:mm z',
                maxDate: "+1080D",
                showOn: 'focus',
                showButtonPanel: true,
                closeText: 'Clear',
                onClose: function () {
                var event = arguments.callee.caller.caller.arguments[0];
                // If "Clear" gets clicked, then really clear it
                if ($(event.delegateTarget).hasClass('ui-datepicker-close')) {
                    $(this).val('');
                    $('#datetimeA').val('');
                    $('#datetimeD').val('');
                    $('#date-range200').val('');
                    $('#date-range201').val('');
                     resfreshPropertyList(viewerData,"home");
                }
            }, onSelect: function(selected) {
 

        $("#datetimeA").datepicker("option","maxDate", selected)
       console.log("beforetalk")
       console.log("Pano ID value :"+panoFilter);
       console.log("Second Pano value :")
       console.log(secondPanoData);
       if(panoFilter != null){
          resfreshPropertyList(secondPanoData,"pano");
       }else{
       resfreshPropertyList(viewerData,"home");
          }
        console.log("AFTERtalk")
     },
            });

            $(document).on('click', '.number-spinner button', function () {
                var btn = $(this),
                    oldValue = btn.closest('.number-spinner').find('input').val().trim(),
                    newVal = 0;
                if (oldValue == 'NaN' || oldValue == '') {
                    oldValue = 0;
                }

                if (btn.attr('data-dir') == 'up') {
                    newVal = parseInt(oldValue) + 1;
                } else {
                    if (oldValue > 1) {
                        newVal = parseInt(oldValue) - 1;
                    } else {
                        newVal = 1;
                    }
                }
                btn.closest('.number-spinner').find('input').val(newVal);
            });
   
      $.getJSON("/place" , function (data) {
      console.log("all pano");
      console.log(data);
      listPlace(data);
      }, "json");
      
      function listPlace(data){
         if(window.location.href == window.location.protocol+"//"+window.location.host+"/"){
                  $.removeCookie("parentPlaceID");
               }else if(window.location.href == window.location.protocol+"//"+window.location.host+"/"+"#&uid=scene-5989967029bc7713698fd901"){
                 $.removeCookie("parentPlaceID");
               }
    var index  = 0;
    var firstStr= '';
    $.each( data, function( key, value ) {
        console.log("Place ID inb list place :"+$.cookie('parentPlaceID'))
      var str = '';
      if($.cookie('parentPlaceID') == '' || $.cookie('parentPlaceID') == undefined ){
        console.log("Inside default tru")
      if(value.Default != true){
        index = 1
       firstStr += '<option data-field="'+value.Default+'"  data-id="'+value._id+'"  value="'+value._id+'">'+value.Name+'</option>';
      }else{
       str += '<option data-field="'+value.Default+'" data-id="'+value._id+'"  value="'+value._id+'" selected >'+value.Name+'</option>';
      }}
      else{
         console.log("Inside default false cookie have value")
        if($.cookie('parentPlaceID') ==value._id ){
            str += '<option data-field="'+value.Default+'" data-id="'+value._id+'"  value="'+value._id+'" selected>'+value.Name+'</option>'; 
        }else{
           str += '<option data-field="'+value.Default+'"  data-id="'+value._id+'"  value="'+value._id+'">'+value.Name+'</option>';  
        }
      }
        $('.parentPlace').append(str);
        $('.parentPlace2').append(str);

        });
    if(index == 1){
         $('.parentPlace').append(firstStr);
        $('.parentPlace2').append(firstStr);
      }
      }
 


         $('.parentPlace2').change(function(){
           
            
            console.log("Selected value")
           console.log($(this).find(':selected').data('id'));
           console.log($(this).find(':selected').attr('data-field'))
           console.log("Place name ::"+$(this).find(':selected').text())
           $('#mydiv').hide();
            $('#mappano').hide();
            $(".activoam").css("display","none");
            $('#bAdults').html(0);
            $('#bChildren').html(0);
            $('#bBedrooms').html(0);
            $('#bBathrooms').html(0);
             $.removeCookie("amentiesStore") 
             $.removeCookie("searchObjectStore")
             $.removeCookie("bAdults");
             $.removeCookie("bChildren");
           placeId = $(this).find(':selected').data('id');
           $.cookie("parentPlace",$(this).find(':selected').text());
           $.cookie("parentPlaceID",placeId);
           placeSelected = $(this).find(':selected').attr('data-field');
            if(placeSelected == 'true') {
                console.log("Bay of bendaras has selected")
                 $("div#lightbox").fadeIn();
            $('#mappano').hide();
            $('#simplebutton-one').hide();
            $('#nacheckbox').removeAttr("checked");
            $('#radio101').removeAttr("checked");
            $("#btnPrice").off("click");
           $(".for-change").addClass("icon-disable");
            $('#mydiv').hide();
           placeId = null;
            $.getJSON("/services/GetDefaultLocation", { "PlaceId":placeId }, function (data) {
                console.log("Place CHange");
                if(viewer !=null){
                    console.log("Viewer obejct has deleted")
                    $("#divPano").empty();
                    viewer.destroy()
                   window.location.href = window.location.protocol+"//"+window.location.host+"/#&uid="+viewer._mainConfig.story.default;
                }
                 viewer = new FORGE.Viewer("divPano", data.panoConfig);
                 console.log("after set viewer div")
                var config = data.panoConfig;
                localStorage.setItem('myviewerObj',JSON.stringify(data.panoConfig));
                $('#select2-selDestination-container').text(data.panoConfig.story.name);
                configGlobal = data.panoConfig;
                viewerData = data.panoConfig;
                console.log("hotspot crearted---------------on place change")
                createHotSpotDOM(configGlobal);
                console.log("hotspot dom created")
                console.log("Created viewer object")
                console.log(viewer);
                //$(".hotspot-dom").removeClass("show-hide");
                 $(".hotspot").removeClass("show-hide");
                 $(".hotspot").addClass("hotspot");
                globalViewObj = viewer;
                viewerGloal = viewer;
             if (viewer.customerAction == null) {
                    var customAction = { one: 1 };
                    viewer.customerAction = customAction;
                }
                globalViewObj.customerAction.openPropTour = function (property) {
                    prop = property.scene;
                    console.log("Prop scene:"+prop)
                    console.log("Call Open Prop from Location from parent place");
                    var amenties =   $('input[name="as"]:checked').map(function () {
                     return this.value;
                 }).get();
                    console.log("Selected Amenties");
                    console.log(amenties);
                    var index = -1;
                     val = property.scene;
                    var filteredObj =viewerData.story.scenes.find(function(item, i){
                    if(item.uid === val){
                    index = i;
                    return i;
                    }
                    });
                    if(property.marker_type == 0){
                         var instanceConfig = {
                "uid": "simplebutton-one",
                "engine": "org.forgejs.simplebutton",
                "enabled": true,
                "options":
                {
                    "bottom": 10,
                    "left": 10,
                    "height": 50,
                    "value": "Back To Main Screen",
                    "width":200
                }
               };
               

                          $.cookie("openPropTour",property);
                          $.cookie("openPropTour1",property.scene);
                           $.cookie("secondScene",property.scene);
                        // globalViewObj.camera.lookAt(property.theta, property.phi, 0, 40, 1000);
                       panoFilter = property.scene.split("-")[1];
                       console.log("call openPropTour"+property.scene.split("-")[1]);
                       $.ajax({url: "/panoProp",type: "POST", data: JSON.stringify({
                        id: property.scene.split("-")[1],
                        amenities : amenties,
                        Sleeps : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                        Bedrooms : parseInt($('#bBedrooms').html()),
                        Bathrooms : parseInt($('#bBathrooms').html())
                    }),dataType: "json",contentType: "application/json", success: function(data){
                        console.log("----------------Pno Prop--------------");
                       console.log(data.panoProp);
                        let panoCenterLatLang = [] 
                        var hotspots = []
                        var levelPano2 = [];
                        lightSlider = $('#lightSlider');
                       viewer._mainConfig.story.scenes[index].hotspots.splice(1);
                        console.log("On click value ::")
                        instanceConfig.events = viewer._mainConfig.story.scenes[index].hotspots[0].events ;
                        console.log(instanceConfig)
                        viewer._mainConfig.plugins.instances.push(instanceConfig)
                         viewer._mainConfig.story.scenes[index].hotspots[0].events = null;
                       for(var i=0;i<data.panoProp.length;i++){
                        if(data.panoProp[i].PropertyId !== null){
                        var hotspot = {
                            "uid" : "",
                          "transform" : "",
                           "geometry" : "",
                           "material" : "",
                           "events" : ""
                        };
                   hotspot.uid = "hotspot-"+i;
                    hotspot.facingCenter = true;
                    hotspot.autoScale =  true;
                   hotspot.transform = data.panoProp[i].PanoMarkerPosition;
                   hotspot.geometry = {
                        "type": "plane",
                        "options": {
                            "width": 50,
                            "height": 50
                        }
                    };
                   hotspot.material = {};
                   hotspot.material.image = data.panoProp[i].PanoMarkerId.URL;
                   hotspot.material.opacity = 1;
                   hotspot.events = {};
                   hotspot.events.onClick = ["action-" + data.panoProp[i]._id];
                   console.log("hotspot value")
                   console.log(hotspot);
                   panoCenterLatLang = data.panoProp[i].PanoId.MapPosition.coordinates;
                   viewer._mainConfig.story.scenes[index].hotspots.push(hotspot);
                   var level2Li  =   $('.remove_'+data.panoProp[i].PropertyId._id).clone(true);
                   levelPano2.push(level2Li)
                  } 
                  if(i==data.panoProp.length -1){
                    console.log("set time out call")
                     setTimeout(function () {
                   lightSlider.empty();
                   console.log("Arry of LI ---------------")
                   console.log(levelPano2)
                   $('#resultCount').html(levelPano2.length);
                   lightSlider.append(levelPano2);
                    $(".hotspot").toggleClass("show-hide");
                      $(".hotspot-zone").css("display","none");
                    viewer.story.loadScene(property.scene);
                    if( $('#mappano').hide()){
                    $('#mappano').show();
                    $('#mydiv').show();
                    $('#simplebutton-one').show();

                    }
               var googleMapConfig = viewer._mainConfig.story.scenes[0];
               googleMapConfig.MapCenter = {};
               googleMapConfig.MapCenter = viewer._mainConfig.story.MapCenter;
               locationMapper(googleMapConfig,panoCenterLatLang,property.scene.split("-")[1]);
               secondPanoData = data.panoProp;
              // // resfreshPropertyList(data.panoProp,"pano")
                      }, 1000);
                  }
              } 
                    }
                });
                   }else{
                    $.removeCookie("openPropTour");
                     $.removeCookie("secondScene");
                    
                    val = null;
                    panoFilter = null;
                     $('#mappano').hide();
                     $('#simplebutton-one').hide();
                     $('#nacheckbox').removeAttr("checked");
                     $('#radio101').removeAttr("checked");
                     $("#btnPrice").off("click");
                   $(".for-change").addClass("icon-disable");
                     $('#mydiv').hide();
                  //  viewer.camera.lookAt(property.theta, property.phi, 0, 40, 1000);
                    var searchObj = {
                       'Sleeps' : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                        'Bedrooms' : parseInt($('#bBedrooms').html()),
                        'Bathrooms' : parseInt($('#bBathrooms').html()),
                        'amenities' : (amenties.length ==0) ? null : amenties,
                        'PanoId': panoFilter,
                        'PlaceId' : placeId
                    }
                  console.log("Back button Search Object on location")
                  console.log(searchObj)
                 $.getJSON("/services/GetDefaultLocationChange", searchObj, function (data) {
                 
                    configGlobal =  data.panoConfig;
                 console.log("Get data on back button on location")
                 console.log(JSON.stringify(data.panoConfig))
               
               setTimeout(function () {
                 $(".hotspot-zone").empty();
                 $(".hotspot").removeClass("show-hide");
                 $(".hotspot").addClass("hotspot");
                 createHotSpotDOM(configGlobal);
               resfreshPropertyList(configGlobal,"home");
                viewer.story.loadScene(property.scene); 
                 }, 1000);
                   },"json");
                 }
             };
        
   globalViewObj.customerAction.openPropDetails = function (property) {
  // alert("1")
   // $('#currencyUnit').addClass(decodeURI(property.CurrencyId.unit));
 
if (window.matchMedia("(max-width: 991px)").matches) {
        //$(".sidebar.right.background.sdbrwdth").addClass("hotspotclicked");
        $(".sidebar.right").trigger("sidebar:open");

        $(".close").click(function(){
            $(".sidebar.right").trigger("sidebar:close");
        })
       
}
   };

viewer.customerAction.onSceneLoadComplete = function (property) {
    console.log("on scene load onSceneLoadComplete")
};
viewer.customerAction.onSceneLoadStart = function (property) {
    console.lof("on scene load ");
};
console.log("Load property in end")
resfreshPropertyList(data.panoConfig,"home");
console.log("Default scene:"+viewer._mainConfig.story.default)
 
  $("div#lightbox").fadeOut();       
               
}, "json");
}else{
   /* if(startScreenViewer != null){
                startScreenViewer.destroy();
       }*/
 //$(".startscreen").css("display","none"); 
//alert("Alerta2");

$(".activoam").css("display","block");


console.log("other place selected")
$.removeCookie("openPropTour");
$.removeCookie("secondScene");

console.log("hide simple button one")
 $('#simplebutton-one').hide();
 $('#nacheckbox').removeAttr("checked");
 $('#radio101').removeAttr("checked");
 $("#btnPrice").off("click");
 $(".for-change").addClass("icon-disable");
 //$(".searchsubmit").trigger("click");
var sleep = 0;
  placeProp(sleep,placeId)  

        }
  });
         
         function placeProp(sleep,placeId){
            console.log("Method call")
             $.ajax({url: "/placeProp",type: "POST", data: JSON.stringify({
                        id:placeId ,
                        Sleeps : sleep
                    }),dataType: "json",contentType: "application/json", success: function(data){
               // renderPlaceScreen(data)
                        console.log("----------------Pno Prop- of map-------------");
                         console.log(data.panoProp);
                     var index = -1;
                     val = 'scene-'+data.panoID;
                      viewer.story.loadScene(val)
                     otherPlacePano = data.panoID;
                    panoFilter = data.panoID;
                      $.cookie("openPropTour1",val);
                        $.cookie("openPropTour",val);
                     console.log("Scene value from render scene:"+val)
                    var filteredObj =viewerData.story.scenes.find(function(item, i){
                    if(item.uid === val){
                    index = i;
                    return i;
                    }
                    });
                      
                        let hotspots = []
                        let locations = [] ;
                        let panolatlang = [];
                        console.log("Viewer object of Map location")
                       console.log(viewer)
                      viewer._mainConfig.story.scenes[index].hotspots.splice(0);
                      viewer._mainConfig.plugins.instances.pop();
                      viewer.hotspots.clear()
                       naHotspotArry = [];
                        hotspotArry = [];
                        var levelPano2 = [];
                        lightSlider = $('#lightSlider');

                       for(var i=0;i<data.panoProp.length;i++){
                        if(data.panoProp[i].PropertyId !== null){
                        var hotspot = {
                          "uid" : "",
                          "unit_url" : "",
                          "transform" : "",
                           "geometry" : "",
                           "material" : "",
                           "events" : ""
                        };
                   hotspot.uid = "hotspot-"+i;
                   hotspot.unit_url = data.panoProp[i].PropertyId.UnitUrl;
                   hotspot.transform = data.panoProp[i].PanoMarkerPosition;
                   hotspot.geometry = {
                        "type": "plane",
                        "options": {
                            "width": 50,
                            "height": 50
                        }
                    };
                   hotspot.material = {};
                   hotspot.material.image = data.panoProp[i].PanoMarkerId.URL;
                   hotspot.material.opacity = 1;
                  hotspot.facingCenter = true;
                    hotspot.autoScale =  true;
                   hotspot.events = {};
                   hotspot.events.onClick = ["action-" + data.panoProp[i]._id];
                   console.log("hotspot value")
                   console.log(hotspot);
            // viewer._mainConfig.story.scenes[index].hotspots.push(hotspot);
                //  viewer.hotspots.create(hotspot)
                viewer.hotspots.create(hotspot);
                 hotspotArry.push(hotspot);
                 naHotspotArry.push(hotspot);
                    locations[i] = location
                  } 
                  if(i==data.panoProp.length -1){
                     setTimeout(function () {
                   
                   console.log("Arry of LI ---------------")
                   
                   
                     $(".hotspot-zone").css("display","none");

                     console.log("load scene value ::"+val)
               // viewer.story.loadScene(val)
               viewer.renderer.objects.createRenderScenes();
                viewer.renderer.renderPipeline.addRenderScenes(viewer.renderer.objects.renderScenes);

                           $("#divPano").removeClass("fornewscreen");
                            $(".sidebars").removeClass("fornewscreen");
                            $(".startscreen").css("display","none");
                            $(".panolens-container").css("display","none");
                            $("div#lightbox").fadeOut();
                      }, 1000);
                  }
              }      //$("div#lightbox").fadeOut();
                      secondPanoData =  data.panoProp
                   resfreshPropertyList(data.panoProp,"pano")
                    
         
               

             }
            });
          
        }
            
         function renderScenes(property,amenties){
                 $(".activoam").css("display","block");
                 var $slider = $("#slider-range123");
                 $slider.slider("values", 0,0);
                 $slider.slider("values", 1,4000);
                 $( "#amountprice" ).html(0 );
                 $( "#amountprice2" ).html("4000+");
                      //  $('#radio101').removeAttr("checked");
                        //$("#btnPrice").off("click");
                      // $(".for-change").addClass("icon-disable");
                        //$("#btnPrice").off("click");
                    var instanceConfig = {
                "uid": "simplebutton-one",
                "engine": "org.forgejs.simplebutton",
                "enabled": true,
                "options":
                {
                    "bottom": 10,
                    "left": 10,
                    "height": 50,
                    "value": "Back To Main Screen",
                    "width":200
                },
               };

               $("#mobileminimap").css("display","block");
                     var index = -1;
                     val = property.scene;
                     console.log("Scene value from render scene:"+val)
                    var filteredObj =viewerData.story.scenes.find(function(item, i){
                    if(item.uid === val){
                    index = i;
                    return i;
                    }
                    });
                   //    viewer.camera.lookAt(property.theta, property.phi, 0, 40, 1000);
                       panoFilter = property.scene.split("-")[1];
                       console.log("Pano filetr in bubble click :::"+panoFilter)
                       console.log("call openPropTour"+property.scene.split("-")[1]);
                       $.ajax({url: "/panoProp",type: "POST", data: JSON.stringify({
                        id: property.scene.split("-")[1],
                        amenities : amenties,
                        Sleeps : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                        Bedrooms : parseInt($('#bBedrooms').html()),
                        Bathrooms : parseInt($('#bBathrooms').html())
                    }),dataType: "json",contentType: "application/json", success: function(data){
                        console.log("----------------Pno Prop--------------");
                       console.log(data.panoProp);
                        let panoCenterLatLang = []
                        var hotspots = []
                        let locations = [] 
                        let panolatlang = []
                        sortedPrice = [];
                        viewer._mainConfig.story.scenes[index].hotspots.splice(1);
                        console.log("On click value ::")
                        instanceConfig.events = viewer._mainConfig.story.scenes[index].hotspots[0].events ;
                        console.log(instanceConfig)
                        viewer._mainConfig.plugins.instances.push(instanceConfig)

                        naHotspotArry = [];
                        hotspotArry = [];
                        var levelPano2 = [];
                        naArry = [];
                        lightSlider = $('#lightSlider');
                        
                       for(var i=0;i<data.panoProp.length;i++){
                        if(data.panoProp[i].PropertyId !== null){
                    let location = []
                 location[0] = '<b>Name: '+data.panoProp[i].PropertyId.PropertyName+'</b><br>Address -<br> '+ data.panoProp[i].PropertyId.Address+'';
                 location[1] = data.panoProp[i].PropertyId.MapLocation.coordinates[1] ;
                 location[2] =  data.panoProp[i].PropertyId.MapLocation.coordinates[0];
                        var hotspot = {
                           "uid" : "",
                           "unit_url" : "",
                          "transform" : "",
                           "geometry" : "",
                           "material" : "",
                           "events" : ""
                        };
                   hotspot.uid = "hotspot-"+i;
                   hotspot.unit_url = data.panoProp[i].PropertyId.UnitUrl;
                   hotspot.transform = data.panoProp[i].PanoMarkerPosition;
                   hotspot.geometry = {
                        "type": "plane",
                        "options": {
                            "width": 50,
                            "height": 50
                        }
                    };
                   hotspot.material = {};
                   hotspot.material.image = data.panoProp[i].PanoMarkerId.URL;
                   hotspot.material.opacity = 1;
                   hotspot.facingCenter = true;
                   hotspot.autoScale =  true;
                   hotspot.events = {};
                   hotspot.events.onClick = ["action-" + data.panoProp[i]._id];
                  // console.log("hotspot value")
                  // console.log(hotspot);
                   panoCenterLatLang = data.panoProp[i].PanoId.MapPosition.coordinates;
                   viewer._mainConfig.story.scenes[index].hotspots.push(hotspot);
                   hotspotArry.push(hotspot)
                  // var level2Li  =   $('.remove_'+data.panoProp[i].PropertyId._id).clone(true);
                  var level2Li = 'remove_'+data.panoProp[i].PropertyId._id;
                   levelPano2.push(level2Li)
                    locations[i] = location
                   var price  =  $('.remove_'+data.panoProp[i].PropertyId._id).find('input[name="minPricePerNight"]').val();
                   if(price != 'N/A'){
                     naHotspotArry.push(hotspot);
                 }else{
                    var unitHref = data.panoProp[i].PropertyId.UnitUrl;
                    var unitUrl = unitHref.split('/');
                   naArry.push(unitUrl[3]) 
                 }
                  } 
                  if(i==data.panoProp.length -1){
                    console.log("Arry of classes ");
                    console.log(levelPano2)
                    console.log("set time out call")
                     setTimeout(function () {
                  // lightSlider.empty();
                  $('#lightSlider li').each(function (index, value) { 
                   // console.log("class name on each :"+$(this).attr('class').split(' ')[4])
                var className  = $(this).attr('class').split(' ')[4];
                 var className2  = $(this).attr('class').split(' ')[5];
                 console.log("Class Name 2")
             
                  if(levelPano2.includes(className)){
                 console.log("Element match ")
                 $('.'+className).show();
                  sortedPrice.push(className2)
                  }else{
                  //  console.log("Element not match")
                    $('.'+className).hide();
                  }
                  });

                   console.log("Arry of LI ---------------")
                   console.log(levelPano2)
                  // lightSlider.append(levelPano2);
                   $('#resultCount').html(levelPano2.length);
                    $(".hotspot").toggleClass("show-hide");
                      $(".hotspot-zone").css("display","none");
                    console.log("Viewer Object ")
                    console.log(viewer)
              viewer.story.loadScene(property.scene);
              
                 let defaultSceneIndex ;
                 let defaultScene =viewerData.story.scenes.find(function(item, i){
                    if(item.uid === viewer._mainConfig.story.default){
                    defaultSceneIndex = i  
                    return i;
                    }
                 });

                    var googleMapConfig = viewerData.story.scenes[defaultSceneIndex];
                    googleMapConfig.MapCenter = {};
                    googleMapConfig.MapCenter = viewer._mainConfig.story.MapCenter;
                     locationMapper(googleMapConfig,panoCenterLatLang,property.scene.split("-")[1]);
                      if( $('#mappano').hide()){
                     $('#mappano').show();
                     $('#mydiv').show(); 
                     $('#simplebutton-one').show(); 
                     }
                     //*********** homeSlider();
                     secondPanoData = data.panoProp;
                      // resfreshPropertyList(data.panoProp,"pano")
                      }, 1000);


                  }
              }
                    }
                });

         }

            favouriteSlider();
           function getDefault(){

              $.getJSON("/services/GetDefaultLocation", { "LocationId": "", "LocationType": 4,"PlaceId":placeId }, function (data) {
              console.log("set viewer on div");
              $("#mobileminimap").css("display","none");
             console.log(JSON.stringify(data.panoConfig))
                if(window.location.href == window.location.protocol+"//"+window.location.host+"/"){
                  $.removeCookie("openPropTour");
               }else if(window.location.href == window.location.protocol+"//"+window.location.host+"/"+"#&uid=scene-5989967029bc7713698fd901"){
                 $.removeCookie("openPropTour");
               }

                if(!$.cookie("openPropTour")){
                       console.log("I dont have cookie value")
                 viewer = new FORGE.Viewer("divPano", data.panoConfig);
                  viewerData = data.panoConfig;
                  console.log("I dont have cookie viewer object")
                     $('#select2-selDestination-container').text(data.panoConfig.story.name);
                 console.log(viewer)
                }else{
                   
                    viewerG =  JSON.parse(localStorage.getItem('myviewerObj'));
                    viewer  = new FORGE.Viewer("divPano",viewerG);
                    viewerData = viewerG;
                    console.log("I have cookie value ")
                   console.log(viewer)
                }
                localStorage.setItem('myviewerObj',JSON.stringify(data.panoConfig));
                var config = data.panoConfig;
                configGlobal = data.panoConfig;
                createHotSpotDOM(configGlobal);
                globalViewObj = viewer;
                viewerGloal = viewer;
             if (viewer.customerAction == null) {
                    var customAction = { one: 1 };
                    viewer.customerAction = customAction;
                }

                globalViewObj.customerAction.openPropTour = function (property) {
                    prop = property.scene;
                   // console.log("Call Open Prop from Location");
                    var amenties =   $('input[name="as"]:checked').map(function () {
                     return this.value;
                 }).get();

                    if(property.marker_type == 0){
                     viewer.camera.lookAt(property.theta, property.phi, 0, 40, 1000);
                    $.cookie("openPropTour",property);
                    $.cookie("openPropTour1",prop);
                    $.cookie("secondScene",property.scene);
                     $.cookie("lightSlider",$("#lightSlider li"));


                    $.cookie("amenties",JSON.stringify(amenties));
                    panoFilter = property.scene.split("-")[1];
                    console.log("Click on bubbles openPropTour1"+$.cookie("openPropTour1"))
                     renderScenes(property,amenties)
                    }else{
                         $("#mobileminimap").css("display","none");
                      $.removeCookie("openPropTour");
                      $.removeCookie("secondScene");
                        $(".activoam").css("display","none");
                      val = null;
                    $('#mappano').hide();
                    $('#mydiv').hide();
                    $('#simplebutton-one').hide();
                    $('#nacheckbox').removeAttr("checked");
                    $('#radio101').removeAttr("checked");
                    $("#btnPrice").off("click");
                   $(".for-change").addClass("icon-disable");
                    panoFilter = null;
                 //   viewer.camera.lookAt(property.theta, property.phi, 0, 40, 1000);
                    var searchObj = {
                      'Sleeps' : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                      'Bedrooms' : parseInt($('#bBedrooms').html()),
                      'Bathrooms' : parseInt($('#bBathrooms').html()),
                      'amenities' : (amenties.length ==0) ? null : amenties,
                      'PanoId': panoFilter
                    }
                 // console.log("Back button Search Object on location")
                //  console.log(searchObj)
                 $.getJSON("/services/GetDefaultLocationChange", searchObj, function (data) {
                 console.log("Data frm the back button ")
                 console.log(JSON.stringify(data))
                    configGlobal =  data.panoConfig;
                 console.log("Get data on back button on location")
                 console.log(JSON.stringify(configGlobal))

               setTimeout(function () {
                 $(".hotspot-zone").empty();
                 $(".hotspot").removeClass("show-hide");
                 $(".hotspot").addClass("hotspot");
                 createHotSpotDOM(configGlobal);
               resfreshPropertyList(configGlobal,"home");
                viewer.story.loadScene(property.scene); 
                 }, 1000);
          
                   },"json");
                 }
             
             };
   globalViewObj.customerAction.openPropDetails = function (property) {
           //  alert("2")
   // $('#currencyUnit').addClass(decodeURI(property.CurrencyId.unit));
 
if (window.matchMedia("(max-width: 991px)").matches) {
        //$(".sidebar.right.background.sdbrwdth").addClass("hotspotclicked");
        $(".sidebar.right").trigger("sidebar:open");

        $(".close").click(function(){
            $(".sidebar.right").trigger("sidebar:close");
        })
       
}
 var propUnitURL = [];
var arrivalDate;
var departureDate;
var id = property._id
var SourceSite;
var oneDay = 24*60*60*1000;
var diffDays ;


$(".htl_pricing.total_pricing").css("display","none");
$(".htl_pricing.single_pricing").css("display","none");
 $('#minPricePerNight_dummy').text('');
$("#currencyUnit_dummy").css("display","inline");
 $(".crdimgh6titles").css("display","inline");
 $("#bestPrice").css("display","inline");

if(property.SourceSite == 'HOMEAWAY_US' || property.SourceSite == 'HOMEAWAY_UK'){
                        SourceSite = "HomeAway";
                      //  $('#sourcesiteval').html('HomeAway'); 
                        }else if (property.SourceSite == 'VRBO'){
                             SourceSite = "VRBO";
                           //  $('#sourcesiteval').html('VRBO');
                        }else{
                             SourceSite = property.SourceSite;
                     // $('#sourcesiteval').html(property.SourceSite);
                   }

if ( ($('#date-range200').val() !== "" && $('#date-range201').val() !=="") || ($('#datetimeA').val() !== "" && $('#datetimeD').val() !==""))
 {
   // alert("Date selected")
            if(property.UnitUrl === undefined ||  property.UnitUrl == ''  ){
                // alert("Date selected but dont have unit urls")
                   $('#currencyUnit_dummy').addClass(property.priceId.unit);
                    $(".htl_pricing.single_pricing").css("display","block");
                    console.log("From $ 800 per night");
                    $('.price_'+id).text(property.Price);
                    $('#priceLocal_'+id).val(1);
                    $('#minPricePerNight').html(property.Price);
                    $('#minPricePerNight_dummy').html(property.Price);
                    $('.priceInput_'+id).val(property.Price);
                    $('.methor_'+id).removeClass('priceapi');
                    $('.total_pricing').css("display", "none");
                    $('.from-content').text('From');
                    $(".crdimgh6titles").css("display","inline");
                     $("#currencyUnit_dummy").css("display","inline");
                    $('.single_pricing').attr("data-original-title", "");
                    $('.single_pricing').tooltip(); 
                    $('#bestPrice').hide();
                    $("#moreDetailsbooknow2").hide();
                    $("#moreDetailsbooknow1").show();
                    $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(property.Price)+'&propDes='+btoa(property.Price)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));



                    }else{
                     $('#currencyUnit_dummy').addClass(property.priceId.unit);
                   // alert("Date selected and have unit urls")
                    var res = property.UnitUrl.split("/");

                let area = $(".remove_"+id).find("input[name=area]").val();

                    if( $(".remove_"+id).find("input[name=minPricePerNight2]").val() != 'N/A' ){

                         $(".htl_pricing.total_pricing").css("display","block");
                         $(".htl_pricing.single_pricing").css("display","block");
                        $('#currencyUnit_dummy').addClass(property.priceId.unit);
                        $('#currencyUnit').addClass(property.priceId.unit);
                        $('#minPricePerNight_dummy').html($(".remove_"+id).find("input[name=minPricePerNight2]").val());
                        $('#minPricePerNight').html($(".remove_"+id).find("input[name=minPricePerNight]").val());
                         $('#days_count').html($(".remove_"+id).find("input[name=diffDays]").val());

                        $('#sourcesiteval').html(SourceSite); 
                        $("#currencyUnit_dummy").css("display","inline");
                        $("#currencyUnit").css("display","inline");
                        $(".crdimgh6titles").css("display","inline");
                        $("#bestPrice").css("display","block");

                        diffDays  =$(".remove_"+id).find("input[name=diffDays]").val();

                var newPrice  = "propertyprice_"+$(".remove_"+id).find("input[name=minPricePerNight]").val();
                var avgPrice = $(".remove_"+id).find("input[name=minPricePerNight2]").val();
                $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(newPrice)+'&propDes='+btoa(avgPrice)+'&sourcesite='+btoa(SourceSite)+'&days='+btoa(diffDays));
                  console.log("Price with UNIT URL api  ::-- priceInput_"+id +"--Price--"+avgPrice)
                              $("#moreDetailsbooknow2").show();
                             $("#moreDetailsbooknow1").hide();

                              var sourceSite =   btoa(SourceSite);
                             var newUrl = '/vacationRental?source='+sourceSite+'&unitUrl='+btoa(property.UnitUrl)
                              $("#moreDetailsbooknow2").attr('href',newUrl)

                 }else{

                                 $(".htl_pricing.total_pricing").css("display","none");
                                 $(".htl_pricing.single_pricing").css("display","none");

                                 console.log("MOre detail for ID  N/A:"+id)

                                 var newPrice  = "propertyprice_N/A";
                                $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(newPrice)+'&propDes='+btoa(newPrice)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));
                                $('#currencyUnit_dummy').hide();
                                $('#currencyUnit').hide();
                                $('.crdimgh6titles').hide();
                                $('#bestPrice').hide();
                                $('.htl_pricing.total_pricing').hide();
                                $('#minPricePerNight_dummy').show();
                                $('#minPricePerNight_dummy').text('Not available for selected dates');
                                 $("#moreDetailsbooknow2").show();
                                 $("#moreDetailsbooknow1").hide();
                                 var sourceSite =   btoa(SourceSite);
                               var newUrl = '/vacationRental?source='+sourceSite+'&unitUrl='+btoa(property.UnitUrl)
                              $("#moreDetailsbooknow2").attr('href',newUrl)
                             $(".htl_pricing.single_pricing").css("display","block");


                 }



                   
              }

            }else{
                  //alert("Date not selected")
                if(property.UnitUrl === undefined ||  property.UnitUrl == ''  ){
                  
            $(".htl_pricing.total_pricing").css("display","none");
            $(".htl_pricing.single_pricing").css("display","block");
             //alert("Date not selected and dont have unit urls ")
            console.log("From $ 800 per night");
            $('.price_'+id).text(property.Price);
            $('#priceLocal_'+id).val(1);
            $('#minPricePerNight').html(property.Price);
            $('#currencyUnit_dummy').addClass(property.priceId.unit);
            $('#minPricePerNight_dummy').html(property.Price);
            $('.priceInput_'+id).val(property.Price);
            $('.methor_'+id).removeClass('priceapi');
            $('.total_pricing').css("display", "none");
            $('.from-content').text('From');
            $('.single_pricing').attr("data-original-title", "");
            $('.single_pricing').tooltip(); 
            $('#bestPrice').hide();
            $("#moreDetailsbooknow2").hide();
            $("#moreDetailsbooknow1").show();
            $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(property.Price)+'&propDes='+btoa(property.Price)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));
                 }else{
                // alert("Date not selected and have unit urls ")

                 
                $(".htl_pricing.total_pricing").css("display","none");
                $(".htl_pricing.single_pricing").css("display","block");

                $('.price_'+id).text(property.Price);
                $('#priceLocal_'+id).val(1);
                $('#minPricePerNight').html(property.Price);
                $('#currencyUnit_dummy').addClass(property.priceId.unit);
                $('#minPricePerNight_dummy').html(property.Price);
                $('#sourcesiteval').html(SourceSite); 
                $('.priceInput_'+id).val(property.Price);
                $('.methor_'+id).removeClass('priceapi');
                $('.total_pricing').css("display", "none");
                $('.from-content').text('From');
                $('.single_pricing').attr("data-original-title", "");
                $('.single_pricing').tooltip(); 
                $('#bestPrice').hide();
                $("#moreDetailsbooknow2").show();
                $("#moreDetailsbooknow1").hide();
                $('#bestPrice').css("display", "none");
                $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(property.Price)+'&propDes='+btoa(property.Price)+'&sourcesite='+btoa(SourceSite)+'&days='+btoa(diffDays));

                var sourceSite =   btoa(SourceSite);
               var newUrl = '/vacationRental?source='+sourceSite+'&unitUrl='+btoa(property.UnitUrl)
              $("#moreDetailsbooknow2").attr('href',newUrl)
             
                 }
}

                    $('#sleep').html(property.Sleeps);
                    $('#bedroom').html(property.Bedrooms);
                    $('#bathroom').html(property.Bathrooms);
                    if(property.MinimumStay == null || property.MinimumStay == undefined){
                        $('#minstay').html('-');
                    }else{
                        $('#minstay').html(property.MinimumStay);
                    }

                    if(property.Area == null || property.Area == undefined){
                         $('#apartment').html('-');
                         $('#apptunit').html('');
                     }else{
                      $('#apartment').html(decodeURI(property.Area));
                      $('#apptunit').html(decodeURI(property.AreaUnit));
                      }
                      $('#descriptionModal').html(property.Description);
                       $('#modelPropertyname').html(property.PropertyName);
                      $('#iframePropertyImg').attr('src',property.VRUrl);
                     
                     $('#nearBy').attr('href','/property?id='+property._id+'&option=details#details');
                      $('#reviews').attr('href','/property?id='+property._id+'&option=details#details');
                      $('#contactUs').attr('href','/property?id='+property._id+'&option=details#details');
                      $('#idPropertyDetails').modal('show')
};

viewer.customerAction.onSceneLoadComplete = function (property) {
    console.log("on scene load onSceneLoadComplete")
};
viewer.customerAction.onSceneLoadStart = function (property) {
    console.log("on scene load ");
};
console.log("Load property in end")
if(!$.cookie("openPropTour")){

resfreshPropertyList(data.panoConfig,"home");
   }else{
       console.log("Data have cookie inside else")
       console.log("Place Name :"+$.cookie("parentPlace"))
      $('#myPlace').val($.cookie("parentPlace"));
     var property = $.cookie("openPropTour1");
     console.log("Propperty value inside else  ::"+property)
     var searchObjectStore ;
     var amenties ; 
     if($.cookie("searchObjectStore")){
     searchObjectStore = JSON.parse($.cookie("searchObjectStore"));
    }else{
       searchObjectStore = {
                   'Sleeps' : 0,
                   'Bedrooms' :0,
                   'Bathrooms' :0,
                   'amenities' : []
                    } 
    }
    if($.cookie("amentiesStore")){
     amenties = JSON.parse($.cookie("amentiesStore"));
    }else{
       amenties = []; 
    }
     console.log("Search Store object ")
     console.log(searchObjectStore)
      $.cookie("bAdults");
      $.cookie("bChildren");

     var instanceConfig = {
                "uid": "simplebutton-one",
                "engine": "org.forgejs.simplebutton",
                "enabled": true,
                "options":
                {
                    "bottom": 10,
                    "left": 10,
                    "height": 50,
                    "value": "Back To Main Screen",
                    "width":200
                    
                }
               };
     
      $("#bAdults").html($.cookie("bAdults"));
      $("#bChildren").html($.cookie("bChildren"));
      $('#bBedrooms').html(searchObjectStore.Bedrooms);
      $('#bBathrooms').html(searchObjectStore.Bathrooms);
       $("#mobileminimap").css("display","block");
     console.log("OPen Proptour :"+JSON.stringify(property))
                    var index = -1;
                     val = property;
                     console.log("Scene value from render scene:"+val)
                    var filteredObj =viewerData.story.scenes.find(function(item, i){
                    if(item.uid === val){
                    index = i;
                    return i;
                    }
                    });
                    console.log("Property scenes "+property)
                       panoFilter = property.split("-")[1];
                       console.log("Pano filter after split "+panoFilter)
                       console.log("call openPropTour"+property.split("-")[1]);
                       $.ajax({url: "/panoProp",type: "POST", data: JSON.stringify({
                        id: property.split("-")[1],
                        amenities : amenties,
                         Sleeps : searchObjectStore.Sleeps ,
                        Bedrooms : searchObjectStore.Bedrooms,
                        Bathrooms : searchObjectStore.Bathrooms
                    }),dataType: "json",contentType: "application/json", success: function(data){
                        console.log("----------------Pno Prop--------------");
                        console.log(data.panoProp);
                        let panoCenterLatLang = []
                        var hotspots = []
                        let locations = [] 
                        let panolatlang = []

                        naHotspotArry = [];
                        hotspotArry = [];
                        var levelPano2 = [];
                        naArry = [];
                        
                        viewer._mainConfig.story.scenes[index].hotspots.splice(1);
                        console.log("On click value ::")
                        instanceConfig.events = viewer._mainConfig.story.scenes[index].hotspots[0].events ;
                        console.log(instanceConfig)
                        viewer._mainConfig.plugins.instances.push(instanceConfig)
                       for(var i=0;i<data.panoProp.length;i++){
                        if(data.panoProp[i].PropertyId !== null){
                    let location = []
                        var hotspot = {
                            "uid" : "",
                          "transform" : "",
                           "geometry" : "",
                           "material" : "",
                           "events" : ""
                        };
                   hotspot.uid = "hotspot-"+i;
                   hotspot.transform = data.panoProp[i].PanoMarkerPosition;
                   hotspot.geometry = {
                        "type": "plane",
                        "options": {
                            "width": 50,
                            "height": 50
                        }
                    };
                   hotspot.material = {};
                   hotspot.material.image = data.panoProp[i].PanoMarkerId.URL;
                   hotspot.material.opacity = 1;
                   hotspot.facingCenter = true;
                   hotspot.autoScale =  true;
                   hotspot.events = {};
                   hotspot.events.onClick = ["action-" + data.panoProp[i]._id];
                   console.log("hotspot value")
                   console.log(hotspot);
                   panoCenterLatLang = data.panoProp[i].PanoId.MapPosition.coordinates;
                   //viewer._mainConfig.story.scenes[index].hotspots.push(hotspot);
                    viewer.hotspots.create(hotspot)
                    locations[i] = location
                  hotspotArry.push(hotspot)
                    locations[i] = location
                   var price  =  $('.remove_'+data.panoProp[i].PropertyId._id).find('input[name="minPricePerNight"]').val();
                   if(price != 'N/A'){
                     naHotspotArry.push(hotspot);
                 }else{
                    var unitHref = data.panoProp[i].PropertyId.UnitUrl;
                    var unitUrl = unitHref.split('/');
                   naArry.push(unitUrl[3]) 
                 }

                  } 
                  if(i==data.panoProp.length -1){
                    console.log("set time out call---------------------")
                     setTimeout(function () {
                    $(".hotspot").toggleClass("show-hide");
                    $(".hotspot-zone").css("display","none");
                viewer.renderer.objects.clear();
                viewer.renderer.objects.createRenderScenes();
                viewer.renderer.renderPipeline.addRenderScenes(viewer.renderer.objects.renderScenes)   
                 let defaultSceneIndex ;
                 let defaultScene =viewerData.story.scenes.find(function(item, i){
                    if(item.uid === viewer._mainConfig.story.default){
                    defaultSceneIndex = i  
                    return i;
                    }
                 });
                    
                    var googleMapConfig = viewerData.story.scenes[defaultSceneIndex];
                    googleMapConfig.MapCenter = {};
                    googleMapConfig.MapCenter = viewer._mainConfig.story.MapCenter;
                    locationMapper(googleMapConfig,panoCenterLatLang,property.split("-")[1]);
                    var defaultProScene  = $.cookie("openPropTour")
                    console.log("Prop tour value for min map ::"+defaultProScene)

                   if(!$.cookie("secondScene")){
                     $('#mappano').hide();
                     $('#mydiv').hide(); 
                     $(".activoam").css("display","none");
                    }else{
                     $('#mappano').show();
                     $('#mydiv').show();  
                      $('#simplebutton-one').show();
                     }
                     console.log("parent Plave ID ::"+$.cookie("parentPlaceID"))
                     console.log("Default Scene  ::"+viewer._mainConfig.story.default)
                     secondPanoData = data.panoProp;
                    resfreshPropertyList(data.panoProp,"pano")

                      }, 1000);
                  }
              }
                    }
                });
                   
   }     
               
}, "json");


           }
     
                var mystartscreen = sessionStorage.getItem("startscreensearchbuttonclick");
            if(mystartscreen){
              getDefault();
                console.log("start scree have cookie");
                //console.log("start scree have cookie")
                          setTimeout(function(){
                                 $(".arrow_box123").fadeOut(2000);
                                 $(".arrow_box1234").fadeOut(2000);
                                 $(".fa").removeClass("bounce");
                                 $(".fa").removeClass("bounceX");
                                 $(".fa").removeClass("bounceX1");
                                }, 10000);

                      startScreenViewer = null
                       $("#strtscreendiv").css("display","none"); 
                      //  startScreenViewer.destroy();
                            $("#divPano").removeClass("fornewscreen");
                            $(".sidebars").removeClass("fornewscreen");
                            $(".startscreen").css("display","none");
                            $(".panolens-container").css("display","none");
                            $(".select2-container--default .select2-selection--single:first-child").css("background-color", "transparent");
  $(".select2-container--default .select2-selection--single:first-child").css("color", "#fff");
   $(".select2-container--default .select2-selection--single:first-child").css("border", "none");
  $(".select2-container--default .select2-selection--single:first-child").css("border-bottom", "4px solid #00FFFF ");
  $(".select2-container--default .select2-selection--single:first-child").css("width", "4.5em");
  $(".select2-container--default .select2-selection--single").css("border-bottom", "4px solid #00FFFF");
  $(".select2-container--default .select2-selection--single:first-child").css("margin-top", "-0.8em");
  $(".select2-container--default .select2-selection--single:first-child").css("height", "42px");
 
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("color", "#fff");
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("line-height", "4.3em");
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("padding-left", "0px");
  $(".span.select2-dropdown.select2-dropdown--below").css("width", "126px");
  console.log("End start screen");
               
              } else{



                 console.log("start scree dont have cookie")
    $.getJSON("/uploadsPano" , function (data) {
      console.log("Start screen with Viewer and Zip COnfig")
      console.log(data);
      var random = data[Math.floor(Math.random() * data.length)];
    console.log("Random value for zip config :"+JSON.stringify(random));
    var zipPath  = random.StartUploadPanoScreen;
    var levels_0 = random.Levels.level0;
    var levels_1 = random.Levels.level1;
    var levels_2 = random.Levels.level2;
    var levels_3 = random.Levels.level3;
   
var zipConfig = {

    "controllers":
    {
        "instances":
        [
            {
                "uid": "pointer-zip-01",
                "type": "pointer",
                "options":
                {
                    "zoom": { "toPointer": true },
                     "orientation": { "drag": true },
                     "fullscreen": false
                }
            }
        ]
    },
    "history": {
        "enabled": false
    },
    "story":
    {
        "uid" : "Multi-Story-1",
        "name": "Multi Story",
        "slug": "multi-story",
        "description": "multiresolution paronomic images",
        "default": "sc-0",

        "scenes":
        [
           {
               
                "name": "House Interior",
                "slug": "",
                "description": "Saint Jorioz's house interior",
                "director":{  
               "animation":{  
                  "enabled":true,
                  "delay":1500,
                  "stoppable":true,
                  "loop":false,
                  "idleTime":-1,
                  "tracks":[  
                     "director-track-0"
                  ]
               }
            },
                "camera":
                {
                    "fov":
{
                        "default": 95,
                        "min": 5,
                        "max": 100
                    }
                },

                "media":
                {
                    "uid": "media-1",
                    "type": "image",
                    "source":
                    {
                        "format": "cube",

                        "faces":
                        {
                            "front": 0,
                            "right": 1,
                            "back": 2,
                            "left": 3,
                            "down": 5,
                            "up": 4
                        },

                        "pattern": zipPath+"/{face}/{level}/{y}_{x}.jpg",

                        "levels":
                        [
                            {
                                "name": "level 0",
                                "width": parseInt(levels_0),
                                "height": parseInt(levels_0),
                                "tile": 512
                            },

                            {
                                "name": "level 1",
                                "width": parseInt(levels_1),
                                "height": parseInt(levels_1),
                                "tile": 512
                            },

                            {
                                "name": "level 2",
                                "width": parseInt(levels_2),
                                "height": parseInt(levels_2),
                                "tile": 512
                            },
                            {
                                "name": "level 3",
                                "width":parseInt(levels_3),
                                "height": parseInt(levels_3),
                                "tile": 512
                            }
                        ]
                    }
                }
            }
        ]
    },
        "director":
    {
        "tracks":
        [
            {
                "uid": "director-track-0",
                "name": "Director's track",
                "description": "Director's track",
                "smooth": true,
                "cancelRoll": true,
                 "easing": {
        "default": "linear",
        "start": 1000
      },
                "keyframes":
                [
                    { "time": 0,     "data": { "yaw": 100,  "pitch": 0,    "fov": 110 } },
                    { "time": 3000,  "data": { "yaw": 120,"pitch": 0,    "fov": 110  } },
                    { "time": 6000,  "data": { "yaw": 140,"pitch": 0,    "fov": 110   } },
                    { "time": 9000, "data": { "yaw": 160,"pitch": 0,    "fov": 110 } },
                    { "time": 12000, "data": { "yaw": 180,    "pitch": 0,    "fov": 110 } },
                    { "time": 15000, "data": { "yaw": 200, "pitch": 0,    "fov": 110 } },
                    { "time": 18000, "data": { "yaw": 220, "pitch": 0,    "fov": 110  } },
                    { "time": 21000, "data": { "yaw": 240, "pitch": 0,    "fov": 110 } },
                    { "time": 24000, "data": { "yaw": 260, "pitch": 0,    "fov": 110 } },
                    { "time": 27000, "data": { "yaw": 280,    "pitch": 0,  "fov": 110 } },
                    { "time": 30000, "data": { "yaw": 300,    "pitch": 0,    "fov": 110 } },
                    { "time": 33000, "data": { "yaw": 320,   "pitch": 0, "fov": 110 } },
                    { "time": 36000, "data": { "yaw": 340,    "pitch": 0,       "fov": 110  } },
                    { "time": 39000, "data": { "yaw": 360,    "pitch": 0,      "fov": 110 } },
                    { "time": 42000, "data": { "yaw": 380,    "pitch": 0,      "fov": 110 } },
                    { "time": 45000, "data": { "yaw": 400,    "pitch": 0,      "fov": 110 } },
                    { "time": 48000, "data": { "yaw": 420,    "pitch": 0,      "fov": 110 } },
                    { "time": 51000, "data": { "yaw": 440,    "pitch": 0,      "fov": 110 } },
                    { "time": 54000, "data": { "yaw": 460,    "pitch": 0,      "fov": 110 } } ,
                    { "time": 57000, "data": { "yaw": 480,    "pitch": 0,      "fov": 110 } },
                    { "time": 60000, "data": { "yaw": 500,    "pitch": 0,      "fov": 110 } },
                    { "time": 63000, "data": { "yaw": 520,    "pitch": 0,      "fov": 110 } },
                    { "time": 66000, "data": { "yaw": 540,    "pitch": 0,      "fov": 110 } },
                    { "time": 69000, "data": { "yaw": 560,    "pitch": 0,      "fov": 110 } },
                    { "time": 72000, "data": { "yaw": 580,    "pitch": 0,      "fov": 110 } },
                    { "time": 75000, "data": { "yaw": 600,    "pitch": 0,      "fov": 110 } },
                    { "time": 78000, "data": { "yaw": 620,    "pitch": 0,      "fov": 110 } },
                    { "time": 81000, "data": { "yaw": 640,    "pitch": 0,      "fov": 110 } },
                    { "time": 84000, "data": { "yaw": 660,    "pitch": 0,      "fov": 110 } },
                    { "time": 87000, "data": { "yaw": 680,    "pitch": 0,      "fov": 110 } },
                    { "time": 90000, "data": { "yaw": 700,    "pitch": 0,      "fov": 110 } }
                   
                   
                ]
            }
        ]
    }
}

console.log("--------Zip Config With Random Data ----------")
console.log(JSON.stringify(zipConfig));
      
startScreenViewer = new FORGE.Viewer("stsrtpano1",zipConfig);
getDefault();
console.log(startScreenViewer)

     }, "json");  



              



}





             $(".searchsubmit").click(function(){
                      $("div#lightbox").fadeIn();
              

                        var srhbtn = $("#srchscreenbtn");
                         $.cookie("searchclickbtnstart", srhbtn);
                         sessionStorage.setItem("startscreensearchbuttonclick","iamatscreen");
                       
                                
                           /*  $("#divPano").removeClass("fornewscreen");
                            $(".sidebars").removeClass("fornewscreen");
                            $(".startscreen").css("display","none");
                            $(".panolens-container").css("display","none");*/
  

  let me= $(".rty1").find(':selected').text();
  let me_val= $(".rty1").find(':selected').val();
  placeSelected2 = me_val;
  $(".rty option:selected").prop("selected", false);
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").text(me);
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").attr("title", me_val);
   $('#bAdults').text($('#adultsSearch').val());
  $('#bChildren').text($('#childsSearch').val());

  $('#datetimeA').val($('#date-range200').val());
  $('#datetimeD').val($('#date-range201').val());
   var selected_new_date=$('#date-range200').val();
   var nextDay_new = new Date(selected_new_date);

   var new_DAY1 =  nextDay_new.toString()
                        var pos = new_DAY1.indexOf("-");
                        var add_DATE1 = 1;
                            //alert("[pst++ " + pos)
                            if (pos >= 1)
                            {
                                add_DATE1 =2;
                            }

    nextDay_new.setDate(nextDay_new.getDate() + add_DATE1);
  $("#datetimeD").datepicker("option","minDate", nextDay_new);
  //var dateapi1 = $('#date-range200').val();
  //var dateapi2 = $('#date-range201').val();

              console.log("Place ID from frnt search ::"+me_val)
             //$("div#lightbox").fadeOut();
            //homeSlider();  
             let sleep  = $('#guestinputcount').val()
              let sleeps =0
              if(sleep != ''){
                 sleeps = parseInt($('#guestinputcount').val())
              }
                  
                    var searchObj = {
                        'Sleeps' : sleeps,
                        'Bedrooms' : 0 ,
                        'Bathrooms' : 0,
                        'amenities' : null,
                         'PanoId'  : null,
                         'PlaceId' : me_val
                    }
                console.log("Serch object on amenity chnage")
                console.log(searchObj)
              // searchFilter(searchObj);
                placeSelected =  $('.parentPlace').find(':selected').attr('data-field');
              console.log("Default value in search submit"+placeSelected)
                if(placeSelected == 'true'){


                 if(startScreenViewer != null){
                startScreenViewer.destroy();
               }

                            $("#divPano").removeClass("fornewscreen");
                            $(".sidebars").removeClass("fornewscreen");
                            $(".startscreen").css("display","none");
                            $(".panolens-container").css("display","none");


                            // SELECT BOX 

  $(".select2-container--default .select2-selection--single:first-child").css("background-color", "transparent");
  $(".select2-container--default .select2-selection--single:first-child").css("color", "#fff");
   $(".select2-container--default .select2-selection--single:first-child").css("border", "none");
  $(".select2-container--default .select2-selection--single:first-child").css("border-bottom", "4px solid #00FFFF ");
  $(".select2-container--default .select2-selection--single:first-child").css("width", "4.5em");
  $(".select2-container--default .select2-selection--single").css("border-bottom", "4px solid #00FFFF");
  $(".select2-container--default .select2-selection--single:first-child").css("margin-top", "-0.8em");
  $(".select2-container--default .select2-selection--single:first-child").css("height", "42px");
  $("#select2-myPlace-container").addClass("seletthor");
  $("#select2-myPlace-container").css("color","white");
    
 
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("color", "#fff");
  $(".select2-container .select2-selection--single .select2-selection__rendered").css("color", "#fff");
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("line-height", "3.3em");
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("padding-left", "0px");
  $(".span.select2-dropdown.select2-dropdown--below").css("width", "126px");

  // ! Select BOx 

                  
               console.log("Default place seleecte true")
               searchFilter(searchObj);
               $("div#lightbox").fadeOut();
                }else{
                    //alert("Alerta1")
                    $(".activoam").css("display","block");
              /* console.log("Other place selected ")
               placeProp(searchObj.Sleeps,me_val) */  
                     console.log("other place selected")
                    $.removeCookie("openPropTour");
                    $.removeCookie("secondScene");

                    console.log("hide simple button one")
                     sleep = 0;
                      placeProp(sleep,me_val)    
                                    }
//$("div#lightbox").fadeOut();

                            

              //  }
                                setTimeout(function(){
                                 $(".arrow_box123").fadeOut(10000);
                                 $(".arrow_box1234").fadeOut(10000);
                                 $(".fa").removeClass("bounce");
                                 $(".fa").removeClass("bounceX");
                                 $(".fa").removeClass("bounceX1");
                                }, 15000);


              });
               



/**   @@@@@@@@@@@@@@  START SCREEN SCRIPT END HERE  @@@@@@@@@@@@@@  **/


            ///  var forgeConfig = getDefaultPano();

            // $('#divLoading').addClass("loader");

 


       // });

        function resfreshPropertyList(config,slideType) {
                //alert("MRT");
            console.log("inside resfresh");
             var propUnitURL = [];
                sortedPrice = []
             var propLength = 0;
             var propCount = 1;
            var lightSlider = $('#lightSlider');
           // console.log("All the data ::------------------------");
            //console.log(JSON.stringify(config));
            lightSlider.empty();
           
            if(slideType == 'home'){
            var propertyDoesNotExist = true;
            var count =0;
            console.log("--------------Home resfresh-------------")



            
           // console.log(JSON.stringify(config.actions))
            let valueProperties = config.actions.filter(filterD => {
           return (filterD.type ==3)?filterD.method.args[0]:'';
           });
           let  sortedProperties ; 
           $('#resultCount').text(valueProperties.length);
          if(priceSort !=0){
            priceSort =0
            sortedProperties =   valueProperties.sort(function(a, b){
                if(toogelSort != -1){
              return  a.method.args[0].Price > b.method.args[0].Price ;
          }else{
            return  b.method.args[0].Price > a.method.args[0].Price ;
          }
           });
            }else if(reviewSort !=0){
                reviewSort =0
              sortedProperties =   valueProperties.sort(function(a, b){
                if(reviewToogelSort != -1){
              return  a.method.args[0].reviewAvg > b.method.args[0].reviewAvg ;
          }else{
            return  b.method.args[0].reviewAvg > a.method.args[0].reviewAvg ;
          }
           });
            }else{
               sortedProperties  = valueProperties


            }
           console.log(sortedProperties)
           propLength = sortedProperties.length;
            for (var i = 0; i < sortedProperties.length; i++) {
                var actionVal = sortedProperties[i].method.args[0];
                    homeSlider(actionVal);
                    propertyDoesNotExist = false;
                    count++;
            
            }
            console.log("HURREEEEYyyy" + count);
            if (count <= 3)
            {
                $('.lSPager').css("display","none");
                $('.lSAction').css("display","none");
            }
            else
            {
              $('lSPager').css("display","block");
                $('lSAction').css("display","block");  
            }

             }else if(slideType == 'search'){
                console.log("inside search");
               propLength =  config.length;;
                for(var i=0;i<config.length;i++){
                      var actionVal = config[i];
                    console.log("Config value ");
                   console.log(actionVal)
                   homeSlider(actionVal);
                }
              
               
            }else if(slideType == 'pano'){
                
             console.log("Inside pano  and length ::"+config.length);
             var count =0;
             var propC = 0;
           propLength =  config.length; 
             console.log(config)
             for(var i=0;i<config.length;i++){

                var actionVal = config[i].PropertyId;
                if(actionVal !== null){
                 homeSlider(actionVal);
                 propC++;
                 
                }
                //homeSlider(actionVal);
                count++;

             }

               if (count <= 3)
            {
                $('.lSPager').css("display","none");
                $('.lSAction').css("display","none");
            }
            else
            {
              $('lSPager').css("display","block");
                $('lSAction').css("display","block");  
            }
             $('#resultCount').text(propC);
            }else{
                console.log("Non of them")
            } 



            function homeSlider(actionVal1){
          
                
               var id = actionVal._id;
                var heartClass ;
                 var unitUrl = actionVal.UnitUrl;
                  if(favArry.includes(actionVal._id)){
                     heartClass  = "fa-heart";
                  }else{
                     heartClass  = "fa-heart-o";
                  }
                  console.log("Unit URLS ::"+unitUrl)
                     var priceVL;
                     var newUnitURL
                     if(unitUrl === undefined || unitUrl == '' ){
                         $('.price_'+id).text(actionVal.Price);
                      }else{
                    var res = unitUrl.split("/");
                    newUnitURL = res[3].split(".");
                    priceVL = res[3];
                    var propURL = "/properties/-/units/"+res[2]+"."+res[3]
                    propUnitURL.push(propURL)
                     }
                  var str = '';
                  str += "<li class='list-group-item loki background movingcheck remove_"+actionVal._id+"'id ='remove_"+newUnitURL+"'><span class='qap-text'>"+actionVal.PropertyName+"<br><span class='asof_text asof_text_"+actionVal._id+"'>as of&nbsp;</span><i class='fa "+actionVal.priceId.unit+" currencyNA_"+priceVL+"'></i><b id='price_"+newUnitURL+"' class='priceapi methor_"+actionVal._id+" methor2_"+priceVL+"'></b><b class='price_"+actionVal._id+"'></b><span class='pernightNA_"+priceVL+"' style='text-transform: lowercase !important;'> per night</span></span><i id='wishlistid-"+actionVal._id+"' data-id='" + actionVal._id + "' class='tooltip fa "+heartClass+" dnlseciwish wishlist' aria-hidden='true'><span class='tooltiptext'>Add to Wishlist</span></i><a  data-action='" + actionVal._id + "' data-vUnitUrl ='"+unitUrl+"' data-unit-url='"+newUnitURL+"'  class='btn-prop loki' href='javascript:void(0)'>";
                    str += "<input type='hidden' name='area' value="+encodeURI(actionVal.Area)+">";
                    str += "<input type='hidden' name='propertyName' value="+encodeURI(actionVal.PropertyName)+">";
                     str += "<input type='hidden' name='area_unit' value="+encodeURI(actionVal.AreaUnit)+">";
                    str += "<input type='hidden' name='sleeps' value="+encodeURI(actionVal.Sleeps)+">";
                    str += "<input type='hidden' name='bedrooms' value="+encodeURI(actionVal.Bedrooms)+">";
                    str += "<input type='hidden' name='bathrooms' value="+encodeURI(actionVal.Bathrooms)+">";
                   str += "<input type='hidden' name='sourceSite' value="+encodeURI(actionVal.SourceSite)+">";
                    str += "<input type='hidden' name='propertyDescription' value="+encodeURI(actionVal.Description)+">";
                        str += "<input type='hidden' id='priceLocal_"+actionVal._id+"' class='priceLocal_"+newUnitURL+"' name='priceLocal' value=''>";
                    str += "<input type='hidden' class='priceInput_"+actionVal._id+"' id='priceInputUNIT2_"+newUnitURL+"' name='minPricePerNight2' value=''>";
                    str += "<input type='hidden' class='priceInput_"+actionVal._id+"' id='priceInputUNIT_"+newUnitURL+"' name='minPricePerNight' value=''>";

                     str += "<input type='hidden' class='priceInputUNIT_"+newUnitURL+"'  name='diffDays' value=''>";

                   str += "<input type='hidden' name='currencyUnit' value='"+actionVal.priceId.unit+"'>";
                     str += "<input type='hidden' name='minimumstay' value="+encodeURI(actionVal.MinimumStay)+">";
                     str += "<input type='hidden' name='VRUrl' value="+encodeURI(actionVal.VRUrl)+">";
                    str += "<img src='" + actionVal.VRThumbnail + "' alt='' /></a></li>";
                lightSlider.append(str);
                console.log("Just check with First screen date ")
                console.log($('#datetimeA').val() +":::"+$('#datetimeD').val())
                  if ( ($('#date-range200').val() !== "" && $('#date-range201').val() !=="") || ($('#datetimeA').val() !== "" && $('#datetimeD').val() !==""))
                   {
    var arrivalDate;
    var departureDate;
                    if($('#date-range200').val() !== "" && $('#date-range201').val() !==""){
                        arrivalDate = $('#date-range200').val();
                        departureDate = $('#date-range201').val();
                        if($('#datetimeA').val() !== "" && $('#datetimeD').val() !==""){
                        arrivalDate = $('#datetimeA').val();
                        departureDate = $('#datetimeD').val();
                    }
                    }else if($('#datetimeA').val() !== "" && $('#datetimeD').val() !==""){
                        arrivalDate = $('#datetimeA').val();
                        departureDate = $('#datetimeD').val();
                    }

                    console.log(" dates selected")
                      if(unitUrl === undefined || unitUrl == '' ){
                         console.log(" dates selected and local price")
                         $('.price_'+id).text(actionVal.Price);
                         $('.asof_text_'+id).css("display","inline-block");
                          $('.remove_'+id).addClass(id+"_"+actionVal.Price);
                             sortedPrice.push(id+"_"+actionVal.Price)
                            $('#priceLocal_'+id).val(1);
               console.log("date selected but Unit URL blank and undefined------------")
               console.log("Price with ID ::-- priceInput_"+id +"--Price--"+actionVal.Price)
                           $('.priceInput_'+id).val(actionVal.Price);
                           $('.methor_'+id).removeClass('priceapi');
               }else{
                  $('#priceLocal_'+id).val(2);
               }
                if(propLength == propCount){
                     console.log(propUnitURL)
                       var oneDay = 24*60*60*1000; // 
                     var firstDate = new Date(arrivalDate);
                     var secondDate = new Date(departureDate);
                     var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
                   $("#days_count").text(diffDays);
                  $.ajax({
                    url: "/getVacationRentalPrice",
                   type: "POST",
                    data: JSON.stringify({
                      "unitHrefs": propUnitURL,
                       "arrivalDate": arrivalDate, 
                       "adults": $('.guestsum').val(), 
                       "departureDate": departureDate,
                   }),dataType: "json",contentType: "application/json",
                     error: function (err) {
                        console.log("AJAX error in request: " + JSON.stringify(err, null, 2));
                    },
                    success: function(data){
                         $('.methor_'+id).removeClass('priceapi');
                         $('.priceapi').css("background","none");
                         $('.priceapi').css("width","auto");
                         $('.priceapi').css("margin","0px");
                    console.log("------Response form the home away---------");
                    console.log(data)
                  var naCount =    data.searchQuotes.filter(function(value) { return value.available === false }).length;
                   //$('#resultCount').text(propLength-naCount);
                    for(var i=0;i<data.searchQuotes.length;i++){
                         var priceVL = data.searchQuotes[i].unitHref.split("/");
                         var priceVL2 = priceVL[4].split(".")
                        if(data.searchQuotes[i].available){
                          var price = data.searchQuotes[i].quoteTotals.total.estimated.amount
                          $('.priceLocal_'+priceVL2[1]).val(2);
                         $('#priceInputUNIT_'+priceVL2[1]).val(Math.round(price));
                          $('.priceInputUNIT_'+priceVL2[1]).val(diffDays);
                         var roundPrice  = Math.round(price)
                         var avgPrice1 = roundPrice/diffDays;
                         var avgPrice = Math.round(avgPrice1);
                         sortedPrice.push(priceVL2[1]+"_"+avgPrice)
                         $('#price_'+priceVL2[1]).text(avgPrice);
                         $('#priceInputUNIT2_'+priceVL2[1]).val(avgPrice);
                         $('#remove_'+priceVL2[1]).addClass(priceVL2[1]+"_"+avgPrice);
                           
                                    
                         $('#methor2_'+priceVL2[1]).removeClass('priceapi');
                     console.log("Price with UNIT URL api  ::-- priceInput_"+id +"--Price--"+actionVal.Price)
                    // lightSlider = $('#lightSlider');
                     //localStorage.setItem('sliderStorage',lightSlider);
                        }else{
                              console.log("Pano Filete :"+panoFilter)
                            if(placeSelected2 != true || placeSelected != true){
                              
                            var unitHref =  data.searchQuotes[i].unitHref.split("/-");
                            var unitHrefUrl = unitHref[1].split(".");
                            var unitUrlNew = unitHrefUrl[0]+"/"+unitHrefUrl[1];
                            console.log("Unit href NA prop :"+unitUrlNew)
                            console.log("Unit Href Array :")
                            console.log(naHotspotArry);
                           var myFilter = naHotspotArry.find(function(item, i){
                           if(item.unit_url === unitUrlNew){
                            naArry.push(priceVL2[1])
                            naHotspotArry.splice(i,1)
                             console.log("Splice N/A property Array Value :"+naHotspotArry)
                             return i;
                            }
                           });
                            }
                           console.log("  unit URL  available  but false from homeaway::")
                           console.log("Remove LI with iD : remove_"+priceVL2[1])
                            var strremove =  $('#remove_'+priceVL2[1]).clone(true);
                         
                           $('#remove_'+priceVL2[1]).remove();
                          
                            lightSlider.append(strremove);
                            $('#price_'+priceVL2[1]).text("Not Available");
                            $('#remove_'+priceVL2[1]).addClass(priceVL2[1]+"_NA");
                             sortedPrice.push(priceVL2[1]+"_NA")
                           $('#priceInputUNIT_'+priceVL2[1]).text("Not Available");
                             $('#priceInputUNIT2_'+priceVL2[1]).text("Not Available");
                               $('#priceInputUNIT2_'+priceVL2[1]).val('N/A');
                                $('#priceInputUNIT_'+priceVL2[1]).val('N/A');
                            $('#priceInput_'+id).text("Not Available");
                            $('.priceInput_'+id).text("Not Available");
                            $('.currencyNA_'+priceVL2[1]).hide()
                            $('.pernightNA_'+priceVL2[1]).hide()
                           /*  lightSlider = $('#lightSlider');
                            localStorage.setItem('sliderStorage',lightSlider);*/
                         }
                    }
                  }
           })
                
                }
            
                   }else {


                        console.log("if dates blank local price----------------")
                         $('#resultCount').text(propLength);
                        $('.price_'+id).text(actionVal.Price);
                        $('.asof_text_'+id).css("display","inline-block");
                        $('#priceLocal_'+id).val(1);
                        $('.methor_'+id).removeClass('priceapi');
                        $('.priceInput_'+id).val(actionVal.Price);
                        $('.remove_'+id).addClass(id+"_"+actionVal.Price);
                          sortedPrice.push(id+"_"+actionVal.Price)
                          /* lightSlider = $('#lightSlider');
                            localStorage.setItem('sliderStorage',lightSlider);*/
                   
                }  
               propCount++;
             }
              
            if (propertyDoesNotExist) {
                $('<div>', {
                    style: 'color:white',
                    id: hotspot.dom.id
                }).text("No Search Results").appendTo('#page-top');
            }  else {

                /*lightSlider.lightSlider({
                    item: 1,
                    autoWidth: false,
                    slideMove: 1, // slidemove will be 1 if loop is true
                    slideMargin: 0,

                    addClass: '',
                    mode: "slide",
                    useCSS: true,
                    cssEasing: 'ease', //'cubic-bezier(0.25, 0, 0.25, 1)',//
                    easing: 'linear', //'for jquery animation',////

                    speed: 2000, //ms'
                    auto: false,
                    loop: false,
                    slideEndAnimation: false,
                    pause: 20,

                    keyPress: false,
                    controls: true,
                    prevHtml: "<img src='/img/prop_up.png'>",
                    nextHtml: "<img src='/img/prop_down.png'>",

                    rtl: false,
                    adaptiveHeight: false,

                    vertical: true,
                    verticalHeight: 600,
                    vThumbWidth: 100,

                    thumbItem: 1,
                    pager: false,
                    gallery: false,
                    galleryMargin: 5,
                    thumbMargin: 5,
                    currentPagerPosition: 'middle',

                    enableTouch: true,
                    enableDrag: true,
                    freeMove: true,
                    swipeThreshold: 0,

                    responsive: [],

                    onBeforeStart: function (el) { },
                    onSliderLoad: function (el) { },
                    onBeforeSlide: function (el) { },
                    onAfterSlide: function (el) { },
                    onBeforeNextSlide: function (el) { },
                    onBeforePrevSlide: function (el) { }
                });
                
                $(lightSlider).bind('mousewheel DOMMouseScroll', function(e){
    if(e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0)
    {
      // alert("up")

             
                   
                   $(".lSPrev").trigger("click");
                   
              
    }
    else
    {
      
         $(".lSNext").trigger("click");
    }
}); */
            }

  
                 
$("ul#lightSlider li").on("click" ,function () {
            // body...
         //   $(this).addClass('alreadyclicked');
        });

         $(".btn-prop").on("click", function (e) {
            $("#virtual_tour_text_div").fadeIn(1500);
          //  alert("Btn prop")
               var SourceSite;
               var diffDays ;
               var $this = $(this);
               var id = $this.attr("data-action");
               var unitUrl = $this.attr("data-unit-url");
               var vacationUnitURL = $this.attr("data-vUnitUrl") 
               var UnitUrl = decodeURI(unitUrl)        
               var address = $(this).find('input[name="address"]').val();
               var sleeps = $(this).find('input[name="sleeps"]').val();
               var bathrooms = $(this).find('input[name="bathrooms"]').val();
               var propertyName =$(this).find('input[name="propertyName"]').val();
               var  minimumstay = $(this).find('input[name="minimumstay"]').val();
               var area = $(this).find('input[name="area"]').val();
               var areaM = $(this).find('input[name="area_unit"]').val();
               var bedrooms = $(this).find('input[name="bedrooms"]').val();
               var VRUrl = $(this).find('input[name="VRUrl"]').val();
               var minPricePerNite = $(this).find('input[name="minPricePerNight"]').val();
               var minPricePerNite2 = $(this).find('input[name="minPricePerNight2"]').val();
               var descriptionModal = $(this).find('input[name="propertyDescription"]').val();
               var currencyUnit = $(this).find('input[name="currencyUnit"]').val();

               console.log("vacation rental unit url :"+vacationUnitURL)
               console.log("Unit Url :"+UnitUrl)

               console.log("favArry----------------"+favArry)

                 if(favArry.includes(id)){
                        console.log("Inside if ")
                    $('#wishModelId').addClass('fa-heart').removeClass('fa-heart-o')
                   }else{
                    console.log("Inside else ")
                   $('#wishModelId').addClass('fa-heart-o').removeClass('fa-heart') 
                   }

              $('#wishModelId').attr('data-id',id) 

           console.log("Btn prop :"+minPricePerNite2+"::"+minPricePerNite+"::"+currencyUnit+"::"+UnitUrl)
            var sourceSiteInput = $(this).find('input[name="sourceSite"]').val();
            if(sourceSiteInput == 'HOMEAWAY_US' || sourceSiteInput == 'HOMEAWAY_UK'){
                        SourceSite = "HomeAway";
                      //  $('#sourcesiteval').html('HomeAway'); 
                        }else if (sourceSiteInput == 'VRBO'){
                             SourceSite = "VRBO";
                           //  $('#sourcesiteval').html('VRBO');
                        }else{
                             SourceSite = sourceSiteInput
                     // $('#sourcesiteval').html(property.SourceSite);
                   }

         if ( ($('#date-range200').val() !== "" && $('#date-range201').val() !=="") || ($('#datetimeA').val() !== "" && $('#datetimeD').val() !==""))
         {
           //  alert("Date selected")
            if(UnitUrl == 'undefined' ||  UnitUrl == ''  ){
                //alert("Date selected but dont have unit urls")
                   $('#currencyUnit_dummy').addClass(decodeURI(currencyUnit));
                    $(".htl_pricing.single_pricing").css("display","block");
                    console.log("From $ 800 per night");
                    $('.price_'+id).text(minPricePerNite2);
                    $('#priceLocal_'+id).val(1);
                    $('#minPricePerNight_dummy').html(minPricePerNite2);
                    $('.methor_'+id).removeClass('priceapi');
                    $('.total_pricing').css("display", "none");
                    $('.from-content').text('From');
                     $(".crdimgh6titles").css("display","inline");
                     $("#currencyUnit_dummy").css("display","inline");
                    $('.single_pricing').attr("data-original-title", "");
                    $('.single_pricing').tooltip(); 
                    $('#bestPrice').hide();
                    $("#moreDetailsbooknow2").hide();
                    $("#moreDetailsbooknow1").show();
                    $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(minPricePerNite2)+'&propDes='+btoa(minPricePerNite2)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));

                    }else{
                        // alert("Date selected and have unit urls")
                     $('#currencyUnit_dummy').addClass(decodeURI(currencyUnit));
                    var res = UnitUrl.split("/");

                    if( decodeURI(minPricePerNite) != 'N/A' ){
                     // alert("Property available from home away")

                         $(".htl_pricing.total_pricing").css("display","block");
                         $(".htl_pricing.single_pricing").css("display","block");
                        $('#currencyUnit_dummy').addClass(decodeURI(currencyUnit));
                        $('#currencyUnit').addClass(decodeURI(currencyUnit));
                        $('#minPricePerNight_dummy').html(decodeURI(minPricePerNite2));
                        $('#minPricePerNight').html(decodeURI(minPricePerNite));
                         $('#days_count').html();

                        $('#sourcesiteval').html(SourceSite); 
                        $("#currencyUnit_dummy").css("display","inline");
                        $("#currencyUnit").css("display","inline");
                        $(".crdimgh6titles").css("display","inline");
                        $("#bestPrice").css("display","block");

                        diffDays  =$(this).find("input[name=diffDays]").val();

                var newPrice  = "propertyprice_"+minPricePerNight;
                var avgPrice = decodeURI(minPricePerNite2)

                $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(newPrice)+'&propDes='+btoa(avgPrice)+'&sourcesite='+btoa(SourceSite)+'&days='+btoa(diffDays));
                  console.log("Price with UNIT URL api  ::-- priceInput_"+id +"--Price--"+avgPrice)
                              $("#moreDetailsbooknow2").show();
                             $("#moreDetailsbooknow1").hide();

                              var sourceSite =   btoa(SourceSite);
                             var newUrl = '/vacationRental?source='+sourceSite+'&unitUrl='+btoa(vacationUnitURL)
                              $("#moreDetailsbooknow2").attr('href',newUrl)

                 }else{
                           //  alert("N/A from home away")
                                 $(".htl_pricing.total_pricing").css("display","none");
                                 $(".htl_pricing.single_pricing").css("display","none");

                                 console.log("MOre detail for ID  N/A:"+id)

                                 var newPrice  = "propertyprice_N/A";
                                $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(newPrice)+'&propDes='+btoa(newPrice)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));
                                $('#currencyUnit_dummy').hide();
                                $('#currencyUnit').hide();
                                $('.crdimgh6titles').hide();
                                $('#bestPrice').hide();
                                $('.htl_pricing.total_pricing').hide();
                                $('#minPricePerNight_dummy').show();
                                $('#minPricePerNight_dummy').text('Not available for selected dates');
                                 $("#moreDetailsbooknow2").show();
                                 $("#moreDetailsbooknow1").hide();
                                 var sourceSite =   btoa(SourceSite);
                               var newUrl = '/vacationRental?source='+sourceSite+'&unitUrl='+btoa(vacationUnitURL)
                              $("#moreDetailsbooknow2").attr('href',newUrl)
                             $(".htl_pricing.single_pricing").css("display","block");

                 }
              }

            }else{
               // alert("Date not selected")
                if(UnitUrl == 'undefined' ||  UnitUrl == ''){
                 //alert("Date not selected and dont have unit urls ") 
            $(".htl_pricing.total_pricing").css("display","none");
            $(".htl_pricing.single_pricing").css("display","block");
            console.log("From $ 800 per night");
            $('.price_'+id).text(minPricePerNite2);
            $('#priceLocal_'+id).val(1);
            $('#minPricePerNight').html(minPricePerNite2);
            $('#currencyUnit_dummy').addClass(decodeURI(currencyUnit));
            $('#minPricePerNight_dummy').html(minPricePerNite2);
            $('.priceInput_'+id).val(minPricePerNite2);
            $('.methor_'+id).removeClass('priceapi');
            $('.total_pricing').css("display", "none");
            $('.from-content').text('From');
            $('.single_pricing').attr("data-original-title", "");
            $('.single_pricing').tooltip(); 
            $('#bestPrice').hide();
            $("#moreDetailsbooknow2").hide();
             $("#moreDetailsbooknow2").css("display","none");
            $("#moreDetailsbooknow1").show();
                $("#moreDetailsbooknow1").css("display","block");
            $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(minPricePerNite2)+'&propDes='+btoa(minPricePerNite2)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));
                 }else{
                // alert("Date not selected and have unit urls ")

                 
                $(".htl_pricing.total_pricing").css("display","none");
                $(".htl_pricing.single_pricing").css("display","block");

                $('.price_'+id).text(minPricePerNite2);
                $('#priceLocal_'+id).val(1);
                $('#minPricePerNight').html(minPricePerNite2);
                $('#currencyUnit_dummy').addClass(decodeURI(currencyUnit));
                $('#minPricePerNight_dummy').html(minPricePerNite2);
                $('#sourcesiteval').html(SourceSite); 
                $('.priceInput_'+id).val(minPricePerNite2);
                $('.methor_'+id).removeClass('priceapi');
                $('.total_pricing').css("display", "none");
                $('.from-content').text('From');
                $('.single_pricing').attr("data-original-title", "");
                $('.single_pricing').tooltip(); 
                $('#bestPrice').hide();
                $("#moreDetailsbooknow2").show();
                $("#moreDetailsbooknow1").hide();
                $('#bestPrice').css("display", "none");
              /*  $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(minPricePerNite2)+'&propDes='+btoa(minPricePerNite2)+'&sourcesite='+btoa(SourceSite)+'&days='+btoa(diffDays));*/

               $('#moreDetails').attr('href','/property?id='+id+'&option=details#property&prop='+btoa(minPricePerNite2)+'&propDes='+btoa(minPricePerNite2)+'&sourcesite='+btoa('local')+'&days='+btoa(diffDays));

                var sourceSite =   btoa(SourceSite);
               var newUrl = '/vacationRental?source='+sourceSite+'&unitUrl='+btoa(vacationUnitURL)
              $("#moreDetailsbooknow2").attr('href',newUrl)
             
                 }
}

                   $('#sleep').html(decodeURI(sleeps));
                    $('#bedroom').html(decodeURI(bedrooms));
                    $('#bathroom').html(decodeURI(bathrooms));
                    if(decodeURI(minimumstay) == 'null' || decodeURI(minimumstay) == null || decodeURI(minimumstay) == 'undefined'){
                        $('#minstay').html('-');
                    }else{
                        $('#minstay').html(decodeURI(minimumstay));
                    }

                    if(decodeURI(area) == 'null' || decodeURI(area) == null || decodeURI(area) == 'undefined'){
                         $('#apartment').html('-');
                         $('#apptunit').html('');
                     }else{
                      $('#apartment').html(decodeURI(decodeURI(area)));
                      $('#apptunit').html(decodeURI(decodeURI(areaM)));
                      }
                      $('#descriptionModal').html(decodeURI(descriptionModal));
                       $('#modelPropertyname').html(decodeURI(propertyName));
                      $('#iframePropertyImg').attr('src',decodeURI(VRUrl));
                     
                    
                      $('#idPropertyDetails').modal('show')
                setTimeout(function() {
                            $("#virtual_tour_text_div").fadeOut(1500);
                         },5000);
        
                     });




                    $(".close").click(function(){
                    $("#iframePropertyImg").attr('src','');

                });

                     

              /*  $(".fade").click(function(){
                    $("#iframePropertyImg").attr('src','');
                    

                });*/
                


            $(".wishlist").on("click",function(){

                 event.stopPropagation();
                if(!sessionValue){ 
                alert("wish list click and not login")   

                 var $this = $(this);
                  $(this).toggleClass("fa-heart");
                  $(this).toggleClass("fa-heart-o");
                  $('#wishModelId').toggleClass("fa-heart");
                   $('#wishModelId').toggleClass("fa-heart-o");
                 if($(this).hasClass( "fa-heart")){
                  alert("ad to wisjlist")
                 var id =  $this.attr("data-id")
                wishListArr.push(id);
                localStorage.setItem("wishListArr",JSON.stringify(wishListArr));
                  $('#favslideCount').text(wishListArr.length);
                  favArry = wishListArr
                }else{
                  alert("Remove to wish")
                var id =  $this.attr("data-id")
                const index = wishListArr.indexOf(id);
                 wishListArr.splice(index, 1);
                localStorage.setItem("wishListArr",JSON.stringify(wishListArr)); 
                 $('#wishlistid-'+id).addClass('fa-heart-o').removeClass('fa-heart');
                 $('#favslideCount').text(wishListArr.length); 
                 favArry = wishListArr;
                  // favouriteSlider(); 
                }
                 } else{ 
                   
                   $(this).toggleClass("fa-heart");
                  $(this).toggleClass("fa-heart-o");
                $('#wishModelId').toggleClass("fa-heart");
                   $('#wishModelId').toggleClass("fa-heart-o");
                 if($(this).hasClass( "fa-heart" )){
                  //  alert('add elements from first');

                var $this = $(this); 
                $.ajax({url: "/userWishList",type: "POST", data: JSON.stringify({
                id: $this.attr("data-id")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                    console.log("------------------------------");
                    console.log(data);
                    if(data.code==200){
                      console.log('add on wish list');
                     $('#favslideCount').text(data.count);
                    favArry = data.favArry;
                    console.log("Fav Arry ::"+favArry)
                }else{
                    console.log('not added');
                    //$(#account).trigger();
                }}
             }); 
                }else{
                   // alert('remove form first ')
                   // alert($(this).attr("data-id"))
                   var RemoveId = $(this).attr("data-id");
                 $.ajax({url: "/removeWishList",type: "POST", data: JSON.stringify({
                id: $(this).attr("data-id")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                    console.log("------------------------------");
                    console.log(data);
                    if(data.code==200){
                        console.log("Remove from wish list")
                        $('#wishlistid-'+RemoveId).addClass('fa-heart-o').removeClass('fa-heart');
                     $('#favslideCount').text(data.count);
                     favArry = [];
                     favouriteSlider();
                    console.log("Fav Arry ::"+favArry)
                }else{
                    console.log('not removed');
                }}
             });
                }
                }});

       

}

     $(".wishlistmodel").on("click",function(){
  
                 if(!sessionValue){ 
                  alert("wishlist model not login")
                   /* console.log("condition1 without login");
               $('html,body').animate({
        scrollTop: $("#account").offset().top},
        'slow');
          $('#idPropertyDetails').modal('hide')*/
        
           var $this = $(this);
             var wilistID = $this.attr("data-id")
                  $(this).toggleClass("fa-heart");
                  $(this).toggleClass("fa-heart-o");
                  $('#wishlistid-'+wilistID).toggleClass('fa-heart');
                   $('#wishlistid-'+wilistID).toggleClass('fa-heart-o');
                 if($(this).hasClass( "fa-heart" )){
                  alert("add model wish")
                 var id =  $this.attr("data-id")
                wishListArr.push(id);
                localStorage.setItem("wishListArr",JSON.stringify(wishListArr));
                  $('#favslideCount').text(wishListArr.length);
                  favArry = wishListArr
                }else{
                     alert("remove model wish")
                var id =  $this.attr("data-id")
                const index = wishListArr.indexOf(id);
                 wishListArr.splice(index, 1);
                localStorage.setItem("wishListArr",JSON.stringify(wishListArr)); 
                 $('#wishlistid-'+id).addClass('fa-heart-o').removeClass('fa-heart');
                 $('#favslideCount').text(wishListArr.length); 
                 favArry = wishListArr
                   //favouriteSlider(); 
                }
                 } else{ 
                  console.log("Click on popup")  
                    console.log("else condition in login");
                   $(this).toggleClass("fa-heart");
                   $(this).toggleClass("fa-heart-o");
                     var id = $(this).attr('data-id')
                   $('#wishlistid-'+id).toggleClass('fa-heart');
                   $('#wishlistid-'+id).toggleClass('fa-heart-o');
                
                 if($(this).hasClass( "fa-heart" )){
                    //alert('add elements from first:::'+$(this).hasClass( "fa-heart" ));
                        console.log("if class has fa-heart with ID :"+id)
                var $this = $(this); 
                $.ajax({url: "/userWishList",type: "POST", data: JSON.stringify({
                id: $this.attr("data-id")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                    /*console.log("--------------add wish list----------------");
                    console.log(data);*/
                    if(data.code==200){
                     console.log(data.count);   
                     $('#favslideCount').text(data.count);
                      console.log('add wish list');
                      console.log(data.count);  
                     //  favouriteSlider();
                }else{
                    console.log('not added');
                    //$(#account).trigger();
                }}
             }); 

                }else{
                   //alert('remove form first :::'+$(this).hasClass( "fa-heart" ))
                   console.log("most extreme else")
                 $.ajax({url: "/removeWishList",type: "POST", data: JSON.stringify({
                id: $(this).attr("data-id")
                 }),dataType: "json",contentType: "application/json", success: function(data){
                    console.log("---------------Remove wish list---------------");
                    console.log(data);
                    if(data.code==200){
                      $('#favslideCount').text(data.count);
                      favArry = [];
                       $("#usemeasclick").trigger("click")
                }else{
                    console.log('not removed');
                }}
             });
                }
                }});                  
        

        function createHotSpotDOM() {

    console.log("Calling hotspot");

    var hotspotDOM = '<div class="hotspot-zone" style="color:#00FFFF">' +
    '<input type="checkbox"/>' +
    '<p class="media">' +
    '<span class="centered">' +
    '<span class="content">' +
    '</span>' +
    '</span>' +
    '</p>' +
    '<div class="content">' +
    '</div>' +
    '</div>';


    for (var i = 0; i < configGlobal.story.scenes.length; i++) {
        if (configGlobal.story.scenes[i].uid == configGlobal.story.default) {
            for (var j = 0; j < configGlobal.story.scenes[i].hotspots.length; j++) {
                hotspot = configGlobal.story.scenes[i].hotspots[j];
                var pj=4;
                if (hotspot.type == "dom" && hotspot.propertyCount !=0) {
                    console.log("Get count inside hotspot ::"+hotspot.propertyCount)
                    $('<div>', {
                        class: 'hotspot',
                        id: hotspot.dom.id
                    }).appendTo('#page-top');

                    $('#' + hotspot.dom.id).html(hotspotDOM);
                    $("#" + hotspot.dom.id + " > div > p > span >span > p > h5").text(hotspot.propertyCount);
                            //   var hs = $("#page-top").find("#dom-");
                            //   hs.id = hotspot.dom.id;
                           
                            $('#' + hotspot.dom.id + " > div > p > span > span").append('<p class="hotspotD" data-val='+hotspot.destinationPanoId+'></p><h5 style="margin-top: 0.5em">' + hotspot.propertyCount 
                                + '</h5>');
                            
                           /* console.log("hs", $('#' + hotspot.dom.id + "").html());
                            console.log("value of J ::--"+j);
                            */
                        }
                    }

                    break;
                }
            }

        }


function locationMapper(panolatlang,latlangCenter,defaultPano){

 console.log("Pano Lat long ")
console.log(JSON.stringify(panolatlang))
var markers = [];

 if (window.matchMedia("(max-width: 1024px)").matches) {
    $("#mydiv").css("display","none");
        var map = new google.maps.Map(document.getElementById('mappano2'), {
  zoom: 10,
 mapTypeId: google.maps.MapTypeId.SATELLITE,
  center: new google.maps.LatLng(latlangCenter[1],latlangCenter[0]),
});

 }
else 
{

    $("#mappano").css("height","125px");
        $("#mappano").css("width","150px");
        $("#mappano").css("position","relative");
        $("#mappano").css("z-index","9");
        //$("#mappano").css("right","100px");
        $("#mappano").css("bottom","0");
        $("#mobileminimap").css("display","none");
    var map = new google.maps.Map(document.getElementById('mappano'), {
  zoom: 10,
 mapTypeId: google.maps.MapTypeId.SATELLITE,
  center: new google.maps.LatLng(latlangCenter[1],latlangCenter[0]),
});
}

 map.setTilt(45);
var infowindow = new google.maps.InfoWindow();
var marker, i;
   var markersIcon = [];

for (i = 0; i < panolatlang.hotspots.length; i++) {
    console.log("Loppe ::"+i+"::Map position")
    console.log(panolatlang.hotspots[i])
  let labelProp = panolatlang.hotspots[i].propertyCount;
  console.log("Lable prop"+labelProp)

 if(labelProp !=0){
  marker = new google.maps.Marker({
    label: {
     text: ""+labelProp+"",
     color: '#00FFFF',
     fontSize: "14px",
    fontWeight: "bold",
    lineHeight: "20px"
},
    position: new google.maps.LatLng(panolatlang.hotspots[i].MapPosition.coordinates[1], panolatlang.hotspots[i].MapPosition.coordinates[0]),
    map: map,
  });
  if(panolatlang.hotspots[i].destinationPanoId == defaultPano){
console.log("Default seleted pano::"+defaultPano);
console.log("Destination Pano id ::"+panolatlang.hotspots[i].destinationPanoId);
marker.setIcon('/img/Map-Marker-PNG-File.png')
 marker.setLabel({text:""+labelProp+"",color:'#00FFFF',fontSize:"14px",fontWeight:"bold",offsettop:"-140px"})
 }else{
   marker.setIcon('/img/marker.png')
}
  markers.push(marker);
    

console.log("marker before event :")
console.log(marker)
      

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
        map.setCenter({
        lat : panolatlang.hotspots[i].MapPosition.coordinates[1],
        lng : panolatlang.hotspots[i].MapPosition.coordinates[0]
    });


       $("div#lightbox").fadeIn();
       console.log("Markers ICON :")
        console.log(markersIcon[0].icon)
        console.log(markersIcon.length)
        var arrLength = markersIcon.length;
        var count =0;
       for(var k=0;k < arrLength ; k++){
       count++;
      console.log("change the icon")
       markersIcon[k].setIcon('/img/marker.png') ;
    if(count == arrLength){
       marker.setIcon('/img/Map-Marker-PNG-File.png')
       }
    }

        var scn = 'scene-'+panolatlang.hotspots[i].destinationPanoId
        $.cookie("openPropTour1",scn);
        console.log("Click on mini map pano"+scn);
        panoFilter = scn.split("-")[1];
        val = scn;
          var index = -1;
                    var filteredObj =viewerData.story.scenes.find(function(item, i){
                    if(item.uid === scn){
                    index = i;
                    return i;
                    }
                    });

                       var amenties =   $('input[name="as"]:checked').map(function () {
                     return this.value;
                     }).get();
                       $.ajax({url: "/panoProp",type: "POST", data: JSON.stringify({
                        id:panolatlang.hotspots[i].destinationPanoId ,
                        amenities : amenties,
                        Sleeps : parseInt($('#bAdults').html()) +  parseInt($('#bChildren').html()),
                        Bedrooms : parseInt($('#bBedrooms').html()),
                        Bathrooms : parseInt($('#bBathrooms').html())
                    }),dataType: "json",contentType: "application/json", success: function(data){
                        console.log("----------------Pno Prop- of map-------------");
                      
                        let hotspots = []
                        let locations = [] ;
                        let panolatlang = [];
                        naHotspotArry = [];
                        naArry = [];
                        hotspotArry = [];
                        var levelPano2 = [];
                        lightSlider = $('#lightSlider');

                      

                        console.log("Viewer object of Map location")
                       console.log(viewer)
                      viewer._mainConfig.story.scenes[index].hotspots.splice(1);
                       for(var i=0;i<data.panoProp.length;i++){
                       // console.log("Data panoProp:"+JSON.stringify(data.panoProp))
                        if(data.panoProp[i].PropertyId !== null){

                        var hotspot = {
                            "uid" : "",
                          "transform" : "",
                           "geometry" : "",
                           "material" : "",
                           "events" : ""
                        };
                   hotspot.uid = "hotspot-"+i;
                   hotspot.transform = data.panoProp[i].PanoMarkerPosition;
                   hotspot.geometry = {
                        "type": "plane",
                        "options": {
                            "width": 50,
                            "height": 50
                        }
                    };
                   hotspot.material = {};
                   hotspot.material.image = data.panoProp[i].PanoMarkerId.URL;
                   hotspot.material.opacity = 1;
                   hotspot.facingCenter = true;
                   hotspot.autoScale =  true;
                   hotspot.events = {};
                   hotspot.events.onClick = ["action-" + data.panoProp[i]._id];
                   console.log("hotspot value")
                  // console.log(hotspot);
                 
                
                   viewer._mainConfig.story.scenes[index].hotspots.push(hotspot);
                   hotspotArry.push(hotspot)
                    var price  =  $('.remove_'+data.panoProp[i].PropertyId._id).find('input[name="minPricePerNight"]').val();
                 //  var level2Li  =   $('.remove_'+data.panoProp[i].PropertyId._id).clone(true);
                    var level2Li = 'remove_'+data.panoProp[i].PropertyId._id;
                   levelPano2.push(level2Li)
                   if(price != 'N/A'){
                     naHotspotArry.push(hotspot);
                 }else{
                    var unitHref = data.panoProp[i].PropertyId.UnitUrl;
                    var unitUrl = unitHref.split('/');
                   naArry.push(unitUrl[3]) 
                 }
                  } 
                  if(i==data.panoProp.length -1){
                    console.log("Arry in class :---")
                    console.log(levelPano2)
                     setTimeout(function () {
                  // $('#lightSlider').append(levelPano2);
                  $('#lightSlider li').each(function (index, value) { 
                //    console.log("class name on each :"+$(this).attr('class').split(' ')[4])
                var className  = $(this).attr('class').split(' ')[4];
                  if(levelPano2.includes(className)){
                //  console.log("Element match ")
                 $('.'+className).show();
                  }else{
                  //  console.log("Element not match")
                    $('.'+className).hide();
                  }
                  });
                    $('#resultCount').html(levelPano2.length);
                     $(".hotspot-zone").css("display","none");
                    viewer.renderer.objects.clear();
                    viewer.story.loadScene(scn)
                viewer.renderer.objects.createRenderScenes();
                viewer.renderer.renderPipeline.addRenderScenes(viewer.renderer.objects.renderScenes);
                      }, 1000);
                  }
              }      $("div#lightbox").fadeOut();
              secondPanoData = data.panoProp;
                      // resfreshPropertyList(data.panoProp,"pano")
                    }
                });
    }
  })(marker, i));
}
 
}
 var markerCluster = new MarkerClusterer(map, markers,{imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
 markersIcon = markerCluster.getMarkers();

  


    }




       });
    </script>
   
    <script type="text/javascript">
      $(document).ready(function() {
  $('#mydiv').hide();
  $(".rty1").select2();
  $(".select2-container--default .select2-selection--single:first-child").css("background-color", "#fff");
  $(".select2-container--default .select2-selection--single:first-child").css("color", "#000");
  $(".select2-container--default .select2-selection--single:first-child").css("border-bottom", "none");
  //$(".select2-container--default .select2-selection--single:first-child").css("width", "266px");
  $(".select2-container--default .select2-selection--single:first-child").css("margin-top", "0.4em");
  $(".select2-container--default .select2-selection--single:first-child").css("height", "56px");
  $(".select2-container--default .select2-selection--single:first-child").css("padding", "10px");
  $(".select2-container--default .select2-selection--single:first-child").css("border", "0px solid #000");
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("color", "#000");
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("line-height", "1.3em");
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("padding-left", "29px");
  $("div.xcz span#select2-pcq2-container").css("margin-top","-12px");
 
});
      $(document).ready(function(){

     
      $('#nacheckbox').change(function() {
        $(".crdimgh6titles").css("display","inline")
             console.log("original Arry :")
             console.log(hotspotArry)

             console.log("Na hotspot Arry :")
             console.log(naHotspotArry)

         console.log("remove unit yrl :")
         console.log(naArry)
         if ( ($('#date-range200').val() !== "" && $('#date-range201').val() !=="") || ($('#datetimeA').val() !== "" && $('#datetimeD').val() !==""))
                   {
        console.log("date rage selected in nc checkbox")
          if($(this).prop("checked") == true){

            if(naArry.length != 0){
           naArry.forEach(function (value) {
           $('#remove_'+value).hide();
           });
           }
          viewer.hotspots.clear()
          console.log("NA hotspot arry :"+naHotspotArry.length)
          console.log(naHotspotArry)
          for(var i=0 ; i< naHotspotArry.length;i++ ){
                viewer.hotspots.create(naHotspotArry[i]);
                console.log("Hotspots create ::"+JSON.stringify(naHotspotArry[i]))
                 }
          $('#resultCount').val(naHotspotArry.length)
          viewer.renderer.objects.clear();
          viewer.renderer.objects.createRenderScenes();
          viewer.renderer.renderPipeline.addRenderScenes(viewer.renderer.objects.renderScenes);
                
            }
            else if($(this).prop("checked") == false){
           if(naArry.length != 0){
           naArry.forEach(function (value) {
           $('#remove_'+value).show();
           });
           }
          viewer.hotspots.clear()
          for(var i=0 ; i<hotspotArry.length;i++ ){
                viewer.hotspots.create(hotspotArry[i]);
                console.log("Hotspots create ::"+JSON.stringify(hotspotArry[i]))
                 }
          $('#resultCount').val(naHotspotArry.length)
          viewer.renderer.objects.clear();
          viewer.renderer.objects.createRenderScenes();
          viewer.renderer.renderPipeline.addRenderScenes(viewer.renderer.objects.renderScenes);
            }
        }
               
    });















        $(".rty").select2(),function(){

$(".select2-container--default .select2-selection--single:first-child").css("background-color", "transparent");
  $(".select2-container--default .select2-selection--single:first-child").css("color", "#fff");
  $(".select2-container--default .select2-selection--single:first-child").css("border", "none");
  $(".select2-container--default .select2-selection--single:first-child").css("border-bottom", "4px solid #00FFFF ");
  $(".select2-container--default .select2-selection--single:first-child").css("width", "4.5em");
  $(".select2-container--default .select2-selection--single").css("border-bottom", "4px solid #00FFFF");
  $(".select2-container--default .select2-selection--single:first-child").css("margin-top", "-0.8em");
  $(".select2-container--default .select2-selection--single:first-child").css("height", "42px"); 
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("color", "#fff");
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("line-height", "4.3em");
  $(".select2-container--default .select2-selection--single .select2-selection__rendered").css("padding-left", "0px");
  $(".span.select2-dropdown.select2-dropdown--below").css("width", "126px");
            
        };
  
                            
      });
   </script>
   

                <!-- ******* start screen calendr -->
<!--- ************************* CALENDAR ******** -->


    <script>
var d = new Date();

var month = d.getMonth()+1;
var day = d.getDate()+1;

var output = d.getFullYear() + '-' +
    ((''+month).length<2 ? '0' : '') + month + '-' +
    ((''+day).length<2 ? '0' : '') + day;
            $('#two-inputs').dateRangePicker(
    {
        autoClose: true,
        separator : ' to ',
        selectForward: true ,
        showTopbar: false,
        extraClass: 'date-range-picker19',
         startDate: output,
        //inline:true,
    //container: '#date-range12-container',
    //alwaysOpen:true

        getValue: function()
        {
            //alert();
            if ($('#date-range200').val() && $('#date-range201').val() )
              
                return $('#date-range200').val() + ' to ' + $('#date-range201').val();
            else
                return '';
        },
        setValue: function(s,s1,s2)
        {
            $('#date-range200').val(s1);
            
            $('#date-range201').val(s2);
        }
    });
    



$('.demo').bind('datepicker-first-date-selected', function(event, obj)
{
        //alert("heleoo1");
        setTimeout(function(){
            $(".first-date-selected").removeClass('valid').addClass('invalid');
        },400);
        //$(".date-picker-wrapper.date-range-picker19 .day.first-date-selected").css("pointer-events","none")
      $("#date-range201").css("outline","#00FFFF solid 3px");
      $("#date-range201").css("border-radius","0px");
         $(".triangle-up").addClass("triangle-up1");
         $("#date-range200").css("outline","#00FFFF solid 0px");
});

    
$('.demo').bind('datepicker-change', function(event, obj)
{
        //alert("heleoo2222");
    $("#date-range201").css("outline","#00FFFF solid 0px");
     $(".triangle-up").css("display","none");
       $(".triangle-up").removeClass("triangle-up1");
  
});

    
    /*$("#date-range200").click(function(){
  $(".triangle-up").css("display","block");
    }) ;  
*/

    </script>


<!-- *********** CALNEDAR ************ -->
 <script>
       
      
      //alert('dd');
    $('.localstoragebook').click(function(){
      //   //used for set the value from the button for unique
       storage = window.localStorage;
        storage.setItem('ValidFrom', 'Set');
    });
          // 
    </script>
                <!-- ! start screen claneder -->

                  <!-- ! start screen claneder -->


 <!-- ********************  GUEST POP UP COUNTS ******************** -->
<script type="text/javascript">
   
    /*$(document).click(function(){
       $(".guestfade").css("display" , "none");
        $("#me").css("display" , "none"); 
    });*/
     $(".guestsinput").click(function(){
        event.stopPropagation();
        $(".guestfade").fadeIn("slow");

     });

     $("#date-range200").click(function(e){
            //e.preventDefault();
            e.stopPropagation();
          $(".triangle-up").show();
          $(".date-picker-wrapper").show();
          $("#date-range200").css("outline","#00FFFF solid 3px");
     }) ;

     $(document).click(function(e) 
        {
            var container = $(".guestfade");

            // if the target of the click isn't the container nor a descendant of the container
            if (!container.is(e.target) && container.has(e.target).length === 0) 
            {
                container.fadeOut();
            }
             var container1 = $(".triangle-up");
            if (!container1.is(e.target) && container1.has(e.target).length === 0) 
            {
                //$(".triangle-up").css("opacity","0");
                container1.fadeOut("fast");
                //$(".triangle-up").addClass("display","none");
                $("#date-range200").css("outline","#00FFFF solid 0px");
            }
        });

    
</script>


                <script type="text/javascript">
    

$('.btn-number_guestscreen').click(function(e){
    e.preventDefault();
    
    fieldName = $(this).attr('data-field');
    type      = $(this).attr('data-type');
    var input = $("input[name='"+fieldName+"']");
    var currentVal = parseInt(input.val());
    if (!isNaN(currentVal)) {
        if(type == 'minus') {
            
            if(currentVal > input.attr('min')) {
                input.val(currentVal - 1).change();
            } 
            if(parseInt(input.val()) == input.attr('min')) {
                $(this).attr('disabled', true);
            }

        } else if(type == 'plus') {

            if(currentVal < input.attr('max')) {
                input.val(currentVal + 1).change();
            }
            if(parseInt(input.val()) == input.attr('max')) {
                $(this).attr('disabled', true);
            }

        }
    } else {
        input.val(0);
    }
});
$('.input-number_guests_screen').focusin(function(){
   $(this).data('oldValue', $(this).val());
});
$('.input-number_guests_screen').change(function() {
    
    minValue =  parseInt($(this).attr('min'));
    maxValue =  parseInt($(this).attr('max'));
    valueCurrent = parseInt($(this).val());
    
    name = $(this).attr('name');
    if(valueCurrent >= minValue) {
        $(".btn-number_guestscreen[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
    } else {
        alert('Sorry, the minimum value was reached');
        $(this).val($(this).data('oldValue'));
    }
    if(valueCurrent <= maxValue) {
        $(".btn-number_guestscreen[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
    } else {
        alert('Sorry, the maximum value was reached');
        $(this).val($(this).data('oldValue'));
    }
    
    
});
$(".input-number_guests_screen").keydown(function (e) {
        // Allow: backspace, delete, tab, escape, enter and .
        if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
             // Allow: Ctrl+A
            (e.keyCode == 65 && e.ctrlKey === true) || 
             // Allow: home, end, left, right
            (e.keyCode >= 35 && e.keyCode <= 39)) {
                 // let it happen, don't do anything
                 return;
        }
        // Ensure that it is a number and stop the keypress
        if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
            e.preventDefault();
        }
    });

</script>

<script>
$(document).ready(function() {
    $(".guestsum").val("2");
   $(".guestkey").val("2");
    $(".guestkey1").val("0");

    function calc() {

        var $guestnum1 = ($.trim($(".guestnum1").val()) != "" && !isNaN($(".guestnum1").val())) ? parseInt($(".guestnum1").val()) : 0;
        console.log($guestnum1);
        var $guestnum2 = ($.trim($(".guestnum2").val()) != "" && !isNaN($(".guestnum2").val())) ? parseInt($(".guestnum2").val()) : 0;
        console.log($guestnum2);
        $(".guestsum").val($guestnum1 + $guestnum2);
    }
    $(".btn-number_guestscreen").click(function() {
        calc();
    });
});
</script>
<script>
$(document).ready(function(){
    $(".select2-selection__rendered").click(function(){
        $(".rty1").focus();
    }); 
});
</script>


                <!-- ! GUEST POP UP counts -->

                <!-- <script type="text/javascript">
      
$('#datetimeA1').datetimepicker({
                format: 'DD-MM-YYYY',
                disabledTimeIntervals: true,
                disabledHours: true

            });


            $('#datetimeD1').datetimepicker({
                format: 'DD-MM-YYYY',
                disabledTimeIntervals: true,
                disabledHours: true
            });

    </script> -->
    <!-- *************** START SCREEN COOKIE SCRIPT -->

  
                <!--  **************** COOKIES SCRIPT **************-->

<!-- <script type="text/javascript">
    $(document).ready(function(){   
    setTimeout(function () {
        $("#cookieConsent").fadeIn(200);
     }, 4000);
    $("#closeCookieConsent, .cookieConsentOK").click(function() {
        $("#cookieConsent").fadeOut(200);
    }); 
}); 
</script> -->
<!-- ******** END COOKIES SCRIPT *********** -->
<script language="JavaScript" type="text/javascript">
    checkCookieExist();
</script>
<script type="text/javascript">
    $(document).ready(function(){

        $(".navbar-brand").click(function(){
            $.removeCookie("searchclickbtnstart");
            sessionStorage.clear();
            localStorage.removeItem(wishListArr);
        })
    })
</script>


 <script type="text/javascript">
   
//Make the DIV element draggagle:
dragElement(document.getElementById(("mydiv")));

function dragElement(elmnt) {
  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  if (document.getElementById(elmnt.id + "header")) {
    /* if present, the header is where you move the DIV from:*/
    document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
  } else {
    /* otherwise, move the DIV from anywhere inside the DIV:*/
    elmnt.onmousedown = dragMouseDown;
  }

  function dragMouseDown(e) {
    e = e || window.event;
    // get the mouse cursor position at startup:
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    // call a function whenever the cursor moves:
    document.onmousemove = elementDrag;
  }

  function elementDrag(e) {
    e = e || window.event;
    // calculate the new cursor position:
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    // set the element's new position:
    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
  }

  function closeDragElement() {
    /* stop moving when mouse button is released:*/
    document.onmouseup = null;
    document.onmousemove = null;
  }
}

</script>
<script type="text/javascript">
    function deleteAllCookies() {
    var cookies = document.cookie.split(";");

    for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i];
        var eqPos = cookie.indexOf("=");
        var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
        document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
    }
}
</script>


<script>
function openNav() {
    //document.getElementById("mySidenav").addClass("newsidewindow");

    var element =  document.getElementById("mySidenav");
element.classList.add("newsidewindow");
}

function closeNav() {
    //document.getElementById("mySidenav").style.width = "0";
      var element =  document.getElementById("mySidenav");
    element.classList.remove("newsidewindow");
    document.getElementById("mySidenav").style.height = "0";
    $("#mySidenav").css("padding-top", "0px");
}


/*$(window).resize(function () {
    var height11 = $(window).height();
    var width11 = $(window).width();
    console.log('width is : ' + width11);
    console.log('height is : ' + height11);    
   
    if (height11 < width11) {
        
       $(".sidebar.left").trigger("sidebar:open");
       $(".sidebar.right").trigger("sidebar:open");
    }
    else
    {
        $(".sidebar.left").trigger("sidebar:close");
       $(".sidebar.right").trigger("sidebar:close");
    }
});*/

 $(document).ready(function(){
       
        $(".profile_down #aloo").click(function(event){

        });
    });
</script>

<script type="text/javascript">
    $(document).ready(function(){
         if (window.matchMedia("(max-width: 767px)").matches) {  
   function readDeviceOrientation() {
                     
    if (Math.abs(window.orientation) === 90) {
        // Landscape
       //alert("landscape")
       // $("#landscaperestrict").css("display","block")
       $(".landscaperestrict").css("background","black");
        $(".landscaperestrict").removeClass("none33");
        $(".intro").css("display","none");
        $("section").css("display","none");
        $(".sidebar.right.background.sdbrwdth").css("display","none");
        $(".sidebars > .sidebar").css("display","none");
        $(".navbar-fixed-top").css("display","none");
       /* $(".sidebar.right.background.sdbrwdth").css("position","fixed");
        $(".sidebar.right.background.sdbrwdth").css("right","0");*/
       
    } else {
        // Portrait
        //alert("port")
         $(".landscaperestrict").addClass("none33");
         $(".intro").css("display","block");
        $("section").css("display","block");
        $(".sidebar.right.background.sdbrwdth").css("display","block");
        $(".sidebars > .sidebar").css("display","block");
        $(".navbar-fixed-top").css("display","block");
    }
}

window.onorientationchange = readDeviceOrientation;
}
});

    
</script>

<script type="text/javascript">
    
    $(document).ready(function(){
        var scrolled = 0;
$(document).ready(function () {
    $("#downClick").on("click", function () {
        console.log("DOWN DOWN");

        var me11 = $("#zeher").scrollTop();
    var mine11 = $("#lightSlider").height() - 130;
    
        if(scrolled == mine11){
            scrolled = mine11;
          //alert(scrolled);
          //alert(scrolled);
        }
        else
        {
            scrolled = scrolled + 130;
            $("#zeher").stop().animate({
            scrollTop: scrolled
        });
        }



        
    });

    $("#upClick").on("click", function () {
         console.log("UP UP UP");
         if(scrolled == 0 ){
         scrolled = 0;
        }
        else
        {
        scrolled = scrolled - 130;
        $("#zeher").stop().animate({
            scrollTop: scrolled
        });
    }
       /* if  ($(document).height = 0)
        {
            alert("comes to 0");
        }*/
    });

   
});
    });
</script>


<script type="text/javascript">
    
    $(document).ready(function(){
        var scrolled = 0;
$(document).ready(function () {
    $("#downClickfav").on("click", function () {
        console.log("DOWN DOWN");

        var me11 = $("#zeherfav").scrollTop();
    var mine11 = $("#favimg1").height() - 130;
    
        if(scrolled == mine11){
            scrolled = mine11;
          //alert(scrolled);
          //alert(scrolled);
        }
        else
        {
            scrolled = scrolled + 130;
            $("#zeherfav").stop().animate({
            scrollTop: scrolled
        });
        }



        
    });

    $("#upClickfav").on("click", function () {
         console.log("UP UP UP");
         if(scrolled == 0 ){
         scrolled = 0;
        }
        else
        {
        scrolled = scrolled - 130;
        $("#zeherfav").stop().animate({
            scrollTop: scrolled
        });
    }
       /* if  ($(document).height = 0)
        {
            alert("comes to 0");
        }*/
    });

   
});
    });
</script>


<script type="text/javascript">
    

    
    $( "#slider-range123" ).slider({
        range: true,
        min: 0,
        max: 4000,
        values: [ 0, 4000 ],
        slide: function( event, ui ) {
             var max = $("#slider-range123").slider('option', 'max');
            $( "#amountprice" ).html( ui.values[ 0 ] );
            $( "#amountprice2" ).html( ui.values[ 1 ] );
            $("#slider-range123").val(ui.values[0] + " - " + ui.values[1]);
        if (ui.values[1] == max) $('#amountprice2').html($('#amountprice2').html() + '+');
        
        },



    change: function( event, ui ) {
     //alert("hello")
    /*
 $( "#changevalue" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
               */
           console.log("Inside filter")      
            var lightSlider = $('#lightSlider');
             console.log("price sorting")
             console.log(sortedPrice)
             console.log("Light slider "+toogelSort)
             console.log(lightSlider)
             if(toogelSort == -1){
            console.log("Descending :")
             sortedPrice.sort(function(a, b) {
               a = a.substring(a.lastIndexOf("_") + 1, a.length);
              b= b.substring(b.lastIndexOf("_") + 1, b.length);
             return b - a;
           });
             var countD  = 0;
           for(var i = 0 ; i < sortedPrice.length ; i++ ){
            console.log("Sorteed Price ID ::"+sortedPrice[i])
            var priceremove =  $('.'+sortedPrice[i]).clone(true);
            console.log(priceremove)
             $('.'+sortedPrice[i]).remove();
             var compareVal = sortedPrice[i].substring(sortedPrice[i].lastIndexOf("_") + 1, sortedPrice[i].length);
             lightSlider.append(priceremove)
           var str ;
               if(ui.values[1] < 4000){
                str = compareVal > ui.values[0]  && compareVal  < ui.values[1] ;
               }else{
                str = compareVal > ui.values[0] ;
               }
               console.log("Value of STR :: ---------"+str);
            // if(compareVal > ui.values[0]  && compareVal  < ui.values[1]  ){
                if(str){
           $('.'+sortedPrice[i]).show();
           countD++;
           }else{
             $('.'+sortedPrice[i]).hide();
           }
           if(i == (sortedPrice.length - 1)){
            console.log("Count D value ::"+countD)
            $('#resultCount').html(countD)
           }
           }
             }else{
             console.log("ascending :")
             sortedPrice.sort(function(a, b) {
               a = a.substring(a.lastIndexOf("_") + 1, a.length);
              b= b.substring(b.lastIndexOf("_") + 1, b.length);
             return a - b;
           });
             var countA = 0;
           for(var i = 0 ; i < sortedPrice.length ; i++ ){
            var priceremove =  $('.'+sortedPrice[i]).clone(true);
             $('.'+sortedPrice[i]).remove();
             var compareVal = sortedPrice[i].substring(sortedPrice[i].lastIndexOf("_") + 1, sortedPrice[i].length);
               lightSlider.append(priceremove)
               var str ;
               if(ui.values[1] < 4000){
                str = compareVal > ui.values[0]  && compareVal  < ui.values[1] ;
               }else{
                str = compareVal > ui.values[0] ;
               }
               console.log("Value of STR :: ---------"+str);
            // if(compareVal > ui.values[0]  && compareVal  < ui.values[1]  ){
                if(str){
           $('.'+sortedPrice[i]).show();
           countA++;
           }else{
             $('.'+sortedPrice[i]).hide();
           }
           if(i == (sortedPrice.length - 1)){
                 console.log("Count A value ::"+countA)
            $('#resultCount').html(countA)
           }
           }
            
             }
           }
    });

    $("#amountprice").change(function() {
        $("#slider-range123").slider('values',0,$(this).val());
    });
    $("#amountprice2").change(function() {
        $("#slider-range123").slider('values',1,$(this).val());
    });


    



</script>
</body>

</html>